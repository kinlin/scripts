<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="4010px" preserveAspectRatio="none" style="width:2458px;height:4010px;" version="1.1" viewBox="0 0 2458 4010" width="2458px" zoomAndPan="magnify"><defs><filter height="300%" id="f4s8gyjijw7wf" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#DDDDDD" height="3995.3203" style="stroke: #A80036; stroke-width: 1.0;" width="156" x="929" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="96" x="959" y="16.0669">Usecase XXX</text><rect fill="#7FFF00" filter="url(#f4s8gyjijw7wf)" height="1170.5781" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="263" y="677.8203"/><rect fill="#008000" filter="url(#f4s8gyjijw7wf)" height="1111.9141" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="486" y="707.3516"/><rect fill="#ADFF2F" filter="url(#f4s8gyjijw7wf)" height="40.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="491" y="768.6172"/><rect fill="#FFFFFF" filter="url(#f4s8gyjijw7wf)" height="184.7969" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="491" y="1354.4063"/><rect fill="#FFFFFF" filter="url(#f4s8gyjijw7wf)" height="68.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="491" y="1575.3359"/><rect fill="#FFFFFF" filter="url(#f4s8gyjijw7wf)" height="1899.1563" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="486" y="1961.4688"/><rect fill="#7CFC00" filter="url(#f4s8gyjijw7wf)" height="837.8516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="785" y="952.2813"/><rect fill="#FFFFFF" filter="url(#f4s8gyjijw7wf)" height="139.9297" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="790" y="1004.5469"/><rect fill="#FFFFFF" filter="url(#f4s8gyjijw7wf)" height="565.3906" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="790" y="1188.6094"/><rect fill="#FFFFFF" filter="url(#f4s8gyjijw7wf)" height="441.8594" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1002" y="1277.0078"/><rect fill="#FFFFFF" filter="url(#f4s8gyjijw7wf)" height="1725.2266" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1298" y="2099.2656"/><rect fill="#FFFFFF" filter="url(#f4s8gyjijw7wf)" height="126.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1440" y="1383.5391"/><rect fill="#FFFFFF" filter="url(#f4s8gyjijw7wf)" height="1666.9609" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1440" y="2128.3984"/><rect fill="#FFFFFF" filter="url(#f4s8gyjijw7wf)" height="68.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1701" y="1412.6719"/><rect fill="#FFFFFF" filter="url(#f4s8gyjijw7wf)" height="113.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1701" y="2157.5313"/><rect fill="#FFFFFF" filter="url(#f4s8gyjijw7wf)" height="68.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1701" y="2300.3281"/><rect fill="#FFFFFF" filter="url(#f4s8gyjijw7wf)" height="826.1797" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1701" y="2421.8594"/><rect fill="#FFFFFF" filter="url(#f4s8gyjijw7wf)" height="252.3281" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1706" y="2734.1172"/><rect fill="#FFFFFF" filter="url(#f4s8gyjijw7wf)" height="482.0547" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1701" y="3277.1719"/><rect fill="#FFFFFF" filter="url(#f4s8gyjijw7wf)" height="143.9297" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1903" y="2807.3828"/><rect fill="#FFFFFF" filter="url(#f4s8gyjijw7wf)" height="189.3281" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1903" y="3022.5781"/><rect fill="#FFFFFF" filter="url(#f4s8gyjijw7wf)" height="101.3984" style="stroke: #000000; stroke-width: 2.0;" width="395" x="400" y="722.4844"/><rect fill="#FFFFFF" filter="url(#f4s8gyjijw7wf)" height="71.3984" style="stroke: #000000; stroke-width: 2.0;" width="510" x="13" y="837.8828"/><rect fill="#FFFFFF" filter="url(#f4s8gyjijw7wf)" height="359.5938" style="stroke: #000000; stroke-width: 2.0;" width="1948" x="390" y="1292.1406"/><rect fill="#FFFFFF" filter="url(#f4s8gyjijw7wf)" height="231.0625" style="stroke: #000000; stroke-width: 2.0;" width="1440" x="400" y="1316.2734"/><rect fill="#FFFFFF" filter="url(#f4s8gyjijw7wf)" height="1771.4922" style="stroke: #000000; stroke-width: 2.0;" width="2036" x="400" y="2061.1328"/><rect fill="#FFFFFF" filter="url(#f4s8gyjijw7wf)" height="1383.6328" style="stroke: #000000; stroke-width: 2.0;" width="1054" x="1372" y="2383.7266"/><rect fill="#FFFFFF" filter="url(#f4s8gyjijw7wf)" height="532.0547" style="stroke: #000000; stroke-width: 2.0;" width="931" x="1485" y="2687.9844"/><rect fill="#FFFFFF" filter="url(#f4s8gyjijw7wf)" height="116.7969" style="stroke: #000000; stroke-width: 2.0;" width="486" x="1706" y="3292.3047"/><rect fill="#FFFFFF" filter="url(#f4s8gyjijw7wf)" height="131.9297" style="stroke: #000000; stroke-width: 2.0;" width="645" x="1706" y="3423.1016"/><rect fill="#FFFFFF" filter="url(#f4s8gyjijw7wf)" height="162.1953" style="stroke: #000000; stroke-width: 2.0;" width="598" x="1706" y="3569.0313"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="268" x2="268" y1="58.4297" y2="527.8828"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="268" x2="268" y1="527.8828" y2="568.6875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="268" x2="268" y1="568.6875" y2="1856.5313"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="268" x2="268" y1="1856.5313" y2="1897.3359"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="268" x2="268" y1="1897.3359" y2="3961.0234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="491" x2="491" y1="58.4297" y2="527.8828"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="491" x2="491" y1="527.8828" y2="568.6875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="491" x2="491" y1="568.6875" y2="1856.5313"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="491" x2="491" y1="1856.5313" y2="1897.3359"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="491" x2="491" y1="1897.3359" y2="3961.0234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="789.5" x2="789.5" y1="58.4297" y2="527.8828"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="789.5" x2="789.5" y1="527.8828" y2="568.6875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="789.5" x2="789.5" y1="568.6875" y2="1856.5313"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="789.5" x2="789.5" y1="1856.5313" y2="1897.3359"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="789.5" x2="789.5" y1="1897.3359" y2="3961.0234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1007" x2="1007" y1="58.4297" y2="527.8828"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1007" x2="1007" y1="527.8828" y2="568.6875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1007" x2="1007" y1="568.6875" y2="1856.5313"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1007" x2="1007" y1="1856.5313" y2="1897.3359"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1007" x2="1007" y1="1897.3359" y2="3961.0234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1173" x2="1173" y1="58.4297" y2="527.8828"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1173" x2="1173" y1="527.8828" y2="568.6875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1173" x2="1173" y1="568.6875" y2="1856.5313"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1173" x2="1173" y1="1856.5313" y2="1897.3359"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1173" x2="1173" y1="1897.3359" y2="3961.0234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1303" x2="1303" y1="58.4297" y2="527.8828"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1303" x2="1303" y1="527.8828" y2="568.6875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1303" x2="1303" y1="568.6875" y2="1856.5313"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1303" x2="1303" y1="1856.5313" y2="1897.3359"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1303" x2="1303" y1="1897.3359" y2="3961.0234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1445" x2="1445" y1="58.4297" y2="527.8828"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1445" x2="1445" y1="527.8828" y2="568.6875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1445" x2="1445" y1="568.6875" y2="1856.5313"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1445" x2="1445" y1="1856.5313" y2="1897.3359"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1445" x2="1445" y1="1897.3359" y2="3961.0234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1706" x2="1706" y1="58.4297" y2="527.8828"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1706" x2="1706" y1="527.8828" y2="568.6875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1706" x2="1706" y1="568.6875" y2="1856.5313"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1706" x2="1706" y1="1856.5313" y2="1897.3359"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1706" x2="1706" y1="1897.3359" y2="3961.0234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1908" x2="1908" y1="58.4297" y2="527.8828"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1908" x2="1908" y1="527.8828" y2="568.6875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1908" x2="1908" y1="568.6875" y2="1856.5313"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1908" x2="1908" y1="1856.5313" y2="1897.3359"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1908" x2="1908" y1="1897.3359" y2="3961.0234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2036" x2="2036" y1="58.4297" y2="527.8828"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="2036" x2="2036" y1="527.8828" y2="568.6875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2036" x2="2036" y1="568.6875" y2="1856.5313"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="2036" x2="2036" y1="1856.5313" y2="1897.3359"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2036" x2="2036" y1="1897.3359" y2="3961.0234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2187" x2="2187" y1="58.4297" y2="527.8828"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="2187" x2="2187" y1="527.8828" y2="568.6875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2187" x2="2187" y1="568.6875" y2="1856.5313"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="2187" x2="2187" y1="1856.5313" y2="1897.3359"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2187" x2="2187" y1="1897.3359" y2="3961.0234"/><rect fill="#FEFECE" filter="url(#f4s8gyjijw7wf)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="166" x="183" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="152" x="190" y="43.1279">chxextensioninterface</text><rect fill="#FEFECE" filter="url(#f4s8gyjijw7wf)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="166" x="183" y="3960.0234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="152" x="190" y="3980.0186">chxextensioninterface</text><rect fill="#FEFECE" filter="url(#f4s8gyjijw7wf)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="158" x="410" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="144" x="417" y="43.1279">chxextensionmodule</text><rect fill="#FEFECE" filter="url(#f4s8gyjijw7wf)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="158" x="410" y="3960.0234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="144" x="417" y="3980.0186">chxextensionmodule</text><rect fill="#FEFECE" filter="url(#f4s8gyjijw7wf)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="739.5" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="746.5" y="43.1279">chxusecase</text><rect fill="#FEFECE" filter="url(#f4s8gyjijw7wf)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="739.5" y="3960.0234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="746.5" y="3980.0186">chxusecase</text><rect fill="#FEFECE" filter="url(#f4s8gyjijw7wf)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="144" x="933" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="130" x="940" y="43.1279">chxusecasedefault</text><rect fill="#FEFECE" filter="url(#f4s8gyjijw7wf)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="144" x="933" y="3960.0234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="130" x="940" y="3980.0186">chxusecasedefault</text><rect fill="#FEFECE" filter="url(#f4s8gyjijw7wf)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="161" x="1091" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="147" x="1098" y="43.1279">camxhal3module.cpp</text><rect fill="#FEFECE" filter="url(#f4s8gyjijw7wf)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="161" x="1091" y="3960.0234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="147" x="1098" y="3980.0186">camxhal3module.cpp</text><rect fill="#FEFECE" filter="url(#f4s8gyjijw7wf)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="70" x="1266" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="56" x="1273" y="43.1279">camxchi</text><rect fill="#FEFECE" filter="url(#f4s8gyjijw7wf)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="70" x="1266" y="3960.0234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="56" x="1273" y="3980.0186">camxchi</text><rect fill="#FEFECE" filter="url(#f4s8gyjijw7wf)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="122" x="1382" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="108" x="1389" y="43.1279">camxchicontext</text><rect fill="#FEFECE" filter="url(#f4s8gyjijw7wf)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="122" x="1382" y="3960.0234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="108" x="1389" y="3980.0186">camxchicontext</text><rect fill="#FEFECE" filter="url(#f4s8gyjijw7wf)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="104" x="1652" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1659" y="43.1279">camxsession</text><rect fill="#FEFECE" filter="url(#f4s8gyjijw7wf)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="104" x="1652" y="3960.0234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1659" y="3980.0186">camxsession</text><rect fill="#FEFECE" filter="url(#f4s8gyjijw7wf)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="104" x="1854" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1861" y="43.1279">camxpipeline</text><rect fill="#FEFECE" filter="url(#f4s8gyjijw7wf)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="104" x="1854" y="3960.0234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1861" y="3980.0186">camxpipeline</text><rect fill="#FEFECE" filter="url(#f4s8gyjijw7wf)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="124" x="1972" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="110" x="1979" y="43.1279">camxhal3queue</text><rect fill="#FEFECE" filter="url(#f4s8gyjijw7wf)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="124" x="1972" y="3960.0234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="110" x="1979" y="3980.0186">camxhal3queue</text><rect fill="#FEFECE" filter="url(#f4s8gyjijw7wf)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="2110" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="136" x="2117" y="43.1279">chxextenionmodule</text><rect fill="#FEFECE" filter="url(#f4s8gyjijw7wf)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="2110" y="3960.0234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="136" x="2117" y="3980.0186">chxextenionmodule</text><rect fill="#7FFF00" filter="url(#f4s8gyjijw7wf)" height="1170.5781" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="263" y="677.8203"/><rect fill="#008000" filter="url(#f4s8gyjijw7wf)" height="1111.9141" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="486" y="707.3516"/><rect fill="#ADFF2F" filter="url(#f4s8gyjijw7wf)" height="40.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="491" y="768.6172"/><rect fill="#FFFFFF" filter="url(#f4s8gyjijw7wf)" height="184.7969" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="491" y="1354.4063"/><rect fill="#FFFFFF" filter="url(#f4s8gyjijw7wf)" height="68.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="491" y="1575.3359"/><rect fill="#FFFFFF" filter="url(#f4s8gyjijw7wf)" height="1899.1563" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="486" y="1961.4688"/><rect fill="#7CFC00" filter="url(#f4s8gyjijw7wf)" height="837.8516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="785" y="952.2813"/><rect fill="#FFFFFF" filter="url(#f4s8gyjijw7wf)" height="139.9297" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="790" y="1004.5469"/><rect fill="#FFFFFF" filter="url(#f4s8gyjijw7wf)" height="565.3906" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="790" y="1188.6094"/><rect fill="#FFFFFF" filter="url(#f4s8gyjijw7wf)" height="441.8594" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1002" y="1277.0078"/><rect fill="#FFFFFF" filter="url(#f4s8gyjijw7wf)" height="1725.2266" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1298" y="2099.2656"/><rect fill="#FFFFFF" filter="url(#f4s8gyjijw7wf)" height="126.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1440" y="1383.5391"/><rect fill="#FFFFFF" filter="url(#f4s8gyjijw7wf)" height="1666.9609" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1440" y="2128.3984"/><rect fill="#FFFFFF" filter="url(#f4s8gyjijw7wf)" height="68.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1701" y="1412.6719"/><rect fill="#FFFFFF" filter="url(#f4s8gyjijw7wf)" height="113.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1701" y="2157.5313"/><rect fill="#FFFFFF" filter="url(#f4s8gyjijw7wf)" height="68.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1701" y="2300.3281"/><rect fill="#FFFFFF" filter="url(#f4s8gyjijw7wf)" height="826.1797" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1701" y="2421.8594"/><rect fill="#FFFFFF" filter="url(#f4s8gyjijw7wf)" height="252.3281" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1706" y="2734.1172"/><rect fill="#FFFFFF" filter="url(#f4s8gyjijw7wf)" height="482.0547" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1701" y="3277.1719"/><rect fill="#FFFFFF" filter="url(#f4s8gyjijw7wf)" height="143.9297" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1903" y="2807.3828"/><rect fill="#FFFFFF" filter="url(#f4s8gyjijw7wf)" height="189.3281" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1903" y="3022.5781"/><rect fill="#EEEEEE" filter="url(#f4s8gyjijw7wf)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="2443" x="3" y="88.9961"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="2446" y1="88.9961" y2="88.9961"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="2446" y1="91.9961" y2="91.9961"/><rect fill="#EEEEEE" filter="url(#f4s8gyjijw7wf)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="138" x="1155.5" y="78.4297"/><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="114" x="1166.5" y="94.4966">Callback config</text><ellipse cx="10.5" cy="146.8125" fill="none" rx="4" ry="4" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#A80036" points="1291,143.5625,1301,147.5625,1291,151.5625,1295,147.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="15" x2="1297" y1="147.5625" y2="147.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="58" x="18" y="127.6294">ChiEntry(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="214" x="18" y="142.7622">ChiContextOps* pChiContextOps)</text><polygon fill="#FBFB77" filter="url(#f4s8gyjijw7wf)" points="669,160.8281,669,518.8281,1294,518.8281,1294,170.8281,1284,160.8281,669,160.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1284" x2="1284" y1="160.8281" y2="170.8281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1294" x2="1284" y1="170.8281" y2="170.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="675" y="177.895">will set:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="440" x="691" y="193.0278">pChiContextOps-&gt;pOpenContext               = CamX::ChiOpenContext;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="438" x="691" y="208.1606">pChiContextOps-&gt;pCloseContext              = CamX::ChiCloseContext;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="488" x="691" y="223.2935">pChiContextOps-&gt;pGetNumCameras             = CamX::ChiGetNumCameras;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="458" x="691" y="238.4263">pChiContextOps-&gt;pGetCameraInfo             = CamX::ChiGetCameraInfo;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="552" x="691" y="253.5591">pChiContextOps-&gt;pEnumerateSensorModes      = CamX::ChiEnumerateSensorModes;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="536" x="691" y="268.6919">pChiContextOps-&gt;pCreatePipelineDescriptor  = CamX::ChiCreatePipelineDescriptor;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="546" x="691" y="283.8247">pChiContextOps-&gt;pDestroyPipelineDescriptor = CamX::ChiDestroyPipelineDescriptor;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="450" x="691" y="298.9575">pChiContextOps-&gt;pCreateSession             = CamX::ChiCreateSession;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="460" x="691" y="314.0903">pChiContextOps-&gt;pDestroySession            = CamX::ChiDestroySession;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="434" x="691" y="329.2231">pChiContextOps-&gt;pFlushSession              = CamX::ChiFlushSession;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="454" x="691" y="344.356">pChiContextOps-&gt;pActivatePipeline          = CamX::ChiActivatePipeline;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="480" x="691" y="359.4888">pChiContextOps-&gt;pDeactivatePipeline        = CamX::ChiDeactivatePipeline;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="691" y="374.6216">pChiContextOps-&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="182" x="810" y="374.6216">pSubmitPipelineRequest</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="11" x="1012" y="374.6216">=</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="248" x="1027" y="374.6216">CamX::ChiSubmitPipelineRequest</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="1275" y="374.6216">;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="558" x="691" y="389.7544">pChiContextOps-&gt;pQueryPipelineMetadataInfo = CamX::ChiQueryPipelineMetadataInfo;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="411" x="691" y="404.8872">pChiContextOps-&gt;pTagOps                    = CamX::ChiGetTagOps;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="444" x="691" y="420.02">pChiContextOps-&gt;pGetFenceOps               = CamX::ChiGetFenceOps;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="467" x="691" y="435.1528">pChiContextOps-&gt;pMetadataOps               = CamX::ChiGetMetadataOps;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="524" x="691" y="450.2856">pChiContextOps-&gt;pGetBufferManagerOps       = CamX::ChiGetBufferManagerOps;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="679" y="465.4185"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="675" y="480.5513">when load this:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="177" x="691" y="495.6841">PCHIENTRY funcPChiEntry =</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="463" x="707" y="510.8169">reinterpret_cast&lt;PCHIENTRY&gt;(ChxUtils::LibGetAddr(handle, "ChiEntry"));</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="1229.5" y="552.0933"/><rect fill="#EEEEEE" filter="url(#f4s8gyjijw7wf)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="2443" x="3" y="589.2539"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="2446" y1="589.2539" y2="589.2539"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="2446" y1="592.2539" y2="592.2539"/><rect fill="#EEEEEE" filter="url(#f4s8gyjijw7wf)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="180" x="1134.5" y="578.6875"/><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="127" x="1140.5" y="594.7544">get request from</text><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="29" x="1272.5" y="594.7544">HAL</text><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="0" x="1306.5" y="594.7544"/><ellipse cx="10.5" cy="677.0703" fill="none" rx="4" ry="4" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#A80036" points="251,673.8203,261,677.8203,251,681.8203,255,677.8203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="15" x2="257" y1="677.8203" y2="677.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="218" x="18" y="627.8872">chi_override_process_request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="236" y="627.8872">(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="167" x="18" y="643.02">const camera3_device_t*,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="18" y="658.1528">camera3_capture_request_t*,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="38" x="18" y="673.2856">void*)</text><polygon fill="#A80036" points="474,703.3516,484,707.3516,474,711.3516,478,707.3516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="273" x2="480" y1="707.3516" y2="707.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="194" x="280" y="702.4185">OverrideProcessRequest()</text><rect fill="none" height="101.3984" style="stroke: #000000; stroke-width: 2.0;" width="395" x="400" y="722.4844"/><polygon fill="#EEEEEE" points="400,722.4844,464,722.4844,464,729.4844,454,739.4844,400,739.4844,400,722.4844" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="415" y="735.5513">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5" x="479" y="734.6948">[</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="187" x="484" y="734.6948">m_aFlushInProgress == TRUE</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5" x="671" y="734.6948">]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="496" x2="543" y1="755.75" y2="755.75"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="543" x2="543" y1="755.75" y2="768.75"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="502" x2="543" y1="768.75" y2="768.75"/><polygon fill="#A80036" points="512,764.75,502,768.75,512,772.75,508,768.75" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="275" x="508" y="750.6841">HandleProcessRequestErrorAllPCRs()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="501" x2="543" y1="807.8828" y2="807.8828"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="543" x2="543" y1="807.8828" y2="820.8828"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="496" x2="543" y1="820.8828" y2="820.8828"/><polygon fill="#A80036" points="506,816.8828,496,820.8828,506,824.8828,502,820.8828" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="508" y="802.8169">return</text><rect fill="none" height="71.3984" style="stroke: #000000; stroke-width: 2.0;" width="510" x="13" y="837.8828"/><polygon fill="#EEEEEE" points="13,837.8828,77,837.8828,77,844.8828,67,854.8828,13,854.8828,13,837.8828" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="28" y="850.9497">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5" x="92" y="850.0933">[</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="162" x="97" y="850.0933">IsLongExposureCapture()</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5" x="259" y="850.0933">]</text><polygon fill="#FBFB77" filter="url(#f4s8gyjijw7wf)" points="23,860.0156,23,900.0156,509,900.0156,509,870.0156,499,860.0156,23,860.0156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="499" x2="499" y1="860.0156" y2="870.0156"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="509" x2="499" y1="870.0156" y2="870.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="20" x="29" y="877.0825">set</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="271" x="53" y="877.0825">m_aLongExposureInProgress = TRUE</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="20" x="29" y="892.2153">set</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="168" x="53" y="892.2153">m_longExposureFrame</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="11" x="225" y="892.2153">=</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="254" x="240" y="892.2153">pCaptureRequest-&gt;frame_number</text><polygon fill="#A80036" points="773,948.2813,783,952.2813,773,956.2813,777,952.2813" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="496" x2="779" y1="952.2813" y2="952.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="178" x="503" y="932.3481">ProcessCaptureRequest</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="681" y="932.3481">(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="193" x="503" y="947.481">camera3_capture_request_t*)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="795" x2="842" y1="991.8125" y2="991.8125"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="842" x2="842" y1="991.8125" y2="1004.8125"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="801" x2="842" y1="1004.8125" y2="1004.8125"/><polygon fill="#A80036" points="811,1000.8125,801,1004.8125,811,1008.8125,807,1004.8125" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="193" x="807" y="971.6138">AssignChiOverrideFrameNum(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="76" x="807" y="986.7466">pRequest-&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="108" x="883" y="986.7466">frame_number</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="9" x="991" y="986.7466">);</text><polygon fill="#FBFB77" filter="url(#f4s8gyjijw7wf)" points="533,1022.8125,533,1107.8125,1042,1107.8125,1042,1032.8125,1032,1022.8125,533,1022.8125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1032" x2="1032" y1="1022.8125" y2="1032.8125"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1042" x2="1032" y1="1032.8125" y2="1032.8125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="429" x="539" y="1039.8794">Assign a Chi Override FrameNum to the original APP frame number</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="252" x="539" y="1055.0122">and replace the request frame_number</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="195" x="539" y="1070.145">pRequest-&gt;frame_number</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="11" x="738" y="1070.145">=</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="165" x="753" y="1070.145">chiOverrideFrameNum</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="165" x="539" y="1085.2778">chiOverrideFrameNum</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="708" y="1085.2778">increase from</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="800" y="1085.2778">0</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="539" y="1100.4106">and the</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="165" x="592" y="1100.4106">chiOverrideFrameNum</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="76" x="761" y="1100.4106">is keeped in</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="186" x="841" y="1100.4106">m_lastAppRequestFrame</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="800" x2="842" y1="1143.6094" y2="1143.6094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="842" x2="842" y1="1143.6094" y2="1156.6094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="795" x2="842" y1="1156.6094" y2="1156.6094"/><polygon fill="#A80036" points="805,1152.6094,795,1156.6094,805,1160.6094,801,1156.6094" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="807" y="1138.5435">return</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="795" x2="842" y1="1175.7422" y2="1175.7422"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="842" x2="842" y1="1175.7422" y2="1188.7422"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="801" x2="842" y1="1188.7422" y2="1188.7422"/><polygon fill="#A80036" points="811,1184.7422,801,1188.7422,811,1192.7422,807,1188.7422" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="190" x="807" y="1170.6763">ExecuteCaptureRequest()</text><polygon fill="#FBFB77" filter="url(#f4s8gyjijw7wf)" points="516,1206.7422,516,1246.7422,1060,1246.7422,1060,1216.7422,1050,1206.7422,516,1206.7422" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1050" x2="1050" y1="1206.7422" y2="1216.7422"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1060" x2="1050" y1="1216.7422" y2="1216.7422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="522" y="1223.8091">will run</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="192" x="569" y="1223.8091">ReplaceRequestMetaData</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="105" x="765" y="1223.8091">save origin Meta</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="24" x="522" y="1238.9419">and</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="189" x="550" y="1238.9419">RestoreRequestMetadata</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="743" y="1238.9419">restore, after</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="178" x="831" y="1238.9419">ExecuteCaptureRequest</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="1013" y="1238.9419">done</text><polygon fill="#A80036" points="990,1273.0078,1000,1277.0078,990,1281.0078,994,1277.0078" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="800" x2="996" y1="1277.0078" y2="1277.0078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="148" x="807" y="1272.0747">SubmitChiRequest()</text><rect fill="none" height="359.5938" style="stroke: #000000; stroke-width: 2.0;" width="1948" x="390" y="1292.1406"/><polygon fill="#EEEEEE" points="390,1292.1406,454,1292.1406,454,1299.1406,444,1309.1406,390,1309.1406,390,1292.1406" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="405" y="1305.2075">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5" x="469" y="1304.3511">[</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="177" x="474" y="1304.3511">IsPipelineActive() == FALSE</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5" x="651" y="1304.3511">]</text><rect fill="none" height="231.0625" style="stroke: #000000; stroke-width: 2.0;" width="1440" x="400" y="1316.2734"/><polygon fill="#EEEEEE" points="400,1316.2734,464,1316.2734,464,1323.2734,454,1333.2734,400,1333.2734,400,1316.2734" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="415" y="1329.3403">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5" x="479" y="1328.4839">[</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="186" x="484" y="1328.4839">sessionIdx == m_realTimeIdx</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5" x="670" y="1328.4839">]</text><polygon fill="#A80036" points="512,1350.4063,502,1354.4063,512,1358.4063,508,1354.4063" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="506" x2="1001" y1="1354.4063" y2="1354.4063"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="131" x="518" y="1349.4731">ActivatePipeline()</text><polygon fill="#A80036" points="1428,1379.5391,1438,1383.5391,1428,1387.5391,1432,1383.5391" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="501" x2="1434" y1="1383.5391" y2="1383.5391"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="131" x="508" y="1378.606">ActivatePipeline()</text><polygon fill="#A80036" points="1689,1408.6719,1699,1412.6719,1689,1416.6719,1693,1412.6719" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1450" x2="1695" y1="1412.6719" y2="1412.6719"/><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="85" x="1457" y="1407.7388">StreamOn()</text><polygon fill="#FBFB77" filter="url(#f4s8gyjijw7wf)" points="1582,1425.8047,1582,1450.8047,1826,1450.8047,1826,1435.8047,1816,1425.8047,1582,1425.8047" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1816" x2="1816" y1="1425.8047" y2="1435.8047"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1826" x2="1816" y1="1435.8047" y2="1435.8047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="223" x="1588" y="1442.8716">The same as below, not paint twice</text><polygon fill="#A80036" points="1461,1476.9375,1451,1480.9375,1461,1484.9375,1457,1480.9375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1455" x2="1705" y1="1480.9375" y2="1480.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="1467" y="1476.0044">return</text><polygon fill="#A80036" points="512,1506.0703,502,1510.0703,512,1514.0703,508,1510.0703" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="506" x2="1444" y1="1510.0703" y2="1510.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="45" x="518" y="1505.1372">return</text><polygon fill="#A80036" points="990,1535.2031,1000,1539.2031,990,1543.2031,994,1539.2031" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="496" x2="996" y1="1539.2031" y2="1539.2031"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="45" x="503" y="1534.27">return</text><polygon fill="#A80036" points="512,1571.3359,502,1575.3359,512,1579.3359,508,1575.3359" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="506" x2="1001" y1="1575.3359" y2="1575.3359"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="125" x="518" y="1570.4028">SubmitRequest()</text><polygon fill="#FBFB77" filter="url(#f4s8gyjijw7wf)" points="2045,1588.4688,2045,1613.4688,2324,1613.4688,2324,1598.4688,2314,1588.4688,2045,1588.4688" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2314" x2="2314" y1="1588.4688" y2="1598.4688"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2324" x2="2314" y1="1598.4688" y2="1598.4688"/><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="258" x="2051" y="1605.5356">Finally, still go into SubmitRequest</text><polygon fill="#A80036" points="990,1639.6016,1000,1643.6016,990,1647.6016,994,1643.6016" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="496" x2="996" y1="1643.6016" y2="1643.6016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="503" y="1638.6685">return</text><polygon fill="#FBFB77" filter="url(#f4s8gyjijw7wf)" points="808,1663.7344,808,1688.7344,1202,1688.7344,1202,1673.7344,1192,1663.7344,808,1663.7344" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1192" x2="1192" y1="1663.7344" y2="1673.7344"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1202" x2="1192" y1="1673.7344" y2="1673.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="55" x="814" y="1680.8013">Will run</text><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="313" x="874" y="1680.8013">ChxUtils::AndroidMetadata::FreeMetaData</text><polygon fill="#A80036" points="811,1714.8672,801,1718.8672,811,1722.8672,807,1718.8672" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="805" x2="1006" y1="1718.8672" y2="1718.8672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="817" y="1713.9341">return</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="800" x2="842" y1="1753.1328" y2="1753.1328"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="842" x2="842" y1="1753.1328" y2="1766.1328"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="795" x2="842" y1="1766.1328" y2="1766.1328"/><polygon fill="#A80036" points="805,1762.1328,795,1766.1328,805,1770.1328,801,1766.1328" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="807" y="1748.0669">return</text><polygon fill="#A80036" points="507,1786.1328,497,1790.1328,507,1794.1328,503,1790.1328" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="501" x2="789" y1="1790.1328" y2="1790.1328"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="513" y="1785.1997">return</text><polygon fill="#A80036" points="479,1815.2656,489,1819.2656,479,1823.2656,483,1819.2656" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="273" x2="485" y1="1819.2656" y2="1819.2656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="280" y="1814.3325">return</text><polygon fill="#A80036" points="22,1844.3984,12,1848.3984,22,1852.3984,18,1848.3984" style="stroke: #A80036; stroke-width: 1.0;"/><ellipse cx="267.5" cy="1847.6484" fill="none" rx="4" ry="4" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="16" x2="263" y1="1848.3984" y2="1848.3984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="28" y="1843.4653">return</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="1229.5" y="1880.7417"/><rect fill="#EEEEEE" filter="url(#f4s8gyjijw7wf)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="2443" x="3" y="1917.9023"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="2446" y1="1917.9023" y2="1917.9023"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="2446" y1="1920.9023" y2="1920.9023"/><rect fill="#EEEEEE" filter="url(#f4s8gyjijw7wf)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="235" x="1107" y="1907.3359"/><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="216" x="1113" y="1923.4028">submit pipeline request Flow</text><ellipse cx="10.5" cy="1960.7188" fill="none" rx="4" ry="4" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#A80036" points="474,1957.4688,484,1961.4688,474,1965.4688,478,1961.4688" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="15" x2="480" y1="1961.4688" y2="1961.4688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="214" x="18" y="1956.5356">ExtensionModule::SubmitRequest</text><polygon fill="#FBFB77" filter="url(#f4s8gyjijw7wf)" points="316,1974.6016,316,2044.6016,661,2044.6016,661,1984.6016,651,1974.6016,316,1974.6016" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="651" x2="651" y1="1974.6016" y2="1984.6016"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="661" x2="651" y1="1984.6016" y2="1984.6016"/><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="41" x="322" y="1991.6685">TODO:</text><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="185" x="322" y="2006.8013">both online/offline, goes here</text><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="320" x="322" y="2021.9341">The HAL request, will also change into chi request.</text><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="322" y="2037.0669">Run submitRequest</text><rect fill="none" height="1771.4922" style="stroke: #000000; stroke-width: 2.0;" width="2036" x="400" y="2061.1328"/><polygon fill="#EEEEEE" points="400,2061.1328,464,2061.1328,464,2068.1328,454,2078.1328,400,2078.1328,400,2061.1328" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="415" y="2074.1997">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5" x="479" y="2073.3433">[</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="128" x="484" y="2073.3433">m_aFlushInProgress</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="616" y="2073.3433">==</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="638" y="2073.3433">FALSE</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5" x="677" y="2073.3433">]</text><polygon fill="#A80036" points="1286,2095.2656,1296,2099.2656,1286,2103.2656,1290,2099.2656" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="496" x2="1292" y1="2099.2656" y2="2099.2656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="195" x="503" y="2094.3325">ChiSubmitPipelineRequest</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="10" x="698" y="2094.3325">()</text><polygon fill="#A80036" points="1428,2124.3984,1438,2128.3984,1428,2132.3984,1432,2128.3984" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1308" x2="1434" y1="2128.3984" y2="2128.3984"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="113" x="1315" y="2123.4653">SubmitRequest</text><polygon fill="#A80036" points="1689,2153.5313,1699,2157.5313,1689,2161.5313,1693,2157.5313" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1450" x2="1695" y1="2157.5313" y2="2157.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="232" x="1457" y="2152.5981">UpdateMultiRequestSyncData()</text><polygon fill="#FBFB77" filter="url(#f4s8gyjijw7wf)" points="1560,2170.6641,1560,2240.6641,1847,2240.6641,1847,2180.6641,1837,2170.6641,1560,2170.6641" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1837" x2="1837" y1="2170.6641" y2="2180.6641"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1847" x2="1837" y1="2180.6641" y2="2180.6641"/><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="240" x="1566" y="2187.731">TODO: Still not clear why we need this</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="238" x="1566" y="2202.8638">1. run when m_numInputSensors &gt; 2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="229" x="1566" y="2217.9966">2. if pRequest-&gt;numRequests &gt;= 2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="254" x="1578" y="2233.1294">set isMultiRequest=TRUE, need 3A sync</text><polygon fill="#A80036" points="1461,2267.1953,1451,2271.1953,1461,2275.1953,1457,2271.1953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1455" x2="1705" y1="2271.1953" y2="2271.1953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="1467" y="2266.2622">return</text><polygon fill="#A80036" points="1689,2296.3281,1699,2300.3281,1689,2304.3281,1693,2300.3281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1450" x2="1695" y1="2300.3281" y2="2300.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="193" x="1457" y="2295.395">CheckValidInputRequest()</text><polygon fill="#FBFB77" filter="url(#f4s8gyjijw7wf)" points="1620,2313.4609,1620,2338.4609,1787,2338.4609,1787,2323.4609,1777,2313.4609,1620,2313.4609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1777" x2="1777" y1="2313.4609" y2="2323.4609"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1787" x2="1777" y1="2323.4609" y2="2323.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146" x="1626" y="2330.5278">Check the Buffer is null</text><polygon fill="#A80036" points="1461,2364.5938,1451,2368.5938,1461,2372.5938,1457,2368.5938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1455" x2="1705" y1="2368.5938" y2="2368.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="1467" y="2363.6606">return</text><rect fill="none" height="1383.6328" style="stroke: #000000; stroke-width: 2.0;" width="1054" x="1372" y="2383.7266"/><polygon fill="#EEEEEE" points="1372,2383.7266,1436,2383.7266,1436,2390.7266,1426,2400.7266,1372,2400.7266,1372,2383.7266" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="1387" y="2396.7935">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="77" x="1451" y="2395.937">[pSession-&gt;</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="132" x="1528" y="2395.937">IsPipelineRealTime()</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="66" x="1664" y="2395.937">==FALSE]</text><polygon fill="#A80036" points="1689,2417.8594,1699,2421.8594,1689,2425.8594,1693,2421.8594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1450" x2="1695" y1="2421.8594" y2="2421.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="85" x="1457" y="2416.9263">StreamOn()</text><polygon fill="#FBFB77" filter="url(#f4s8gyjijw7wf)" points="1424,2434.9922,1424,2670.9922,1984,2670.9922,1984,2444.9922,1974,2434.9922,1424,2434.9922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1974" x2="1974" y1="2434.9922" y2="2444.9922"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1984" x2="1974" y1="2444.9922" y2="2444.9922"/><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="41" x="1430" y="2452.0591">TODO:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="353" x="1430" y="2467.1919">So this is the Offline Request. What about the realtime?</text><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="1430" y="2482.3247">PipelineStatus:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="93" x="1438" y="2497.4575">UNINITIALIZED</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="73" x="1438" y="2512.5903">INITIALIZED</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="67" x="1438" y="2527.7231">FINALIZED</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="153" x="1438" y="2542.856">RESOURCES_RELEASED</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="1438" y="2557.9888">STREAM_OFF</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="153" x="1438" y="2573.1216">RESOURCES_ACQUIRED</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="1438" y="2588.2544">PARTIAL_STREAM_ON</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="1438" y="2603.3872">STREAM_ON</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="29" x="1430" y="2618.52">VIP:</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="321" x="1430" y="2633.6528">for offline, will streamOn at submitRequest</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="302" x="1430" y="2648.7856">but for online, will ActivatePipeline when</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="194" x="1737" y="2648.7856">GenerateRealtimeRequest</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="539" x="1430" y="2663.9185">or USECASE::ExecuteCaptureRequest ? or online should always Active???</text><rect fill="none" height="532.0547" style="stroke: #000000; stroke-width: 2.0;" width="931" x="1485" y="2687.9844"/><polygon fill="#EEEEEE" points="1485,2687.9844,1549,2687.9844,1549,2694.9844,1539,2704.9844,1485,2704.9844,1485,2687.9844" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="1500" y="2701.0513">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="286" x="1564" y="2700.1948">[PipelineStatus::FINALIZED &gt; pipelineStatus]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1711" x2="1758" y1="2721.25" y2="2721.25"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1758" x2="1758" y1="2721.25" y2="2734.25"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1717" x2="1758" y1="2734.25" y2="2734.25"/><polygon fill="#A80036" points="1727,2730.25,1717,2734.25,1727,2738.25,1723,2734.25" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="168" x="1723" y="2716.1841">FinalizeDeferPipeline()</text><polygon fill="#FBFB77" filter="url(#f4s8gyjijw7wf)" points="1495,2752.25,1495,2777.25,1912,2777.25,1912,2762.25,1902,2752.25,1495,2752.25" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1902" x2="1902" y1="2752.25" y2="2762.25"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1912" x2="1902" y1="2762.25" y2="2762.25"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="1501" y="2769.3169">1.</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="133" x="1517" y="2769.3169">RegisterJobFamily</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="1650" y="2769.3169">(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="237" x="1655" y="2769.3169">NodeThreadJobFamilySessionCb</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="1892" y="2769.3169">)</text><polygon fill="#A80036" points="1891,2803.3828,1901,2807.3828,1891,2811.3828,1895,2807.3828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1716" x2="1897" y1="2807.3828" y2="2807.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="168" x="1723" y="2802.4497">FinalizeDeferPipeline()</text><polygon fill="#FBFB77" filter="url(#f4s8gyjijw7wf)" points="1918,2820.5156,1918,2920.5156,2281,2920.5156,2281,2830.5156,2271,2820.5156,1918,2820.5156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2271" x2="2271" y1="2820.5156" y2="2830.5156"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2281" x2="2271" y1="2830.5156" y2="2830.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="1924" y="2837.5825">1. for Every Node, run</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="157" x="2067" y="2837.5825">FinalizeInitialization()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="1924" y="2852.7153">2.</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="203" x="1940" y="2852.7153">DeterminBufferProperties()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="1924" y="2867.8481">3. for Every Node, run</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="180" x="2067" y="2867.8481">CreateBufferManagers()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="290" x="1924" y="2882.981">4. for Every Node, run NotifyPipelineCreated()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146" x="1924" y="2898.1138">5. set PipelineStates =</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="76" x="2074" y="2898.1138">FINALIZED</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="178" x="1924" y="2913.2466">6. Rigister CSL Callback   for</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="160" x="2106" y="2913.2466">IsRealTime() == TRUE</text><polygon fill="#A80036" points="1727,2947.3125,1717,2951.3125,1727,2955.3125,1723,2951.3125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1721" x2="1907" y1="2951.3125" y2="2951.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="1733" y="2946.3794">return</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1716" x2="1758" y1="2985.5781" y2="2985.5781"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1758" x2="1758" y1="2985.5781" y2="2998.5781"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1711" x2="1758" y1="2998.5781" y2="2998.5781"/><polygon fill="#A80036" points="1721,2994.5781,1711,2998.5781,1721,3002.5781,1717,2998.5781" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="1723" y="2980.5122">return</text><polygon fill="#A80036" points="1891,3018.5781,1901,3022.5781,1891,3026.5781,1895,3022.5781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1711" x2="1897" y1="3022.5781" y2="3022.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="85" x="1718" y="3017.645">StreamOn()</text><polygon fill="#FBFB77" filter="url(#f4s8gyjijw7wf)" points="1918,3035.7109,1918,3181.7109,2402,3181.7109,2402,3045.7109,2392,3035.7109,1918,3035.7109" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2392" x2="2392" y1="3035.7109" y2="3045.7109"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2402" x2="2392" y1="3045.7109" y2="3045.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="37" x="1924" y="3052.7778">1. run</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="210" x="1965" y="3052.7778">CallNodeAcquireResources()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="212" x="2175" y="3052.7778">, every node will acquire resource</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="228" x="1924" y="3067.9106">2. if Enable the External Sensor and</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="91" x="2156" y="3067.9106">IsRealTime()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="373" x="1936" y="3083.0435">will run m_pExternalSensor-&gt;Initialize() and -&gt;StreamOn()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="456" x="1924" y="3098.1763">3. run m_pChiContext-&gt;GetHwContext()-&gt;StreamOn(GetCSLSession(),</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="87" x="2112" y="3113.3091">GetCSLLink(),</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="2112" y="3128.4419">GetCSLDevices());</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="1932" y="3143.5747">This will run</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="112" x="2008" y="3143.5747">CSLStreamOn()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="150" x="1924" y="3158.7075">4. Set PipelineStatus to</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="88" x="2078" y="3158.7075">STREAM_ON</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="114" x="1924" y="3173.8403">5. Call every node</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="144" x="2042" y="3173.8403">OnNodeStreamOn()</text><polygon fill="#A80036" points="1722,3207.9063,1712,3211.9063,1722,3215.9063,1718,3211.9063" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1716" x2="1907" y1="3211.9063" y2="3211.9063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="1728" y="3206.9731">return</text><polygon fill="#A80036" points="1461,3244.0391,1451,3248.0391,1461,3252.0391,1457,3248.0391" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1455" x2="1705" y1="3248.0391" y2="3248.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="1467" y="3243.106">return</text><polygon fill="#A80036" points="1689,3273.1719,1699,3277.1719,1689,3281.1719,1693,3277.1719" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1450" x2="1695" y1="3277.1719" y2="3277.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="190" x="1457" y="3272.2388">ProcessCaptureRequest()</text><rect fill="none" height="116.7969" style="stroke: #000000; stroke-width: 2.0;" width="486" x="1706" y="3292.3047"/><polygon fill="#EEEEEE" points="1706,3292.3047,1770,3292.3047,1770,3299.3047,1760,3309.3047,1706,3309.3047,1706,3292.3047" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="1721" y="3305.3716">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5" x="1785" y="3304.5151">[</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="180" x="1790" y="3304.5151">m_isRecoveryMode == TRUE</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5" x="1970" y="3304.5151">]</text><polygon fill="#FBFB77" filter="url(#f4s8gyjijw7wf)" points="1716,3314.4375,1716,3399.4375,2178,3399.4375,2178,3324.4375,2168,3314.4375,1716,3314.4375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2168" x2="2168" y1="3314.4375" y2="3324.4375"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2178" x2="2168" y1="3324.4375" y2="3324.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="37" x="1722" y="3331.5044">1. the</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="141" x="1763" y="3331.5044">m_isRecoveryMode</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="70" x="1908" y="3331.5044">is setted in</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="174" x="1982" y="3331.5044">Session::HandleErrorCb</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="67" x="1734" y="3346.6372">when case</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="171" x="1805" y="3346.6372">MessageCodeRecovery</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="187" x="1976" y="3346.6372">, and this is finally come from</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="21" x="1734" y="3361.77">the</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="234" x="1759" y="3361.77">CSLErrorMessageCodeRecovery</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="1993" y="3361.77">, which indicate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="1734" y="3376.9028">that the KMD is recovery.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="1722" y="3392.0356">2. will return</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="155" x="1803" y="3392.0356">CamxResultETimeout</text><rect fill="none" height="131.9297" style="stroke: #000000; stroke-width: 2.0;" width="645" x="1706" y="3423.1016"/><polygon fill="#EEEEEE" points="1706,3423.1016,1770,3423.1016,1770,3430.1016,1760,3440.1016,1706,3440.1016,1706,3423.1016" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="1721" y="3436.1685">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5" x="1785" y="3435.312">[</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="151" x="1790" y="3435.312">m_livePendingRequests</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1945" y="3435.312">&gt;=</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="201" x="1967" y="3435.312">m_maxLivePendingRequests - 1</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5" x="2168" y="3435.312">]</text><polygon fill="#FBFB77" filter="url(#f4s8gyjijw7wf)" points="1716,3445.2344,1716,3545.2344,2337,3545.2344,2337,3455.2344,2327,3445.2344,1716,3445.2344" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2327" x2="2327" y1="3445.2344" y2="3455.2344"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2337" x2="2327" y1="3455.2344" y2="3455.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="1722" y="3462.3013">1.</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="151" x="1738" y="3462.3013">m_livePendingRequests</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="205" x="1893" y="3462.3013">means currently, we already run</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="1738" y="3477.4341">how many request.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1734" y="3492.5669"/><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="183" x="1734" y="3492.5669">m_maxLivePendingRequests</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="202" x="1921" y="3492.5669">means we can accept Max num</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="1734" y="3507.6997">request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="588" x="1734" y="3522.8325">if we got too many request, we have to wait (waitTime=LivePendingRequestTimeoutDefault).</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1734" y="3537.9653"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="385" x="1734" y="3537.9653">m_pWaitLivePendingRequests-&gt;TimeWait(waitTime)</text><rect fill="none" height="162.1953" style="stroke: #000000; stroke-width: 2.0;" width="598" x="1706" y="3569.0313"/><polygon fill="#EEEEEE" points="1706,3569.0313,1770,3569.0313,1770,3576.0313,1760,3586.0313,1706,3586.0313,1706,3569.0313" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="1721" y="3582.0981">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="134" x="1785" y="3581.2417">[loop requestIndex &lt;</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="86" x="1923" y="3581.2417">numRequests</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5" x="2009" y="3581.2417">]</text><polygon fill="#FBFB77" filter="url(#f4s8gyjijw7wf)" points="1716,3591.1641,1716,3722.1641,2290,3722.1641,2290,3601.1641,2280,3591.1641,1716,3591.1641" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2280" x2="2280" y1="3591.1641" y2="3601.1641"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2290" x2="2280" y1="3601.1641" y2="3601.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="37" x="1722" y="3608.231">1. run</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="162" x="1763" y="3608.231">CanRequestProceed()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="298" x="1925" y="3608.231">, if the callback report device err, can't process</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="123" x="1734" y="3623.3638">return result is FAIL</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="37" x="1722" y="3638.4966">2. run</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="165" x="1763" y="3638.4966">WaitOnAcquireFence()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="189" x="1928" y="3638.4966">, async wait max 5s, for fence</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="105" x="1734" y="3653.6294">if Fail return FAIL</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="23" x="1722" y="3668.7622">3. if</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="246" x="1749" y="3668.7622">hasBatchingModeChanged=TRUE</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="280" x="1995" y="3668.7622">, will Empty the RequestQueue got from hal.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="186" x="1722" y="3683.895">4. if every thing goes well, will</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="259" x="1912" y="3683.895">EnqueueWait(&amp;m_captureRequest)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="218" x="1734" y="3699.0278">and PostJob(m_hJobFamilyHandle)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="211" x="1722" y="3714.1606">. TODO: still some not clear here.</text><polygon fill="#A80036" points="1461,3755.2266,1451,3759.2266,1461,3763.2266,1457,3759.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1455" x2="1705" y1="3759.2266" y2="3759.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="1467" y="3754.2935">return</text><polygon fill="#A80036" points="1319,3791.3594,1309,3795.3594,1319,3799.3594,1315,3795.3594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1313" x2="1444" y1="3795.3594" y2="3795.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="1325" y="3790.4263">return</text><polygon fill="#A80036" points="507,3820.4922,497,3824.4922,507,3828.4922,503,3824.4922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="501" x2="1302" y1="3824.4922" y2="3824.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="513" y="3819.5591">return</text><polygon fill="#A80036" points="22,3856.625,12,3860.625,22,3864.625,18,3860.625" style="stroke: #A80036; stroke-width: 1.0;"/><ellipse cx="490.5" cy="3859.875" fill="none" rx="4" ry="4" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="16" x2="486" y1="3860.625" y2="3860.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="28" y="3855.6919">return</text><rect fill="#EEEEEE" filter="url(#f4s8gyjijw7wf)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="2443" x="3" y="3889.3242"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="2446" y1="3889.3242" y2="3889.3242"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="2446" y1="3892.3242" y2="3892.3242"/><rect fill="#EEEEEE" filter="url(#f4s8gyjijw7wf)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="263" x="1093" y="3878.7578"/><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="239" x="1104" y="3894.8247">how chi save request from app?</text><polygon fill="#FBFB77" filter="url(#f4s8gyjijw7wf)" points="1786,3916.8906,1786,3941.8906,2027,3941.8906,2027,3926.8906,2017,3916.8906,1786,3916.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2017" x2="2017" y1="3916.8906" y2="3926.8906"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2027" x2="2017" y1="3926.8906" y2="3926.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="220" x="1792" y="3933.9575">the Input Request save in a Queue</text><!--
@startuml


participant chxextensioninterface

participant chxextensionmodule

participant chxusecase

box "Usecase XXX"
participant chxusecasedefault
end box
participant camxhal3module.cpp
participant camxchi
participant camxchicontext
participant camxsession
participant camxpipeline
participant camxhal3queue

== <color:blue> Callback config </color>==
[o->camxchi: ChiEntry(\nChiContextOps* pChiContextOps)
note left camxchi
    will set:
        pChiContextOps->pOpenContext               = CamX::ChiOpenContext;
        pChiContextOps->pCloseContext              = CamX::ChiCloseContext;
        pChiContextOps->pGetNumCameras             = CamX::ChiGetNumCameras;
        pChiContextOps->pGetCameraInfo             = CamX::ChiGetCameraInfo;
        pChiContextOps->pEnumerateSensorModes      = CamX::ChiEnumerateSensorModes;
        pChiContextOps->pCreatePipelineDescriptor  = CamX::ChiCreatePipelineDescriptor;
        pChiContextOps->pDestroyPipelineDescriptor = CamX::ChiDestroyPipelineDescriptor;
        pChiContextOps->pCreateSession             = CamX::ChiCreateSession;
        pChiContextOps->pDestroySession            = CamX::ChiDestroySession;
        pChiContextOps->pFlushSession              = CamX::ChiFlushSession;
        pChiContextOps->pActivatePipeline          = CamX::ChiActivatePipeline;
        pChiContextOps->pDeactivatePipeline        = CamX::ChiDeactivatePipeline;
        pChiContextOps->**pSubmitPipelineRequest**     = **CamX::ChiSubmitPipelineRequest**;
        pChiContextOps->pQueryPipelineMetadataInfo = CamX::ChiQueryPipelineMetadataInfo;
        pChiContextOps->pTagOps                    = CamX::ChiGetTagOps;
        pChiContextOps->pGetFenceOps               = CamX::ChiGetFenceOps;
        pChiContextOps->pMetadataOps               = CamX::ChiGetMetadataOps;
        pChiContextOps->pGetBufferManagerOps       = CamX::ChiGetBufferManagerOps;

    when load this:
        PCHIENTRY funcPChiEntry = 
            reinterpret_cast<PCHIENTRY>(ChxUtils::LibGetAddr(handle, "ChiEntry"));
end note

... ...
== <color:blue>get request from **HAL** </color>==
[o->chxextensioninterface: **chi_override_process_request**(\nconst camera3_device_t*,\ncamera3_capture_request_t*,\nvoid*)
activate chxextensioninterface #Chartreuse
  chxextensioninterface->chxextensionmodule: **OverrideProcessRequest()**
  activate chxextensionmodule #Green
    alt **m_aFlushInProgress == TRUE**
      chxextensionmodule->chxextensionmodule: **HandleProcessRequestErrorAllPCRs()**
      activate chxextensionmodule #GreenYellow
      chxextensionmodule->chxextensionmodule: return
      deactivate chxextensionmodule
    end
    
    alt **IsLongExposureCapture()**
      note over chxextensioninterface
        set **m_aLongExposureInProgress = TRUE**
        set **m_longExposureFrame** = **pCaptureRequest->frame_number**
      end note
    end

    chxextensionmodule->chxusecase: **ProcessCaptureRequest**(\ncamera3_capture_request_t*)
    activate chxusecase #LawnGreen
      chxusecase->chxusecase: AssignChiOverrideFrameNum(\npRequest->**frame_number**);
      activate chxusecase
        note over chxusecase
          Assign a Chi Override FrameNum to the original APP frame number
          and replace the request frame_number
          **pRequest->frame_number** = **chiOverrideFrameNum**
          **chiOverrideFrameNum** increase from **0**
          and the **chiOverrideFrameNum** is keeped in **m_lastAppRequestFrame**
        end note
      chxusecase<-chxusecase: return
      deactivate chxusecase

      chxusecase->chxusecase: <color:red>**ExecuteCaptureRequest()**</color>
      activate chxusecase
        note over chxusecase
          will run **ReplaceRequestMetaData** save origin Meta
          and **RestoreRequestMetadata** restore, after **ExecuteCaptureRequest** done
        end note

        chxusecase->chxusecasedefault: **SubmitChiRequest()**
        activate chxusecasedefault
          alt **IsPipelineActive() == FALSE**
            alt **sessionIdx == m_realTimeIdx**
              chxusecasedefault->chxextensionmodule: **ActivatePipeline()**
              activate chxextensionmodule
                chxextensionmodule->camxchicontext: **ActivatePipeline()**
                activate camxchicontext
                  camxchicontext->camxsession: <color:red>**StreamOn()**</color>
                  activate camxsession
                    note over camxsession
                      The same as below, not paint twice
                    end note
                  camxsession->camxchicontext: return
                  deactivate camxsession
                chxextensionmodule<-camxchicontext: **return**
                deactivate camxchicontext
              chxusecasedefault<-chxextensionmodule: **return**
              deactivate chxextensionmodule
            end

            chxusecasedefault->chxextensionmodule: **SubmitRequest()**
            activate chxextensionmodule
              note over chxextenionmodule
                <color:red>**Finally, still go into SubmitRequest**</color>
              end note
            chxusecasedefault<-chxextensionmodule: return
            deactivate chxextensionmodule
          end
          note over chxusecasedefault
            **Will run <color:blue>ChxUtils::AndroidMetadata::FreeMetaData</color>**
          end note
        chxusecase<-chxusecasedefault: return
        deactivate chxusecasedefault

      chxusecase<-chxusecase: return
      deactivate chxusecase

    chxextensionmodule<-chxusecase: return
    deactivate chxusecase

  chxextensioninterface->chxextensionmodule: return
  deactivate chxextensionmodule
[o<-chxextensioninterface: return
deactivate chxextensioninterface
... ...
== <color:blue>submit pipeline request Flow </color>==
[o->chxextensionmodule: ExtensionModule::SubmitRequest
note over chxextensionmodule
  <color:red>TODO: </color>
  <color:blue>both online/offline, goes here</color>
  <color:blue>The HAL request, will also change into chi request. </color>
  <color:blue>Run submitRequest</color>
end note
activate chxextensionmodule
    alt **m_aFlushInProgress** == **FALSE**
        chxextensionmodule->camxchi: **ChiSubmitPipelineRequest**()
        activate camxchi
            camxchi->camxchicontext: **SubmitRequest**
            activate camxchicontext
                camxchicontext->camxsession: **UpdateMultiRequestSyncData()**
                activate camxsession
                    note over camxsession
                        <color:red>TODO: Still not clear why we need this</color>
                        1. run when m_numInputSensors > 2
                        2. if pRequest->numRequests >= 2
                           set isMultiRequest=TRUE, need 3A sync
                    end note
                camxsession->camxchicontext: return
                deactivate camxsession

                camxchicontext->camxsession: **CheckValidInputRequest()**
                activate camxsession
                    note over camxsession
                      Check the Buffer is null
                    end note
                camxsession->camxchicontext: return
                deactivate camxsession

                alt pSession->**IsPipelineRealTime()** ==FALSE
                    camxchicontext->camxsession: **StreamOn()**
                    activate camxsession
                        note over camxsession
                          <color:red>TODO:</color>
                          So this is the Offline Request. What about the realtime?
                          <color:blue>PipelineStatus:</color>
                            UNINITIALIZED
                            INITIALIZED
                            FINALIZED
                            RESOURCES_RELEASED
                            STREAM_OFF
                            RESOURCES_ACQUIRED
                            PARTIAL_STREAM_ON
                            STREAM_ON
                          <color:red>**VIP:**</color>
                          **for offline, will streamOn at submitRequest**
                          **but for online, will ActivatePipeline when <color:red>GenerateRealtimeRequest</color>**
                          **or USECASE::ExecuteCaptureRequest ? or online should always Active???**
                        end note
                        alt PipelineStatus::FINALIZED > pipelineStatus
                            camxsession->camxsession: **FinalizeDeferPipeline()**
                            activate camxsession
                              note over camxsession
                                1. **RegisterJobFamily**(**NodeThreadJobFamilySessionCb**)
                              end note
                              camxsession->camxpipeline: **FinalizeDeferPipeline()**
                              activate camxpipeline
                                note right camxpipeline
                                  1. for Every Node, run **FinalizeInitialization()**
                                  2. **DeterminBufferProperties()**
                                  3. for Every Node, run **CreateBufferManagers()**
                                  4. for Every Node, run NotifyPipelineCreated()
                                  5. set PipelineStates = **FINALIZED**
                                  6. Rigister CSL Callback   for **IsRealTime() == TRUE**
                                end note
                              camxpipeline->camxsession: return
                              deactivate camxpipeline
                            camxsession->camxsession: return
                            deactivate camxsession

                            camxsession->camxpipeline: **StreamOn()**
                            activate camxpipeline
                                note right camxpipeline
                                    1. run **CallNodeAcquireResources()**, every node will acquire resource
                                    2. if Enable the External Sensor and **IsRealTime()**
                                       will run m_pExternalSensor->Initialize() and ->StreamOn()
                                    3. run m_pChiContext->GetHwContext()->StreamOn(GetCSLSession(),
                                                                                   GetCSLLink(),
                                                                                   GetCSLDevices());
                                      This will run **CSLStreamOn()**
                                    4. Set PipelineStatus to **STREAM_ON**
                                    5. Call every node **OnNodeStreamOn()**
                                end note
                            camxpipeline->camxsession: return
                            deactivate camxpipeline
                        end
                    camxsession->camxchicontext: return
                    deactivate camxsession

                    camxchicontext->camxsession: **ProcessCaptureRequest()**
                    activate camxsession
                        alt **m_isRecoveryMode == TRUE**
                            note right camxsession
                                1. the **m_isRecoveryMode** is setted in **Session::HandleErrorCb**
                                   when case **MessageCodeRecovery**, and this is finally come from
                                   the <color:red>**CSLErrorMessageCodeRecovery**</color>, which indicate
                                   that the KMD is recovery.
                                2. will return **CamxResultETimeout**
                            end note
                        end

                        alt **m_livePendingRequests** >= **m_maxLivePendingRequests - 1**
                            note right camxsession
                                1. <color:red>m_livePendingRequests</color> means currently, we already run
                                    how many request.
                                   <color:red>m_maxLivePendingRequests</color> means we can accept Max num
                                   request
                                   if we got too many request, we have to wait (waitTime=LivePendingRequestTimeoutDefault).
                                   **m_pWaitLivePendingRequests->TimeWait(waitTime)**
                            end note
                        end

                        alt loop requestIndex < **numRequests**
                            note right camxsession
                                1. run **CanRequestProceed()**, if the callback report device err, can't process
                                   return result is FAIL
                                2. run **WaitOnAcquireFence()**, async wait max 5s, for fence
                                   if Fail return FAIL
                                3. if **hasBatchingModeChanged=TRUE**, will Empty the RequestQueue got from hal.
                                4. if every thing goes well, will **EnqueueWait(&m_captureRequest)**
                                   and PostJob(m_hJobFamilyHandle)
                                . TODO: still some not clear here.
                            end note
                        end 


                    camxsession->camxchicontext: return
                    deactivate camxsession


                end
            camxchicontext->camxchi: return
            deactivate camxchicontext
        camxchi->chxextensionmodule: return
        deactivate camxchi
    end
[o<-chxextensionmodule: return
deactivate chxextensionmodule



== <color:blue> how chi save request from app? </color>==
note left camxhal3queue
    the Input Request save in a Queue
end note

@enduml

PlantUML version 1.2017.20(Mon Dec 11 16:57:05 GMT 2017)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_171-8u171-b11-0ubuntu0.16.04.1-b11
Operating System: Linux
OS Version: 4.4.0-43-Microsoft
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>