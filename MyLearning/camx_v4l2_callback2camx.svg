<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="6790px" preserveAspectRatio="none" style="width:2395px;height:6790px;" version="1.1" viewBox="0 0 2395 6790" width="2395px" zoomAndPan="magnify"><defs><filter height="300%" id="f77pkjja7yg0e" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="294" x="1043.5" y="22.9951">How camx pipeline get data callback?</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="1172.5" y="39.292">Jin Lin</text><rect fill="#ADD8E6" height="6728.6094" style="stroke: #A80036; stroke-width: 1.0;" width="135" x="2147" y="50.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="116" x="2156.5" y="62.6606">ThreadManager</text><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="791.5" y="208.2891"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="791.5" y="2699.8359"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="83.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="791.5" y="2811.3672"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="68.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="791.5" y="3113.6953"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="186.7969" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1074.5" y="1727.0703"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="113.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1079.5" y="1764.2031"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="2549.0156" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1074.5" y="1967.1328"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="113.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1385.5" y="931.1406"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="547.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1385.5" y="1115.8047"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="345.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1390.5" y="1280.6016"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="151.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1395.5" y="1432.2031"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="322.4609" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1385.5" y="2096.6484"/><rect fill="#FF0000" filter="url(#f77pkjja7yg0e)" height="1930.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1385.5" y="2585.9063"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="109.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1390.5" y="2968.0313"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="1308.9766" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1385.5" y="5156.5234"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="99.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1390.5" y="5874.5781"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="60.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1385.5" y="6578.5703"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="58.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1595.5" y="179.1563"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="803.0625" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1595.5" y="859.875"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="141.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1595.5" y="2782.2344"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="1221.6563" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1595.5" y="3211.0938"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="40.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1600.5" y="3326.625"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="40.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1600.5" y="3442.0234"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="68.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1595.5" y="5404.7188"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="157.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1595.5" y="5845.4453"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="847.1953" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1861.5" y="3549.4219"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="590" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1866.5" y="3586.5547"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="463.9922" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1871.5" y="3663.4297"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="379.7266" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1876.5" y="3705.5625"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="40.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1881.5" y="3747.6953"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1881.5" y="3823.9609"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="98.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1881.5" y="3897.2266"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="139.7969" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1866.5" y="4220.6875"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="141.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1861.5" y="4762.6094"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="1250.7109" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1861.5" y="5185.6563"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="1177.4453" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1866.5" y="5222.7891"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="79.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1871.5" y="5510.1172"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="40.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1871.5" y="5633.5156"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="296.3281" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1871.5" y="5741.9141"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="40.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1871.5" y="6113.5078"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="83.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2209.5" y="4791.7422"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="4105.6641" style="stroke: #000000; stroke-width: 2.0;" width="2285" x="13" y="585.8125"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="455.6016" style="stroke: #000000; stroke-width: 2.0;" width="519" x="1005.5" y="1200.3359"/><rect fill="#FFFFFF" height="252.7344" style="stroke: none; stroke-width: 1.0;" width="519" x="1005.5" y="1388.3984"/><rect fill="#FFFFFF" height="14.8047" style="stroke: none; stroke-width: 1.0;" width="519" x="1005.5" y="1641.1328"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="2595.2813" style="stroke: #000000; stroke-width: 2.0;" width="1711" x="577" y="1929"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="545.6406" style="stroke: #000000; stroke-width: 2.0;" width="974.5" x="643" y="1982.2656"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="174.6641" style="stroke: #000000; stroke-width: 2.0;" width="291" x="1316.5" y="2111.9141"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="59.2656" style="stroke: #000000; stroke-width: 2.0;" width="271" x="1326.5" y="2136.0469"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="187.9297" style="stroke: #000000; stroke-width: 2.0;" width="1016.5" x="648" y="2744.1016"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="101.3984" style="stroke: #000000; stroke-width: 2.0;" width="335" x="1536.5" y="3280.4922"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="101.3984" style="stroke: #000000; stroke-width: 2.0;" width="330" x="1536.5" y="3395.8906"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="893.4609" style="stroke: #000000; stroke-width: 2.0;" width="1564.5" x="587" y="3511.2891"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="535.8672" style="stroke: #000000; stroke-width: 2.0;" width="1544.5" x="597" y="3606.6875"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="1038.7813" style="stroke: #000000; stroke-width: 2.0;" width="1022.5" x="1207" y="5327.4531"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="357.5938" style="stroke: #000000; stroke-width: 2.0;" width="866.5" x="1217" y="5695.7813"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="56.2656" style="stroke: #000000; stroke-width: 2.0;" width="326" x="1227" y="5889.7109"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="101.3984" style="stroke: #000000; stroke-width: 2.0;" width="408" x="1811.5" y="6067.375"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="17.1328" style="stroke: #000000; stroke-width: 2.0;" width="511" x="454" y="6593.7031"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="475" x2="475" y1="105.0234" y2="4912.4063"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="475" x2="475" y1="4912.4063" y2="4953.2109"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="475" x2="475" y1="4953.2109" y2="6473.6328"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="475" x2="475" y1="6473.6328" y2="6514.4375"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="475" x2="475" y1="6514.4375" y2="6646.9688"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="475" x2="475" y1="6646.9688" y2="6687.7734"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="475" x2="475" y1="6687.7734" y2="6740.9063"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="562" x2="562" y1="105.0234" y2="4912.4063"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="562" x2="562" y1="4912.4063" y2="4953.2109"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="562" x2="562" y1="4953.2109" y2="6473.6328"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="562" x2="562" y1="6473.6328" y2="6514.4375"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="562" x2="562" y1="6514.4375" y2="6646.9688"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="562" x2="562" y1="6646.9688" y2="6687.7734"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="562" x2="562" y1="6687.7734" y2="6740.9063"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="796" x2="796" y1="105.0234" y2="4912.4063"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="796" x2="796" y1="4912.4063" y2="4953.2109"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="796" x2="796" y1="4953.2109" y2="6473.6328"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="796" x2="796" y1="6473.6328" y2="6514.4375"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="796" x2="796" y1="6514.4375" y2="6646.9688"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="796" x2="796" y1="6646.9688" y2="6687.7734"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="796" x2="796" y1="6687.7734" y2="6740.9063"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1079.5" x2="1079.5" y1="105.0234" y2="4912.4063"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1079.5" x2="1079.5" y1="4912.4063" y2="4953.2109"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1079.5" x2="1079.5" y1="4953.2109" y2="6473.6328"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1079.5" x2="1079.5" y1="6473.6328" y2="6514.4375"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1079.5" x2="1079.5" y1="6514.4375" y2="6646.9688"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1079.5" x2="1079.5" y1="6646.9688" y2="6687.7734"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1079.5" x2="1079.5" y1="6687.7734" y2="6740.9063"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1390.5" x2="1390.5" y1="105.0234" y2="4912.4063"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1390.5" x2="1390.5" y1="4912.4063" y2="4953.2109"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1390.5" x2="1390.5" y1="4953.2109" y2="6473.6328"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1390.5" x2="1390.5" y1="6473.6328" y2="6514.4375"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1390.5" x2="1390.5" y1="6514.4375" y2="6646.9688"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1390.5" x2="1390.5" y1="6646.9688" y2="6687.7734"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1390.5" x2="1390.5" y1="6687.7734" y2="6740.9063"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1600.5" x2="1600.5" y1="105.0234" y2="4912.4063"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1600.5" x2="1600.5" y1="4912.4063" y2="4953.2109"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1600.5" x2="1600.5" y1="4953.2109" y2="6473.6328"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1600.5" x2="1600.5" y1="6473.6328" y2="6514.4375"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1600.5" x2="1600.5" y1="6514.4375" y2="6646.9688"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1600.5" x2="1600.5" y1="6646.9688" y2="6687.7734"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1600.5" x2="1600.5" y1="6687.7734" y2="6740.9063"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1866.5" x2="1866.5" y1="105.0234" y2="4912.4063"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1866.5" x2="1866.5" y1="4912.4063" y2="4953.2109"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1866.5" x2="1866.5" y1="4953.2109" y2="6473.6328"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1866.5" x2="1866.5" y1="6473.6328" y2="6514.4375"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1866.5" x2="1866.5" y1="6514.4375" y2="6646.9688"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1866.5" x2="1866.5" y1="6646.9688" y2="6687.7734"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1866.5" x2="1866.5" y1="6687.7734" y2="6740.9063"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2214" x2="2214" y1="105.0234" y2="4912.4063"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="2214" x2="2214" y1="4912.4063" y2="4953.2109"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2214" x2="2214" y1="4953.2109" y2="6473.6328"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="2214" x2="2214" y1="6473.6328" y2="6514.4375"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2214" x2="2214" y1="6514.4375" y2="6646.9688"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="2214" x2="2214" y1="6646.9688" y2="6687.7734"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2214" x2="2214" y1="6687.7734" y2="6740.9063"/><rect fill="#FEFECE" filter="url(#f77pkjja7yg0e)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="58" x="444" y="69.7266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="44" x="451" y="89.7217">Kernel</text><rect fill="#FEFECE" filter="url(#f77pkjja7yg0e)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="58" x="444" y="6739.9063"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="44" x="451" y="6759.9014">Kernel</text><rect fill="#FEFECE" filter="url(#f77pkjja7yg0e)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="89" x="516" y="69.7266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="523" y="89.7217">camxcslhw</text><rect fill="#FEFECE" filter="url(#f77pkjja7yg0e)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="89" x="516" y="6739.9063"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="523" y="6759.9014">camxcslhw</text><rect fill="#FEFECE" filter="url(#f77pkjja7yg0e)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="69" x="760" y="69.7266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="55" x="767" y="89.7217">camxcsl</text><rect fill="#FEFECE" filter="url(#f77pkjja7yg0e)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="69" x="760" y="6739.9063"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="55" x="767" y="6759.9014">camxcsl</text><rect fill="#FEFECE" filter="url(#f77pkjja7yg0e)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="124" x="1015.5" y="69.7266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="110" x="1022.5" y="89.7217">camxchisession</text><rect fill="#FEFECE" filter="url(#f77pkjja7yg0e)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="124" x="1015.5" y="6739.9063"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="110" x="1022.5" y="6759.9014">camxchisession</text><rect fill="#FEFECE" filter="url(#f77pkjja7yg0e)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="104" x="1336.5" y="69.7266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1343.5" y="89.7217">camxsession</text><rect fill="#FEFECE" filter="url(#f77pkjja7yg0e)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="104" x="1336.5" y="6739.9063"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1343.5" y="6759.9014">camxsession</text><rect fill="#FEFECE" filter="url(#f77pkjja7yg0e)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="104" x="1546.5" y="69.7266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1553.5" y="89.7217">camxpipeline</text><rect fill="#FEFECE" filter="url(#f77pkjja7yg0e)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="104" x="1546.5" y="6739.9063"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="90" x="1553.5" y="6759.9014">camxpipeline</text><rect fill="#FEFECE" filter="url(#f77pkjja7yg0e)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="86" x="1821.5" y="69.7266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="1828.5" y="89.7217">camxnode</text><rect fill="#FEFECE" filter="url(#f77pkjja7yg0e)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="86" x="1821.5" y="6739.9063"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="1828.5" y="6759.9014">camxnode</text><rect fill="#FEFECE" filter="url(#f77pkjja7yg0e)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="123" x="2151" y="69.7266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="109" x="2158" y="89.7217">ThreadManager</text><rect fill="#FEFECE" filter="url(#f77pkjja7yg0e)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="123" x="2151" y="6739.9063"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="109" x="2158" y="6759.9014">ThreadManager</text><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="791.5" y="208.2891"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="791.5" y="2699.8359"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="83.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="791.5" y="2811.3672"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="68.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="791.5" y="3113.6953"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="186.7969" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1074.5" y="1727.0703"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="113.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1079.5" y="1764.2031"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="2549.0156" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1074.5" y="1967.1328"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="113.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1385.5" y="931.1406"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="547.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1385.5" y="1115.8047"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="345.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1390.5" y="1280.6016"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="151.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1395.5" y="1432.2031"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="322.4609" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1385.5" y="2096.6484"/><rect fill="#FF0000" filter="url(#f77pkjja7yg0e)" height="1930.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1385.5" y="2585.9063"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="109.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1390.5" y="2968.0313"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="1308.9766" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1385.5" y="5156.5234"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="99.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1390.5" y="5874.5781"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="60.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1385.5" y="6578.5703"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="58.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1595.5" y="179.1563"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="803.0625" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1595.5" y="859.875"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="141.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1595.5" y="2782.2344"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="1221.6563" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1595.5" y="3211.0938"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="40.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1600.5" y="3326.625"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="40.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1600.5" y="3442.0234"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="68.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1595.5" y="5404.7188"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="157.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1595.5" y="5845.4453"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="847.1953" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1861.5" y="3549.4219"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="590" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1866.5" y="3586.5547"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="463.9922" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1871.5" y="3663.4297"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="379.7266" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1876.5" y="3705.5625"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="40.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1881.5" y="3747.6953"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1881.5" y="3823.9609"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="98.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1881.5" y="3897.2266"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="139.7969" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1866.5" y="4220.6875"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="141.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1861.5" y="4762.6094"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="1250.7109" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1861.5" y="5185.6563"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="1177.4453" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1866.5" y="5222.7891"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="79.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1871.5" y="5510.1172"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="40.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1871.5" y="5633.5156"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="296.3281" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1871.5" y="5741.9141"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="40.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1871.5" y="6113.5078"/><rect fill="#FFFFFF" filter="url(#f77pkjja7yg0e)" height="83.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2209.5" y="4791.7422"/><rect fill="#EEEEEE" filter="url(#f77pkjja7yg0e)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="2380" x="3" y="135.5898"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="2383" y1="135.5898" y2="135.5898"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="2383" y1="138.5898" y2="138.5898"/><rect fill="#EEEEEE" filter="url(#f77pkjja7yg0e)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="162" x="1112" y="125.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="143" x="1118" y="141.0903">1. callback register</text><polygon fill="#A80036" points="1583.5,175.1563,1593.5,179.1563,1583.5,183.1563,1587.5,179.1563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1390.5" x2="1589.5" y1="179.1563" y2="179.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="1397.5" y="174.2231">FinalizePipeline</text><polygon fill="#A80036" points="812.5,204.2891,802.5,208.2891,812.5,212.2891,808.5,208.2891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="806.5" x2="1594.5" y1="208.2891" y2="208.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="348" x="818.5" y="203.356">CSLRegisterMessagehandler(...CSLMessageHandler...)</text><polygon fill="#A80036" points="573.5,233.4219,563.5,237.4219,573.5,241.4219,569.5,237.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="567.5" x2="795.5" y1="237.4219" y2="237.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="205" x="579.5" y="232.4888">CSLRegisterMessageHandlerHW</text><polygon fill="#FBFB77" filter="url(#f77pkjja7yg0e)" points="447,250.5547,447,275.5547,908,275.5547,908,260.5547,898,250.5547,447,250.5547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="898" x2="898" y1="250.5547" y2="260.5547"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="908" x2="898" y1="260.5547" y2="260.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="440" x="453" y="267.6216">now the CSL messageHandler is registered with CSLMessageHandler</text><polygon fill="#FBFB77" filter="url(#f77pkjja7yg0e)" points="509,289.6875,509,525.6875,846,525.6875,846,299.6875,836,289.6875,509,289.6875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="836" x2="836" y1="289.6875" y2="299.6875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="846" x2="836" y1="299.6875" y2="299.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="515" y="306.7544">About the CSLJumpTable:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="237" x="523" y="321.8872">CSLJumpTable g_CSLjumpTableHW =</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="523" y="337.02">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="539" y="352.1528">CSLInitializeHW,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="539" y="367.2856">CSLOpenHW,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="539" y="382.4185">CSLCloseHW,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="539" y="397.5513">...</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="523" y="412.6841">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="515" y="427.8169">correspond to struct:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="523" y="442.9497">struct CSLJumpTable</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="523" y="458.0825">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="213" x="539" y="473.2153">CamxResult (*CSLInitialize)(void);</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="292" x="539" y="488.3481">CamxResult (*CSLOpen)(CSLHandle* phCSL);</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="285" x="539" y="503.481">CamxResult (*CSLClose)(CSLHandle* hCSL);</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="523" y="518.6138">}</text><rect fill="#EEEEEE" filter="url(#f77pkjja7yg0e)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="2380" x="3" y="556.2461"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="2383" y1="556.2461" y2="556.2461"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="2383" y1="559.2461" y2="559.2461"/><rect fill="#EEEEEE" filter="url(#f77pkjja7yg0e)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="132" x="1127" y="545.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="113" x="1133" y="561.7466">2. how it works</text><rect fill="none" height="4105.6641" style="stroke: #000000; stroke-width: 2.0;" width="2285" x="13" y="585.8125"/><polygon fill="#EEEEEE" points="13,585.8125,90,585.8125,90,592.8125,80,602.8125,13,602.8125,13,585.8125" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="28" y="598.8794">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="51" x="105" y="598.0229">[N time]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="796.5" x2="838.5" y1="624.0781" y2="624.0781"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="838.5" x2="838.5" y1="624.0781" y2="637.0781"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="797.5" x2="838.5" y1="637.0781" y2="637.0781"/><polygon fill="#A80036" points="807.5,633.0781,797.5,637.0781,807.5,641.0781,803.5,637.0781" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="194" x="803.5" y="619.0122">CSLHwInstancePollThreadFunc</text><polygon fill="#FBFB77" filter="url(#f77pkjja7yg0e)" points="709,650.0781,709,675.0781,880,675.0781,880,660.0781,870,650.0781,709,650.0781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="870" x2="870" y1="650.0781" y2="660.0781"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="880" x2="870" y1="660.0781" y2="660.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="150" x="715" y="667.145">a thread created to Poll</text><polygon fill="#A80036" points="486,701.2109,476,705.2109,486,709.2109,482,705.2109" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="480" x2="795.5" y1="705.2109" y2="705.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="173" x="492" y="700.2778">ioctl(...VIDIOC_DQEVENT...)</text><polygon fill="#A80036" points="784.5,730.3438,794.5,734.3438,784.5,738.3438,788.5,734.3438" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="475" x2="790.5" y1="734.3438" y2="734.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="482" y="729.4106">pV4L2_event</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="796.5" x2="838.5" y1="763.6094" y2="763.6094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="838.5" x2="838.5" y1="763.6094" y2="776.6094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="797.5" x2="838.5" y1="776.6094" y2="776.6094"/><polygon fill="#A80036" points="807.5,772.6094,797.5,776.6094,807.5,780.6094,803.5,776.6094" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="269" x="803.5" y="758.5435">CSLHwInternalSendRequestManagerEvent</text><polygon fill="#FBFB77" filter="url(#f77pkjja7yg0e)" points="630,789.6094,630,829.6094,959,829.6094,959,799.6094,949,789.6094,630,789.6094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="949" x2="949" y1="789.6094" y2="799.6094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="959" x2="949" y1="799.6094" y2="799.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="308" x="636" y="806.6763">event id is V4L_EVENT_CAM_REQ_MGR_SOF and</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="227" x="636" y="821.8091">V4L_EVENT_CAM_REQ_MGR_ERROR</text><polygon fill="#A80036" points="1583.5,855.875,1593.5,859.875,1583.5,863.875,1587.5,859.875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="796.5" x2="1589.5" y1="859.875" y2="859.875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="299" x="803.5" y="854.9419">messageHandler [that is CSLMessageHandler]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1605.5" x2="1647.5" y1="889.1406" y2="889.1406"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1647.5" x2="1647.5" y1="889.1406" y2="902.1406"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1606.5" x2="1647.5" y1="902.1406" y2="902.1406"/><polygon fill="#A80036" points="1616.5,898.1406,1606.5,902.1406,1616.5,906.1406,1612.5,902.1406" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="1612.5" y="884.0747">SendSOFnotification</text><polygon fill="#A80036" points="1406.5,927.1406,1396.5,931.1406,1406.5,935.1406,1402.5,931.1406" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1400.5" x2="1594.5" y1="931.1406" y2="931.1406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="1412.5" y="926.2075">m_pSession-&gt;NotifyResult</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1395.5" x2="1437.5" y1="960.4063" y2="960.4063"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1437.5" x2="1437.5" y1="960.4063" y2="973.4063"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1396.5" x2="1437.5" y1="973.4063" y2="973.4063"/><polygon fill="#A80036" points="1406.5,969.4063,1396.5,973.4063,1406.5,977.4063,1402.5,973.4063" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="1402.5" y="955.3403">HandleBufferCb</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1395.5" x2="1437.5" y1="1002.5391" y2="1002.5391"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1437.5" x2="1437.5" y1="1002.5391" y2="1015.5391"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1396.5" x2="1437.5" y1="1015.5391" y2="1015.5391"/><polygon fill="#A80036" points="1406.5,1011.5391,1396.5,1015.5391,1406.5,1019.5391,1402.5,1015.5391" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="73" x="1402.5" y="997.4731">InjectResult</text><polygon fill="#A80036" points="1583.5,1040.5391,1593.5,1044.5391,1583.5,1048.5391,1587.5,1044.5391" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1390.5" x2="1589.5" y1="1044.5391" y2="1044.5391"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="1397.5" y="1039.606">return</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1605.5" x2="1647.5" y1="1073.8047" y2="1073.8047"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1647.5" x2="1647.5" y1="1073.8047" y2="1086.8047"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1606.5" x2="1647.5" y1="1086.8047" y2="1086.8047"/><polygon fill="#A80036" points="1616.5,1082.8047,1606.5,1086.8047,1616.5,1090.8047,1612.5,1086.8047" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="153" x="1612.5" y="1068.7388">SendShutterNotification</text><polygon fill="#A80036" points="1406.5,1111.8047,1396.5,1115.8047,1406.5,1119.8047,1402.5,1115.8047" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1400.5" x2="1594.5" y1="1115.8047" y2="1115.8047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="1412.5" y="1110.8716">m_pSession-&gt;NotifyResult</text><polygon fill="#FBFB77" filter="url(#f77pkjja7yg0e)" points="1166,1128.9375,1166,1183.9375,1611,1183.9375,1611,1138.9375,1601,1128.9375,1166,1128.9375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1601" x2="1601" y1="1128.9375" y2="1138.9375"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1611" x2="1601" y1="1138.9375" y2="1138.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="407" x="1172" y="1146.0044">will call m_pthreadManager-&gt;PostJob, send buffer ok or sof msg</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="289" x="1172" y="1161.1372">finally , will call CHISession::ThreadJobExecute</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="408" x="1188" y="1176.27">-&gt;camxsession.cpp    Session::ProcessRequest   [need confirm]</text><rect fill="none" height="455.6016" style="stroke: #000000; stroke-width: 2.0;" width="519" x="1005.5" y="1200.3359"/><polygon fill="#EEEEEE" points="1005.5,1200.3359,1069.5,1200.3359,1069.5,1207.3359,1059.5,1217.3359,1005.5,1217.3359,1005.5,1200.3359" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="1020.5" y="1213.4028">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="126" x="1084.5" y="1212.5464">[case CbType::SOF]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1395.5" x2="1437.5" y1="1238.6016" y2="1238.6016"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1437.5" x2="1437.5" y1="1238.6016" y2="1251.6016"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1396.5" x2="1437.5" y1="1251.6016" y2="1251.6016"/><polygon fill="#A80036" points="1406.5,1247.6016,1396.5,1251.6016,1406.5,1255.6016,1402.5,1251.6016" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="1402.5" y="1233.5356">HandleSOFCb</text><polygon fill="#A80036" points="1090.5,1276.6016,1080.5,1280.6016,1090.5,1284.6016,1086.5,1280.6016" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1084.5" x2="1389.5" y1="1280.6016" y2="1280.6016"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="109" x="1096.5" y="1275.6685">DispatchNotify</text><polygon fill="#FBFB77" filter="url(#f77pkjja7yg0e)" points="1084,1293.7344,1084,1378.7344,1389,1378.7344,1389,1303.7344,1379,1293.7344,1084,1293.7344" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1379" x2="1379" y1="1293.7344" y2="1303.7344"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1389" x2="1379" y1="1303.7344" y2="1303.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="1090" y="1310.8013">will call</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="185" x="1137" y="1310.8013">m_chiCallbacks.ChiNotify</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="284" x="1090" y="1325.9341">Normally, It's initialized in chxusecasedefault</text><text fill="#008000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="279" x="1090" y="1341.0669">.ChiNotify = SessionCbNotifyMessage</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="282" x="1090" y="1356.1997">But it also can override in other usecase like</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="107" x="1090" y="1371.3325">chxusecasemc</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1005.5" x2="1524.5" y1="1389.3984" y2="1389.3984"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="140" x="1010.5" y="1399.6089">[case CbType::Buffer]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1400.5" x2="1447.5" y1="1419.3359" y2="1419.3359"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1447.5" x2="1447.5" y1="1419.3359" y2="1432.3359"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1406.5" x2="1447.5" y1="1432.3359" y2="1432.3359"/><polygon fill="#A80036" points="1416.5,1428.3359,1406.5,1432.3359,1416.5,1436.3359,1412.5,1432.3359" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="1412.5" y="1414.27">HandleBufferCb</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1405.5" x2="1447.5" y1="1466.4688" y2="1466.4688"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1447.5" x2="1447.5" y1="1466.4688" y2="1479.4688"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1406.5" x2="1447.5" y1="1479.4688" y2="1479.4688"/><polygon fill="#A80036" points="1416.5,1475.4688,1406.5,1479.4688,1416.5,1483.4688,1412.5,1479.4688" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="86" x="1412.5" y="1461.4028">InjectResult</text><polygon fill="#FBFB77" filter="url(#f77pkjja7yg0e)" points="1067,1492.4688,1067,1547.4688,1376,1547.4688,1376,1502.4688,1366,1492.4688,1067,1492.4688" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1366" x2="1366" y1="1492.4688" y2="1502.4688"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1376" x2="1366" y1="1502.4688" y2="1502.4688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="1073" y="1509.5356">will run</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="219" x="1120" y="1509.5356">m_pThreadManager-&gt;PostJob</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="273" x="1073" y="1524.6685">as we have a result needs to be processed</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="1073" y="1539.8013">and this actually Called</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="137" x="1224" y="1539.8013">ThreadJobCallback</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1405.5" x2="1447.5" y1="1583" y2="1583"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1447.5" x2="1447.5" y1="1583" y2="1596"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1400.5" x2="1447.5" y1="1596" y2="1596"/><polygon fill="#A80036" points="1410.5,1592,1400.5,1596,1410.5,1600,1406.5,1596" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="1412.5" y="1577.9341">return</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1400.5" x2="1442.5" y1="1625.1328" y2="1625.1328"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1442.5" x2="1442.5" y1="1625.1328" y2="1638.1328"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1395.5" x2="1442.5" y1="1638.1328" y2="1638.1328"/><polygon fill="#A80036" points="1405.5,1634.1328,1395.5,1638.1328,1405.5,1642.1328,1401.5,1638.1328" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="1407.5" y="1620.0669">return</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1005.5" x2="1524.5" y1="1642.1328" y2="1642.1328"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="161" x="1010.5" y="1652.3433">[case CbType::Metadata]</text><rect fill="#EEEEEE" filter="url(#f77pkjja7yg0e)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="2380" x="3" y="1683.5039"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="2383" y1="1683.5039" y2="1683.5039"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="2383" y1="1686.5039" y2="1686.5039"/><rect fill="#EEEEEE" filter="url(#f77pkjja7yg0e)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="431" x="977.5" y="1672.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="412" x="983.5" y="1689.0044">How CHISession manager the result callback? 1. Create</text><polygon fill="#A80036" points="1062.5,1723.0703,1072.5,1727.0703,1062.5,1731.0703,1066.5,1727.0703" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="3" x2="1068.5" y1="1727.0703" y2="1727.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="123" x="10" y="1722.1372">CHISession::Create</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1084.5" x2="1131.5" y1="1751.3359" y2="1751.3359"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1131.5" x2="1131.5" y1="1751.3359" y2="1764.3359"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1090.5" x2="1131.5" y1="1764.3359" y2="1764.3359"/><polygon fill="#A80036" points="1100.5,1760.3359,1090.5,1764.3359,1100.5,1768.3359,1096.5,1764.3359" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="131" x="1096.5" y="1746.27">CHISession::Initialize</text><polygon fill="#A80036" points="1378.5,1794.3359,1388.5,1798.3359,1378.5,1802.3359,1382.5,1798.3359" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1089.5" x2="1384.5" y1="1798.3359" y2="1798.3359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="1096.5" y="1793.4028">Session::Initialize</text><polygon fill="#A80036" points="2202.5,1838.4688,2212.5,1842.4688,2202.5,1846.4688,2206.5,1842.4688" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1089.5" x2="2208.5" y1="1842.4688" y2="1842.4688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="1096.5" y="1822.5356">m_pThreadManager-&gt;RegisterJobFamily</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="1096.5" y="1837.6685">(ThreadJobCallback)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1089.5" x2="1131.5" y1="1876.8672" y2="1876.8672"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1131.5" x2="1131.5" y1="1876.8672" y2="1889.8672"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1084.5" x2="1131.5" y1="1889.8672" y2="1889.8672"/><polygon fill="#A80036" points="1094.5,1885.8672,1084.5,1889.8672,1094.5,1893.8672,1090.5,1889.8672" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="1096.5" y="1871.8013">return</text><polygon fill="#A80036" points="14,1909.8672,4,1913.8672,14,1917.8672,10,1913.8672" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="8" x2="1078.5" y1="1913.8672" y2="1913.8672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="20" y="1908.9341">return</text><rect fill="none" height="2595.2813" style="stroke: #000000; stroke-width: 2.0;" width="1711" x="577" y="1929"/><polygon fill="#EEEEEE" points="577,1929,654,1929,654,1936,644,1946,577,1946,577,1929" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="592" y="1942.0669">loop</text><polygon fill="#A80036" points="1095.5,1963.1328,1085.5,1967.1328,1095.5,1971.1328,1091.5,1967.1328" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1089.5" x2="2213.5" y1="1967.1328" y2="1967.1328"/><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="137" x="1101.5" y="1962.1997">ThreadJobCallback</text><rect fill="none" height="545.6406" style="stroke: #000000; stroke-width: 2.0;" width="974.5" x="643" y="1982.2656"/><polygon fill="#EEEEEE" points="643,1982.2656,707,1982.2656,707,1989.2656,697,1999.2656,643,1999.2656,643,1982.2656" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="658" y="1995.3325">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="172" x="722" y="1994.4761">[m_aCheckResults==TRUE]</text><polygon fill="#FBFB77" filter="url(#f77pkjja7yg0e)" points="653,2004.3984,653,2051.3984,1065,2051.3984,1065,2014.3984,1055,2004.3984,653,2004.3984" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1055" x2="1055" y1="2004.3984" y2="2014.3984"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1065" x2="1055" y1="2014.3984" y2="2014.3984"/><text fill="#0000FF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="257" x="659" y="2024.25">We only handle results when</text><text fill="#0000FF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="391" x="659" y="2042.875">InjectResult set the Flag, otherwise not run</text><polygon fill="#A80036" points="1373.5,2092.6484,1383.5,2096.6484,1373.5,2100.6484,1377.5,2096.6484" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1084.5" x2="1379.5" y1="2096.6484" y2="2096.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="112" x="1091.5" y="2076.7153">ProcessResults</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="50" x="1095.5" y="2091.8481">and Set</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="129" x="1149.5" y="2091.8481">m_aCheckResults</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="62" x="1278.5" y="2091.8481">==FALSE</text><rect fill="none" height="174.6641" style="stroke: #000000; stroke-width: 2.0;" width="291" x="1316.5" y="2111.9141"/><polygon fill="#EEEEEE" points="1316.5,2111.9141,1393.5,2111.9141,1393.5,2118.9141,1383.5,2128.9141,1316.5,2128.9141,1316.5,2111.9141" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="1331.5" y="2124.981">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="82" x="1408.5" y="2124.1245">[everyNode]</text><rect fill="none" height="59.2656" style="stroke: #000000; stroke-width: 2.0;" width="271" x="1326.5" y="2136.0469"/><polygon fill="#EEEEEE" points="1326.5,2136.0469,1390.5,2136.0469,1390.5,2143.0469,1380.5,2153.0469,1326.5,2153.0469,1326.5,2136.0469" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="1341.5" y="2149.1138">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5" x="1405.5" y="2148.2573">[</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="177" x="1410.5" y="2148.2573">m_numMetadataResults &gt; 1</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5" x="1587.5" y="2148.2573">]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1395.5" x2="1437.5" y1="2174.3125" y2="2174.3125"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1437.5" x2="1437.5" y1="2174.3125" y2="2187.3125"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1396.5" x2="1437.5" y1="2187.3125" y2="2187.3125"/><polygon fill="#A80036" points="1406.5,2183.3125,1396.5,2187.3125,1406.5,2191.3125,1402.5,2187.3125" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="181" x="1402.5" y="2169.2466">ProcessResultEarlyMetadata</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1395.5" x2="1437.5" y1="2223.4453" y2="2223.4453"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1437.5" x2="1437.5" y1="2223.4453" y2="2236.4453"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1396.5" x2="1437.5" y1="2236.4453" y2="2236.4453"/><polygon fill="#A80036" points="1406.5,2232.4453,1396.5,2236.4453,1406.5,2240.4453,1402.5,2236.4453" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="175" x="1402.5" y="2218.3794">ProcessResultMetadata</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1395.5" x2="1437.5" y1="2265.5781" y2="2265.5781"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1437.5" x2="1437.5" y1="2265.5781" y2="2278.5781"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1396.5" x2="1437.5" y1="2278.5781" y2="2278.5781"/><polygon fill="#A80036" points="1406.5,2274.5781,1396.5,2278.5781,1406.5,2282.5781,1402.5,2278.5781" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="158" x="1402.5" y="2260.5122">ProcessResultBuffers</text><polygon fill="#A80036" points="1095.5,2310.5781,1085.5,2314.5781,1095.5,2318.5781,1091.5,2314.5781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1089.5" x2="1384.5" y1="2314.5781" y2="2314.5781"/><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="119" x="1101.5" y="2309.645">DispatchResults</text><polygon fill="#FBFB77" filter="url(#f77pkjja7yg0e)" points="1089,2327.7109,1089,2382.7109,1540,2382.7109,1540,2337.7109,1530,2327.7109,1089,2327.7109" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1530" x2="1530" y1="2327.7109" y2="2337.7109"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1540" x2="1530" y1="2337.7109" y2="2337.7109"/><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="363" x="1095" y="2344.7778">will call m_chiCallbacks.ChiProcessCaptureResult</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="322" x="1095" y="2359.9106">This can also be override by usecase, for example:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="245" x="1095" y="2375.0435">callbacks.ChidProcessCaptureResult =</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="181" x="1344" y="2375.0435">SessionCbCaptureResult</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1395.5" x2="1437.5" y1="2418.2422" y2="2418.2422"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1437.5" x2="1437.5" y1="2418.2422" y2="2431.2422"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1390.5" x2="1437.5" y1="2431.2422" y2="2431.2422"/><polygon fill="#A80036" points="1400.5,2427.2422,1390.5,2431.2422,1400.5,2435.2422,1396.5,2431.2422" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="175" x="1402.5" y="2413.1763">AdvanceMinExpectedResult</text><rect fill="#FBFB77" filter="url(#f77pkjja7yg0e)" height="83" style="stroke: #A80036; stroke-width: 1.0;" width="349" x="1216" y="2439.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="1220" y="2455.3091">here we will check if we have</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="157" x="1404" y="2455.3091">Finished the Request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="302" x="1220" y="2470.4419">if Request have done, will remove node and run</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="276" x="1220" y="2485.5747">m_pWaitLivePendingRequest-&gt;Signal</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="264" x="1220" y="2500.7075">m_pWaitAllResultsAvailable-&gt;Signal</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="23" x="1220" y="2515.8403">this</text><polygon fill="#A80036" points="1373.5,2581.9063,1383.5,2585.9063,1373.5,2589.9063,1377.5,2585.9063" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1084.5" x2="1379.5" y1="2585.9063" y2="2585.9063"/><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="119" x="1091.5" y="2550.9731">ProcessRequest</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="278" x="1095.5" y="2566.106">after process result, go on process Request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="1091.5" y="2581.2388">otherwith run FlushRequests</text><polygon fill="#FBFB77" filter="url(#f77pkjja7yg0e)" points="1197,2599.3047,1197,2669.3047,1580,2669.3047,1580,2609.3047,1570,2599.3047,1197,2599.3047" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1570" x2="1570" y1="2599.3047" y2="2609.3047"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1580" x2="1570" y1="2609.3047" y2="2609.3047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="125" x="1203" y="2616.3716">pSessionRequest =</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="233" x="1332" y="2616.3716">m_pRequestQueue-&gt;Dequeue()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="190" x="1203" y="2631.5044">Dequeue from RequestQueue</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1207" y="2646.6372"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="293" x="1203" y="2661.77">and have other process, ignore some of them</text><polygon fill="#A80036" points="812.5,2695.8359,802.5,2699.8359,812.5,2703.8359,808.5,2699.8359" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="806.5" x2="1384.5" y1="2699.8359" y2="2699.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="172" x="818.5" y="2694.9028">CSLCreatePrivateFence</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="990.5" y="2694.9028">("InputBufferFence")</text><polygon fill="#A80036" points="1373.5,2724.9688,1383.5,2728.9688,1373.5,2732.9688,1377.5,2728.9688" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="796.5" x2="1379.5" y1="2728.9688" y2="2728.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="803.5" y="2724.0356">return</text><rect fill="none" height="187.9297" style="stroke: #000000; stroke-width: 2.0;" width="1016.5" x="648" y="2744.1016"/><polygon fill="#EEEEEE" points="648,2744.1016,725,2744.1016,725,2751.1016,715,2761.1016,648,2761.1016,648,2744.1016" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="663" y="2757.1685">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="313" x="740" y="2756.312">[requestIndex&lt;pSessionRequest-&gt;numRequests]</text><polygon fill="#A80036" points="1583.5,2778.2344,1593.5,2782.2344,1583.5,2786.2344,1587.5,2782.2344" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1395.5" x2="1589.5" y1="2782.2344" y2="2782.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="100" x="1402.5" y="2777.3013">OpenRequest</text><polygon fill="#A80036" points="812.5,2807.3672,802.5,2811.3672,812.5,2815.3672,808.5,2811.3672" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="806.5" x2="1594.5" y1="2811.3672" y2="2811.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="139" x="818.5" y="2806.4341">CSLOpenRequest()</text><polygon fill="#FBFB77" filter="url(#f77pkjja7yg0e)" points="658,2824.5,658,2864.5,930,2864.5,930,2834.5,920,2824.5,658,2824.5" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="920" x2="920" y1="2824.5" y2="2834.5"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="930" x2="920" y1="2834.5" y2="2834.5"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="251" x="664" y="2841.5669">Creates a new process capture request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="664" y="2856.6997">with CSL for a CSL session</text><polygon fill="#A80036" points="1583.5,2890.7656,1593.5,2894.7656,1583.5,2898.7656,1587.5,2894.7656" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="796.5" x2="1589.5" y1="2894.7656" y2="2894.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="803.5" y="2889.8325">return</text><polygon fill="#A80036" points="1406.5,2919.8984,1396.5,2923.8984,1406.5,2927.8984,1402.5,2923.8984" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1400.5" x2="1599.5" y1="2923.8984" y2="2923.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="1412.5" y="2918.9653">return</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1395.5" x2="1442.5" y1="2955.1641" y2="2955.1641"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1442.5" x2="1442.5" y1="2955.1641" y2="2968.1641"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1401.5" x2="1442.5" y1="2968.1641" y2="2968.1641"/><polygon fill="#A80036" points="1411.5,2964.1641,1401.5,2968.1641,1411.5,2972.1641,1407.5,2968.1641" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="186" x="1407.5" y="2950.0981">DeterminActiveStreams()</text><polygon fill="#FBFB77" filter="url(#f77pkjja7yg0e)" points="1220,2986.1641,1220,3041.1641,1557,3041.1641,1557,2996.1641,1547,2986.1641,1220,2986.1641" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1547" x2="1547" y1="2986.1641" y2="2996.1641"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1557" x2="1547" y1="2996.1641" y2="2996.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="260" x="1226" y="3003.231">set pTopologyPerframeInfo-&gt;sequenceId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="226" x="1226" y="3018.3638">pTopologyPerFrameInfo-&gt;bufferInfo</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="166" x="1226" y="3033.4966">pTopologyPerFrameInfo-&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="150" x="1392" y="3033.4966">activeStreamIdMask</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1400.5" x2="1442.5" y1="3076.6953" y2="3076.6953"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1442.5" x2="1442.5" y1="3076.6953" y2="3089.6953"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1395.5" x2="1442.5" y1="3089.6953" y2="3089.6953"/><polygon fill="#A80036" points="1405.5,3085.6953,1395.5,3089.6953,1405.5,3093.6953,1401.5,3089.6953" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="1407.5" y="3071.6294">return</text><polygon fill="#A80036" points="812.5,3109.6953,802.5,3113.6953,812.5,3117.6953,808.5,3113.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="806.5" x2="1384.5" y1="3113.6953" y2="3113.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="128" x="818.5" y="3108.7622">CSLFenceSignal()</text><polygon fill="#FBFB77" filter="url(#f77pkjja7yg0e)" points="704,3126.8281,704,3151.8281,884,3151.8281,884,3136.8281,874,3126.8281,704,3126.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="874" x2="874" y1="3126.8281" y2="3136.8281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="884" x2="874" y1="3136.8281" y2="3136.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="710" y="3143.895">Signal a fence from UMD</text><polygon fill="#A80036" points="1373.5,3177.9609,1383.5,3181.9609,1373.5,3185.9609,1377.5,3181.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="796.5" x2="1379.5" y1="3181.9609" y2="3181.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="803.5" y="3177.0278">return</text><polygon fill="#A80036" points="1583.5,3207.0938,1593.5,3211.0938,1583.5,3215.0938,1587.5,3211.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1395.5" x2="1589.5" y1="3211.0938" y2="3211.0938"/><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="119" x="1402.5" y="3206.1606">ProcessRequest</text><polygon fill="#FBFB77" filter="url(#f77pkjja7yg0e)" points="1479,3224.2266,1479,3264.2266,1718,3264.2266,1718,3234.2266,1708,3224.2266,1479,3224.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1708" x2="1708" y1="3224.2266" y2="3234.2266"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1718" x2="1708" y1="3234.2266" y2="3234.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="23" x="1485" y="3241.2935">use</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="150" x="1512" y="3241.2935">activeStreamIdMask</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="37" x="1666" y="3241.2935">check</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="207" x="1485" y="3256.4263">if differentStreams=TRUE/FALSE</text><rect fill="none" height="101.3984" style="stroke: #000000; stroke-width: 2.0;" width="335" x="1536.5" y="3280.4922"/><polygon fill="#EEEEEE" points="1536.5,3280.4922,1600.5,3280.4922,1600.5,3287.4922,1590.5,3297.4922,1536.5,3297.4922,1536.5,3280.4922" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="1551.5" y="3293.5591">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="128" x="1615.5" y="3292.7026">[IsExternalSensor()]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1605.5" x2="1652.5" y1="3313.7578" y2="3313.7578"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1652.5" x2="1652.5" y1="3313.7578" y2="3326.7578"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1611.5" x2="1652.5" y1="3326.7578" y2="3326.7578"/><polygon fill="#A80036" points="1621.5,3322.7578,1611.5,3326.7578,1621.5,3330.7578,1617.5,3326.7578" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="242" x="1617.5" y="3308.6919">PublishSensorModeInformation()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1610.5" x2="1652.5" y1="3365.8906" y2="3365.8906"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1652.5" x2="1652.5" y1="3365.8906" y2="3378.8906"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1605.5" x2="1652.5" y1="3378.8906" y2="3378.8906"/><polygon fill="#A80036" points="1615.5,3374.8906,1605.5,3378.8906,1615.5,3382.8906,1611.5,3378.8906" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="1617.5" y="3360.8247">return</text><rect fill="none" height="101.3984" style="stroke: #000000; stroke-width: 2.0;" width="330" x="1536.5" y="3395.8906"/><polygon fill="#EEEEEE" points="1536.5,3395.8906,1600.5,3395.8906,1600.5,3402.8906,1590.5,3412.8906,1536.5,3412.8906,1536.5,3395.8906" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="1551.5" y="3408.9575">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5" x="1615.5" y="3408.1011">[</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="145" x="1620.5" y="3408.1011">FALSE == IsRealTime()</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5" x="1765.5" y="3408.1011">]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1605.5" x2="1652.5" y1="3429.1563" y2="3429.1563"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1652.5" x2="1652.5" y1="3429.1563" y2="3442.1563"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1611.5" x2="1652.5" y1="3442.1563" y2="3442.1563"/><polygon fill="#A80036" points="1621.5,3438.1563,1611.5,3442.1563,1621.5,3446.1563,1617.5,3442.1563" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="237" x="1617.5" y="3424.0903">SendOfflineShutterNotification()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1610.5" x2="1652.5" y1="3481.2891" y2="3481.2891"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1652.5" x2="1652.5" y1="3481.2891" y2="3494.2891"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1605.5" x2="1652.5" y1="3494.2891" y2="3494.2891"/><polygon fill="#A80036" points="1615.5,3490.2891,1605.5,3494.2891,1615.5,3498.2891,1611.5,3494.2891" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="1617.5" y="3476.2231">return</text><rect fill="none" height="893.4609" style="stroke: #000000; stroke-width: 2.0;" width="1564.5" x="587" y="3511.2891"/><polygon fill="#EEEEEE" points="587,3511.2891,664,3511.2891,664,3518.2891,654,3528.2891,587,3528.2891,587,3511.2891" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="602" y="3524.356">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="97" x="679" y="3523.4995">[m_nodeCount]</text><polygon fill="#A80036" points="1849.5,3545.4219,1859.5,3549.4219,1849.5,3553.4219,1853.5,3549.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1605.5" x2="1855.5" y1="3549.4219" y2="3549.4219"/><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="116" x="1612.5" y="3544.4888">SetupRequest()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1871.5" x2="1918.5" y1="3573.6875" y2="3573.6875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1918.5" x2="1918.5" y1="3573.6875" y2="3586.6875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1877.5" x2="1918.5" y1="3586.6875" y2="3586.6875"/><polygon fill="#A80036" points="1887.5,3582.6875,1877.5,3586.6875,1887.5,3590.6875,1883.5,3586.6875" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="206" x="1883.5" y="3568.6216">SetupRequestOutputPorts()</text><rect fill="none" height="535.8672" style="stroke: #000000; stroke-width: 2.0;" width="1544.5" x="597" y="3606.6875"/><polygon fill="#EEEEEE" points="597,3606.6875,661,3606.6875,661,3613.6875,651,3623.6875,597,3623.6875,597,3606.6875" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="612" y="3619.7544">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="198" x="676" y="3618.8979">[IsSinkPortWithBuffer==True ||</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="452" x="676" y="3631.7026">((IsNonSinkHALBufferOutput==True)&amp;&amp;(IsTorchWidgetNode==False))]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1876.5" x2="1923.5" y1="3650.5625" y2="3650.5625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1923.5" x2="1923.5" y1="3650.5625" y2="3663.5625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1882.5" x2="1923.5" y1="3663.5625" y2="3663.5625"/><polygon fill="#A80036" points="1892.5,3659.5625,1882.5,3663.5625,1892.5,3667.5625,1888.5,3663.5625" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="182" x="1888.5" y="3645.4966">ProcessSinkPortNewRequest</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1881.5" x2="1928.5" y1="3692.6953" y2="3692.6953"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1928.5" x2="1928.5" y1="3692.6953" y2="3705.6953"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1887.5" x2="1928.5" y1="3705.6953" y2="3705.6953"/><polygon fill="#A80036" points="1897.5,3701.6953,1887.5,3705.6953,1897.5,3709.6953,1893.5,3705.6953" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="1893.5" y="3687.6294">SetupRequestOutputPortFence()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1886.5" x2="1933.5" y1="3734.8281" y2="3734.8281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1933.5" x2="1933.5" y1="3734.8281" y2="3747.8281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1892.5" x2="1933.5" y1="3747.8281" y2="3747.8281"/><polygon fill="#A80036" points="1902.5,3743.8281,1892.5,3747.8281,1902.5,3751.8281,1898.5,3747.8281" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="231" x="1898.5" y="3729.7622">ReleaseOutputPortCSLFences()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1891.5" x2="1933.5" y1="3786.9609" y2="3786.9609"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1933.5" x2="1933.5" y1="3786.9609" y2="3799.9609"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1886.5" x2="1933.5" y1="3799.9609" y2="3799.9609"/><polygon fill="#A80036" points="1896.5,3795.9609,1886.5,3799.9609,1896.5,3803.9609,1892.5,3799.9609" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="1898.5" y="3781.895">return</text><polygon fill="#A80036" points="807.5,3819.9609,797.5,3823.9609,807.5,3827.9609,803.5,3823.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="801.5" x2="1880.5" y1="3823.9609" y2="3823.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="184" x="813.5" y="3819.0278">CSLCreatePrivateFence()</text><polygon fill="#A80036" points="1864.5,3849.0938,1874.5,3853.0938,1864.5,3857.0938,1868.5,3853.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="796.5" x2="1870.5" y1="3853.0938" y2="3853.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="803.5" y="3848.1606">return</text><polygon fill="#A80036" points="807.5,3893.2266,797.5,3897.2266,807.5,3901.2266,803.5,3897.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="801.5" x2="1880.5" y1="3897.2266" y2="3897.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="234" x="813.5" y="3877.2935">CSLFenceAsycWait(hNewFence,</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="189" x="813.5" y="3892.4263">Node::CSLFenceCallback)</text><polygon fill="#FBFB77" filter="url(#f77pkjja7yg0e)" points="622,3910.4922,622,3965.4922,967,3965.4922,967,3920.4922,957,3910.4922,622,3910.4922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="957" x2="957" y1="3910.4922" y2="3920.4922"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="967" x2="957" y1="3920.4922" y2="3920.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="324" x="628" y="3927.5591">Register a callback to CSL when a fence is signaled</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="628" y="3942.6919">and async wait</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="234" x="628" y="3957.8247">for every node, will have this process</text><polygon fill="#A80036" points="1864.5,3991.8906,1874.5,3995.8906,1864.5,3999.8906,1868.5,3995.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="796.5" x2="1870.5" y1="3995.8906" y2="3995.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="803.5" y="3990.9575">return</text><polygon fill="#FBFB77" filter="url(#f77pkjja7yg0e)" points="607,4009.0234,607,4049.0234,981,4049.0234,981,4019.0234,971,4009.0234,607,4009.0234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="971" x2="971" y1="4009.0234" y2="4019.0234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="981" x2="971" y1="4019.0234" y2="4019.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="353" x="613" y="4026.0903">For every node, we can get fence and setup CSLFences</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="268" x="613" y="4041.2231">but for a HW node like jpeg, what happen?</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1886.5" x2="1928.5" y1="4084.4219" y2="4084.4219"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1928.5" x2="1928.5" y1="4084.4219" y2="4097.4219"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1881.5" x2="1928.5" y1="4097.4219" y2="4097.4219"/><polygon fill="#A80036" points="1891.5,4093.4219,1881.5,4097.4219,1891.5,4101.4219,1887.5,4097.4219" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="1893.5" y="4079.356">return</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1881.5" x2="1923.5" y1="4126.5547" y2="4126.5547"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1923.5" x2="1923.5" y1="4126.5547" y2="4139.5547"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1876.5" x2="1923.5" y1="4139.5547" y2="4139.5547"/><polygon fill="#A80036" points="1886.5,4135.5547,1876.5,4139.5547,1886.5,4143.5547,1882.5,4139.5547" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="1888.5" y="4121.4888">return</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1876.5" x2="1918.5" y1="4175.6875" y2="4175.6875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1918.5" x2="1918.5" y1="4175.6875" y2="4188.6875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1871.5" x2="1918.5" y1="4188.6875" y2="4188.6875"/><polygon fill="#A80036" points="1881.5,4184.6875,1871.5,4188.6875,1881.5,4192.6875,1877.5,4188.6875" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="1883.5" y="4170.6216">return</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1871.5" x2="1918.5" y1="4207.8203" y2="4207.8203"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1918.5" x2="1918.5" y1="4207.8203" y2="4220.8203"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1877.5" x2="1918.5" y1="4220.8203" y2="4220.8203"/><polygon fill="#A80036" points="1887.5,4216.8203,1877.5,4220.8203,1887.5,4224.8203,1883.5,4220.8203" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="193" x="1883.5" y="4202.7544">SetupRequestInputPorts()</text><polygon fill="#FBFB77" filter="url(#f77pkjja7yg0e)" points="1743,4238.8203,1743,4323.8203,1986,4323.8203,1986,4248.8203,1976,4238.8203,1743,4238.8203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1976" x2="1976" y1="4238.8203" y2="4248.8203"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1986" x2="1976" y1="4248.8203" y2="4248.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="171" x="1749" y="4255.8872">Actually, will finally call</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="179" x="1749" y="4271.02">pImageBuffer-&gt;Import()</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="141" x="1749" y="4286.1528">CSLMapNativeBuffer()</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="218" x="1753" y="4301.2856">what the useage of ImageBuffer??</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="191" x="1753" y="4316.4185">And Why we Map Buffer Here?</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1876.5" x2="1918.5" y1="4359.6172" y2="4359.6172"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1918.5" x2="1918.5" y1="4359.6172" y2="4372.6172"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1871.5" x2="1918.5" y1="4372.6172" y2="4372.6172"/><polygon fill="#A80036" points="1881.5,4368.6172,1871.5,4372.6172,1881.5,4376.6172,1877.5,4372.6172" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="1883.5" y="4354.5513">return</text><polygon fill="#A80036" points="1616.5,4392.6172,1606.5,4396.6172,1616.5,4400.6172,1612.5,4396.6172" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1610.5" x2="1865.5" y1="4396.6172" y2="4396.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="1622.5" y="4391.6841">return</text><polygon fill="#A80036" points="1406.5,4428.75,1396.5,4432.75,1406.5,4436.75,1402.5,4432.75" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1400.5" x2="1599.5" y1="4432.75" y2="4432.75"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="1412.5" y="4427.8169">return</text><polygon fill="#FBFB77" filter="url(#f77pkjja7yg0e)" points="1169,4445.8828,1169,4485.8828,1608,4485.8828,1608,4455.8828,1598,4445.8828,1169,4445.8828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1598" x2="1598" y1="4445.8828" y2="4455.8828"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1608" x2="1598" y1="4455.8828" y2="4455.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="62" x="1175" y="4462.9497">finally, will</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="352" x="1241" y="4462.9497">m_pRequestQueue-&gt;Release(pSessionRequest)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="305" x="1175" y="4478.0825">then the requestQueue can enqueue a new one</text><polygon fill="#A80036" points="1090.5,4512.1484,1080.5,4516.1484,1090.5,4520.1484,1086.5,4516.1484" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1084.5" x2="1389.5" y1="4516.1484" y2="4516.1484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="1096.5" y="4511.2153">return</text><polygon fill="#FBFB77" filter="url(#f77pkjja7yg0e)" points="23,4536.2813,23,4682.2813,466,4682.2813,466,4546.2813,456,4536.2813,23,4536.2813" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="456" x2="456" y1="4536.2813" y2="4546.2813"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="466" x2="456" y1="4546.2813" y2="4546.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="29" y="4553.3481">need to check:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="33" y="4568.481"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="270" x="29" y="4583.6138">in camxchisession.cp CHISession::Initialize</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="382" x="37" y="4598.7466">m_pThreadManager-&gt;RegisterJobFamily(ThreadJobCallback)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="33" y="4613.8794"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="196" x="29" y="4629.0122">in chxusecasemc.cpp  initialize</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="99" x="29" y="4644.145">will override the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="307" x="45" y="4659.2778">callbacks.ChiNotify  =  SessionCbNotifyMessage</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="406" x="45" y="4674.4106">callbacks.ChiProcessCaptureResult  =  SessionCbCaptureResult</text><rect fill="#EEEEEE" filter="url(#f77pkjja7yg0e)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="2380" x="3" y="4719.043"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="2383" y1="4719.043" y2="4719.043"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="2383" y1="4722.043" y2="4722.043"/><rect fill="#EEEEEE" filter="url(#f77pkjja7yg0e)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="265" x="1060.5" y="4708.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="246" x="1066.5" y="4724.5435">All Fence Callback will enter here</text><ellipse cx="10.5" cy="4761.8594" fill="none" rx="4" ry="4" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#A80036" points="1849.5,4758.6094,1859.5,4762.6094,1849.5,4766.6094,1853.5,4762.6094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="15" x2="1855.5" y1="4762.6094" y2="4762.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="18" y="4757.6763">Node::</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="134" x="60" y="4757.6763">CSLFenceCallback</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="10" x="194" y="4757.6763">()</text><polygon fill="#A80036" points="2197.5,4787.7422,2207.5,4791.7422,2197.5,4795.7422,2201.5,4791.7422" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1871.5" x2="2203.5" y1="4791.7422" y2="4791.7422"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="68" x="1878.5" y="4786.8091">PostJob()</text><polygon fill="#FBFB77" filter="url(#f77pkjja7yg0e)" points="2050,4804.875,2050,4844.875,2374,4844.875,2374,4814.875,2364,4804.875,2050,4804.875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2364" x2="2364" y1="4804.875" y2="4814.875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2374" x2="2364" y1="4814.875" y2="4814.875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="2056" y="4821.9419">This will call</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="303" x="2056" y="4837.0747">Session::NodeThreadJobFamilySessionCb</text><polygon fill="#A80036" points="1882.5,4871.1406,1872.5,4875.1406,1882.5,4879.1406,1878.5,4875.1406" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1876.5" x2="2213.5" y1="4875.1406" y2="4875.1406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="1888.5" y="4870.2075">return</text><polygon fill="#A80036" points="22,4900.2734,12,4904.2734,22,4908.2734,18,4904.2734" style="stroke: #A80036; stroke-width: 1.0;"/><ellipse cx="1866" cy="4903.5234" fill="none" rx="4" ry="4" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="16" x2="1861.5" y1="4904.2734" y2="4904.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="28" y="4899.3403">return</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="1346.75" y="4936.6167"/><polygon fill="#FBFB77" filter="url(#f77pkjja7yg0e)" points="910,4958.2109,910,5126.2109,1381,5126.2109,1381,4968.2109,1371,4958.2109,910,4958.2109" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1371" x2="1371" y1="4958.2109" y2="4968.2109"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1381" x2="1371" y1="4968.2109" y2="4968.2109"/><text fill="#FF0000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="249" x="916" y="4978.0625">1. when the Job registered?</text><text fill="#0000FF" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="354" x="926" y="4995.7593">It Rigistered in camxsession FinilizePipeline</text><text fill="#0000FF" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="420" x="926" y="5013.2202">And the callback is NodeThreadJobFamilySessionCb</text><text fill="#FF0000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="314" x="916" y="5031.6094">2. How the handle passed to node?</text><text fill="#0000FF" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="440" x="926" y="5049.3062">In camxnode, will got the m_hThreadJobFamilyHandle</text><text fill="#0000FF" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="276" x="926" y="5066.7671">This is what creat in camxsession</text><text fill="#FF0000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="242" x="916" y="5085.1563">3. When it Called?(PostJob)</text><text fill="#0000FF" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="170" x="926" y="5102.853">In CSLFenceCallback</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="920" y="5118.4575"/><polygon fill="#A80036" points="1406.5,5152.5234,1396.5,5156.5234,1406.5,5160.5234,1402.5,5156.5234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1400.5" x2="2213.5" y1="5156.5234" y2="5156.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="237" x="1412.5" y="5151.5903">NodeThreadJobFamilySessionCb</text><polygon fill="#A80036" points="1849.5,5181.6563,1859.5,5185.6563,1849.5,5189.6563,1853.5,5185.6563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1395.5" x2="1855.5" y1="5185.6563" y2="5185.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="193" x="1402.5" y="5180.7231">NodeThreadJobFamilyCb()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1871.5" x2="1918.5" y1="5209.9219" y2="5209.9219"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1918.5" x2="1918.5" y1="5209.9219" y2="5222.9219"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1877.5" x2="1918.5" y1="5222.9219" y2="5222.9219"/><polygon fill="#A80036" points="1887.5,5218.9219,1877.5,5222.9219,1887.5,5226.9219,1883.5,5222.9219" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="165" x="1883.5" y="5204.856">ProcessFenceCallback</text><polygon fill="#FBFB77" filter="url(#f77pkjja7yg0e)" points="1581,5240.9219,1581,5310.9219,2147,5310.9219,2147,5250.9219,2137,5240.9219,1581,5240.9219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2137" x2="2137" y1="5240.9219" y2="5250.9219"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2147" x2="2137" y1="5250.9219" y2="5250.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="1587" y="5257.9888">1. fenceAction =</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="323" x="1697" y="5257.9888">FenceDropActionReturnType::ACTION_NONE</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="37" x="1587" y="5273.1216">2. run</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="351" x="1628" y="5273.1216">ContingencyInducer::CheckFenceDropNeeded()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="153" x="1979" y="5273.1216">, if return ACTION_DROP</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="1599" y="5288.2544">will directly</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="1671" y="5288.2544">return</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="1599" y="5303.3872">if return ACTION_ERROR,</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="87" x="1758" y="5303.3872">fenceResult</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="11" x="1849" y="5303.3872">=</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="162" x="1864" y="5303.3872">CSLFenceResultFailed</text><rect fill="none" height="1038.7813" style="stroke: #000000; stroke-width: 2.0;" width="1022.5" x="1207" y="5327.4531"/><polygon fill="#EEEEEE" points="1207,5327.4531,1271,5327.4531,1271,5334.4531,1261,5344.4531,1207,5344.4531,1207,5327.4531" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="1222" y="5340.52">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="431" x="1286" y="5339.6636">[TRUE==CamxAutomicCompareExchangedU(isFenceSignaled, 0, 1)]</text><polygon fill="#FBFB77" filter="url(#f77pkjja7yg0e)" points="1652,5349.5859,1652,5374.5859,2077,5374.5859,2077,5359.5859,2067,5349.5859,1652,5349.5859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2067" x2="2067" y1="5349.5859" y2="5359.5859"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2077" x2="2067" y1="5359.5859" y2="5359.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="224" x="1658" y="5366.6528">m_perRequestInfo[requestIdIndex].</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="176" x="1882" y="5366.6528">numUnsignaledFences--</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="2058" y="5366.6528">;</text><polygon fill="#A80036" points="1616.5,5400.7188,1606.5,5404.7188,1616.5,5408.7188,1612.5,5404.7188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1610.5" x2="1865.5" y1="5404.7188" y2="5404.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="176" x="1622.5" y="5399.7856">RemoveRequestFence()</text><polygon fill="#FBFB77" filter="url(#f77pkjja7yg0e)" points="1387,5417.8516,1387,5442.8516,1809,5442.8516,1809,5427.8516,1799,5417.8516,1387,5417.8516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1799" x2="1799" y1="5417.8516" y2="5427.8516"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1809" x2="1799" y1="5427.8516" y2="5427.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="401" x="1393" y="5434.9185">remove the Fence Node From the LightWeightDoublyLinkedList</text><polygon fill="#A80036" points="1854.5,5468.9844,1864.5,5472.9844,1854.5,5476.9844,1858.5,5472.9844" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1600.5" x2="1860.5" y1="5472.9844" y2="5472.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="1607.5" y="5468.0513">return</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1876.5" x2="1923.5" y1="5497.25" y2="5497.25"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1923.5" x2="1923.5" y1="5497.25" y2="5510.25"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1882.5" x2="1923.5" y1="5510.25" y2="5510.25"/><polygon fill="#A80036" points="1892.5,5506.25,1882.5,5510.25,1892.5,5514.25,1888.5,5510.25" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="239" x="1888.5" y="5492.1841">ProcessingNodeFenceCallback()</text><polygon fill="#FBFB77" filter="url(#f77pkjja7yg0e)" points="1722,5528.25,1722,5553.25,2007,5553.25,2007,5538.25,1997,5528.25,1722,5528.25" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1997" x2="1997" y1="5528.25" y2="5538.25"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2007" x2="1997" y1="5538.25" y2="5538.25"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="264" x="1728" y="5545.3169">This Function is virtual, currently not used</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1881.5" x2="1923.5" y1="5588.5156" y2="5588.5156"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1923.5" x2="1923.5" y1="5588.5156" y2="5601.5156"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1876.5" x2="1923.5" y1="5601.5156" y2="5601.5156"/><polygon fill="#A80036" points="1886.5,5597.5156,1876.5,5601.5156,1886.5,5605.5156,1882.5,5601.5156" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="1888.5" y="5583.4497">return</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1876.5" x2="1923.5" y1="5620.6484" y2="5620.6484"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1923.5" x2="1923.5" y1="5620.6484" y2="5633.6484"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1882.5" x2="1923.5" y1="5633.6484" y2="5633.6484"/><polygon fill="#A80036" points="1892.5,5629.6484,1882.5,5633.6484,1892.5,5637.6484,1888.5,5633.6484" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="140" x="1888.5" y="5615.5825">WatermarkImage()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1881.5" x2="1923.5" y1="5672.7813" y2="5672.7813"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1923.5" x2="1923.5" y1="5672.7813" y2="5685.7813"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1876.5" x2="1923.5" y1="5685.7813" y2="5685.7813"/><polygon fill="#A80036" points="1886.5,5681.7813,1876.5,5685.7813,1886.5,5689.7813,1882.5,5685.7813" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="1888.5" y="5667.7153">return</text><rect fill="none" height="357.5938" style="stroke: #000000; stroke-width: 2.0;" width="866.5" x="1217" y="5695.7813"/><polygon fill="#EEEEEE" points="1217,5695.7813,1281,5695.7813,1281,5702.7813,1271,5712.7813,1217,5712.7813,1217,5695.7813" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="1232" y="5708.8481">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5" x="1296" y="5707.9917">[</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="145" x="1301" y="5707.9917">numUnsignaledFences</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="35" x="1450" y="5707.9917">== 0]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1876.5" x2="1923.5" y1="5729.0469" y2="5729.0469"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1923.5" x2="1923.5" y1="5729.0469" y2="5742.0469"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1882.5" x2="1923.5" y1="5742.0469" y2="5742.0469"/><polygon fill="#A80036" points="1892.5,5738.0469,1882.5,5742.0469,1892.5,5746.0469,1888.5,5742.0469" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="183" x="1888.5" y="5723.981">ProcessRequestIdDone()</text><polygon fill="#FBFB77" filter="url(#f77pkjja7yg0e)" points="1741,5760.0469,1741,5815.0469,1988,5815.0469,1988,5770.0469,1978,5760.0469,1741,5760.0469" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1978" x2="1978" y1="5760.0469" y2="5770.0469"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1988" x2="1978" y1="5770.0469" y2="5770.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="1747" y="5777.1138">1.</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="210" x="1763" y="5777.1138">RecycleRetiredCmdBuffers()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="1747" y="5792.2466">2.</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="185" x="1763" y="5792.2466">NotifyOutputConsumed()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="1747" y="5807.3794">3.</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="141" x="1763" y="5807.3794">CSLReleaseFence()</text><polygon fill="#A80036" points="1616.5,5841.4453,1606.5,5845.4453,1616.5,5849.4453,1612.5,5845.4453" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1610.5" x2="1870.5" y1="5845.4453" y2="5845.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="208" x="1622.5" y="5840.5122">NotifyNodeRequestIdDone()</text><polygon fill="#A80036" points="1411.5,5870.5781,1401.5,5874.5781,1411.5,5878.5781,1407.5,5874.5781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1405.5" x2="1594.5" y1="5874.5781" y2="5874.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="175" x="1417.5" y="5869.645">NotifyProcessingDone()</text><rect fill="none" height="56.2656" style="stroke: #000000; stroke-width: 2.0;" width="326" x="1227" y="5889.7109"/><polygon fill="#EEEEEE" points="1227,5889.7109,1291,5889.7109,1291,5896.7109,1281,5906.7109,1227,5906.7109,1227,5889.7109" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="1242" y="5902.7778">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5" x="1306" y="5901.9214">[</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="183" x="1311" y="5901.9214">IsDoneProcessing() == TRUE</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5" x="1494" y="5901.9214">]</text><polygon fill="#FBFB77" filter="url(#f77pkjja7yg0e)" points="1237,5911.8438,1237,5936.8438,1539,5936.8438,1539,5921.8438,1529,5911.8438,1237,5911.8438" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1529" x2="1529" y1="5911.8438" y2="5921.8438"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1539" x2="1529" y1="5921.8438" y2="5921.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="281" x="1243" y="5928.9106">m_pWaitAllResultsAvailable-&gt;Signal();</text><polygon fill="#A80036" points="1583.5,5969.9766,1593.5,5973.9766,1583.5,5977.9766,1587.5,5973.9766" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1395.5" x2="1589.5" y1="5973.9766" y2="5973.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="1402.5" y="5969.0435">return</text><polygon fill="#A80036" points="1859.5,5999.1094,1869.5,6003.1094,1859.5,6007.1094,1863.5,6003.1094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1600.5" x2="1865.5" y1="6003.1094" y2="6003.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="1607.5" y="5998.1763">return</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1881.5" x2="1923.5" y1="6037.375" y2="6037.375"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1923.5" x2="1923.5" y1="6037.375" y2="6050.375"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1876.5" x2="1923.5" y1="6050.375" y2="6050.375"/><polygon fill="#A80036" points="1886.5,6046.375,1876.5,6050.375,1886.5,6054.375,1882.5,6050.375" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="1888.5" y="6032.3091">return</text><rect fill="none" height="101.3984" style="stroke: #000000; stroke-width: 2.0;" width="408" x="1811.5" y="6067.375"/><polygon fill="#EEEEEE" points="1811.5,6067.375,1888.5,6067.375,1888.5,6074.375,1878.5,6084.375,1811.5,6084.375,1811.5,6067.375" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="1826.5" y="6080.4419">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="225" x="1903.5" y="6079.5854">[batchIndex &lt; numBatchedFrames]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1876.5" x2="1923.5" y1="6100.6406" y2="6100.6406"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1923.5" x2="1923.5" y1="6100.6406" y2="6113.6406"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1882.5" x2="1923.5" y1="6113.6406" y2="6113.6406"/><polygon fill="#A80036" points="1892.5,6109.6406,1882.5,6113.6406,1892.5,6117.6406,1888.5,6113.6406" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="319" x="1888.5" y="6095.5747">ReleaseOutputPortImageBufferReference()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1881.5" x2="1923.5" y1="6152.7734" y2="6152.7734"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1923.5" x2="1923.5" y1="6152.7734" y2="6165.7734"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1876.5" x2="1923.5" y1="6165.7734" y2="6165.7734"/><polygon fill="#A80036" points="1886.5,6161.7734,1876.5,6165.7734,1886.5,6169.7734,1882.5,6165.7734" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="1888.5" y="6147.7075">return</text><polygon fill="#FBFB77" filter="url(#f77pkjja7yg0e)" points="1592,6180.7734,1592,6356.7734,2137,6356.7734,2137,6190.7734,2127,6180.7734,1592,6180.7734" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2127" x2="2127" y1="6180.7734" y2="6190.7734"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2137" x2="2127" y1="6190.7734" y2="6190.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="47" x="1598" y="6197.8403">will run:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="1598" y="6212.9731">1.</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="381" x="1614" y="6212.9731">ReleaseBufferManagerCompositeImageReference()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="1598" y="6228.106">2.</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="211" x="1614" y="6228.106">NonSinkPortFenceSignaled()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="13" x="1829" y="6228.106">or</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="199" x="1846" y="6228.106">NonSinkPortFenceSignaled</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="1610" y="6243.2388">2.1, in</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="199" x="1653" y="6243.2388">NonSinkPortFenceSignaled</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="266" x="1856" y="6243.2388">DRQ, dependency</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="476" x="1630" y="6258.3716">m_pDeferredRequestQueue-&gt;FenceSignaledCallback(phFence, requestId);</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1630" y="6273.5044"/><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="111" x="1630" y="6273.5044">Very Important</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="1598" y="6288.6372">3.</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="218" x="1614" y="6288.6372">SinkPortFenceErrorSignaled()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="13" x="1840" y="6288.6372">or</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="172" x="1857" y="6288.6372">SinkPOrtFenceSignaled</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="23" x="1598" y="6303.77">4. if</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="207" x="1625" y="6303.77">numUnsignaledFences == 0</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="1836" y="6303.77">will run</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="1610" y="6318.9028">-</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="227" x="1619" y="6318.9028">ProcessPartialMetadataDone()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="1610" y="6334.0356">-</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="179" x="1619" y="6334.0356">ProcessMetadataDone()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="1610" y="6349.1685">-</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="183" x="1619" y="6349.1685">ProcessRequestIdDone()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1876.5" x2="1918.5" y1="6399.3672" y2="6399.3672"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1918.5" x2="1918.5" y1="6399.3672" y2="6412.3672"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1871.5" x2="1918.5" y1="6412.3672" y2="6412.3672"/><polygon fill="#A80036" points="1881.5,6408.3672,1871.5,6412.3672,1881.5,6416.3672,1877.5,6412.3672" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="45" x="1883.5" y="6394.3013">return</text><polygon fill="#A80036" points="1406.5,6432.3672,1396.5,6436.3672,1406.5,6440.3672,1402.5,6436.3672" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1400.5" x2="1865.5" y1="6436.3672" y2="6436.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="1412.5" y="6431.4341">return</text><polygon fill="#A80036" points="2202.5,6461.5,2212.5,6465.5,2202.5,6469.5,2206.5,6465.5" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1390.5" x2="2208.5" y1="6465.5" y2="6465.5"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="1397.5" y="6460.5669">return</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="1346.75" y="6497.8433"/><rect fill="#EEEEEE" filter="url(#f77pkjja7yg0e)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="2380" x="3" y="6535.0039"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="2383" y1="6535.0039" y2="6535.0039"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="2383" y1="6538.0039" y2="6538.0039"/><rect fill="#EEEEEE" filter="url(#f77pkjja7yg0e)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="241" x="1072.5" y="6524.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="222" x="1078.5" y="6540.5044">How Lets do a Reset happen?</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="0" x="1305.5" y="6540.5044"/><polygon fill="#A80036" points="1373.5,6574.5703,1383.5,6578.5703,1373.5,6582.5703,1377.5,6578.5703" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="3" x2="1379.5" y1="6578.5703" y2="6578.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="153" x="10" y="6573.6372">ProcessCaptureRequest</text><rect fill="none" height="17.1328" style="stroke: #000000; stroke-width: 2.0;" width="511" x="454" y="6593.7031"/><polygon fill="#EEEEEE" points="454,6593.7031,531,6593.7031,531,6600.7031,521,6610.7031,454,6610.7031,454,6593.7031" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="469" y="6606.77">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="414" x="546" y="6605.9136">[While(m_livePendingRequests &gt;= m_maxLivePendingRequests)]</text><polygon fill="#A80036" points="14,6634.8359,4,6638.8359,14,6642.8359,10,6638.8359" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="8" x2="1389.5" y1="6638.8359" y2="6638.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="20" y="6633.9028">return</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="1346.75" y="6671.1792"/><rect fill="#EEEEEE" filter="url(#f77pkjja7yg0e)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="2380" x="3" y="6708.3398"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="2383" y1="6708.3398" y2="6708.3398"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="2383" y1="6711.3398" y2="6711.3398"/><rect fill="#EEEEEE" filter="url(#f77pkjja7yg0e)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="130" x="1128" y="6697.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="111" x="1134" y="6713.8403">Other Question</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="0" x="1250" y="6713.8403"/><!--
@startuml
title How camx pipeline get data callback? \n Jin Lin
participant Kernel
participant camxcslhw
participant camxcsl

participant camxchisession
participant camxsession
participant camxpipeline
participant camxnode


box "ThreadManager" #LightBlue
participant ThreadManager
end box

== 1. callback register ==
camxsession->camxpipeline: FinalizePipeline
activate camxpipeline
  camxpipeline->camxcsl: CSLRegisterMessagehandler(...CSLMessageHandler...)
  activate camxcsl
    camxcsl->camxcslhw: CSLRegisterMessageHandlerHW
    note over camxcslhw,camxcsl
      now the CSL messageHandler is registered with CSLMessageHandler
    end note
  deactivate camxcsl
deactivate camxpipeline

note over camxcslhw, camxcsl
  About the CSLJumpTable:
    CSLJumpTable g_CSLjumpTableHW =
    {
        CSLInitializeHW,
        CSLOpenHW,
        CSLCloseHW,
        ...
    }
  correspond to struct:
    struct CSLJumpTable
    {
        CamxResult (*CSLInitialize)(void);
        CamxResult (*CSLOpen)(CSLHandle* phCSL);
        CamxResult (*CSLClose)(CSLHandle* hCSL);
    }
end note



==2. how it works ==
loop N time
  camxcsl->camxcsl: CSLHwInstancePollThreadFunc
  note over camxcsl
    a thread created to Poll
  end note
  camxcsl->Kernel: ioctl(...VIDIOC_DQEVENT...)
  Kernel->camxcsl: pV4L2_event
  camxcsl->camxcsl: CSLHwInternalSendRequestManagerEvent
  note over camxcsl
    event id is V4L_EVENT_CAM_REQ_MGR_SOF and
    V4L_EVENT_CAM_REQ_MGR_ERROR
  end note
  camxcsl->camxpipeline: messageHandler [that is CSLMessageHandler]
  activate camxpipeline
    camxpipeline->camxpipeline:SendSOFnotification
    camxpipeline->camxsession: m_pSession->NotifyResult
      activate camxsession
        camxsession->camxsession: HandleBufferCb
        camxsession->camxsession: InjectResult
        camxsession->camxpipeline: return
      deactivate camxsession
    camxpipeline->camxpipeline:SendShutterNotification
    camxpipeline->camxsession: m_pSession->NotifyResult
    note over camxsession
      will call m_pthreadManager->PostJob, send buffer ok or sof msg
      finally , will call CHISession::ThreadJobExecute
          ->camxsession.cpp    Session::ProcessRequest   [need confirm]
    end note
    activate camxsession
      alt case CbType::SOF
        camxsession->camxsession: HandleSOFCb

        camxsession->camxchisession: **DispatchNotify**
        note right camxchisession
          will call **m_chiCallbacks.ChiNotify**
          Normally, It's initialized in chxusecasedefault
          <color:green>**.ChiNotify = SessionCbNotifyMessage**
          But it also can override in other usecase like
          <color:red>**chxusecasemc**
        end note

      else case CbType::Buffer
        activate camxsession
          camxsession->camxsession: HandleBufferCb
          activate camxsession
            camxsession->camxsession: <color:red>**InjectResult**</color>
            note left camxsession
              will run **m_pThreadManager->PostJob**
              as we have a result needs to be processed
              and this actually Called <color:red>**ThreadJobCallback**
            end note
          camxsession->camxsession: return
          deactivate camxsession

        camxsession->camxsession: return
        deactivate camxsession
      else case CbType::Metadata
      end

    deactivate camxsession
  deactivate camxpipeline

==How CHISession manager the result callback? 1. Create ==
[->camxchisession: CHISession::Create
activate camxchisession
  camxchisession->camxchisession: CHISession::Initialize
  activate camxchisession
    camxchisession->camxsession: Session::Initialize
    camxchisession->ThreadManager: m_pThreadManager->RegisterJobFamily \n(ThreadJobCallback)

  camxchisession->camxchisession: return
  deactivate camxchisession

[<-camxchisession: return
deactivate camxchisession

loop 
ThreadManager->camxchisession: <color:red>**ThreadJobCallback**
activate camxchisession
  alt m_aCheckResults==TRUE
    note left camxchisession
      <color:blue><size:16>**We only handle results when**</size></color>
      <color:blue><size:16>**InjectResult set the Flag, otherwise not run**</size></color>
    end note
    camxchisession->camxsession: **ProcessResults**\n and Set <color:red>**m_aCheckResults**</color>==FALSE
    activate camxsession
    loop everyNode
      alt **m_numMetadataResults > 1**
        camxsession->camxsession: ProcessResultEarlyMetadata
      end
      camxsession->camxsession: **ProcessResultMetadata**
      camxsession->camxsession: **ProcessResultBuffers**
      
    end loop
    camxsession->camxchisession: <color:red>**DispatchResults**
    note right camxchisession
      <color:red>**will call m_chiCallbacks.ChiProcessCaptureResult**
      This can also be override by usecase, for example:
      callbacks.ChidProcessCaptureResult = **SessionCbCaptureResult**
    end note
    camxsession->camxsession: AdvanceMinExpectedResult
    rnote over camxsession
      here we will check if we have <color:red>**Finished the Request**</color>
      if Request have done, will remove node and run
      <color:red>**m_pWaitLivePendingRequest->Signal**</color>
      <color:red>**m_pWaitAllResultsAvailable->Signal**</color>
      this 
    end rnote
    deactivate camxsession
  end
  camxchisession->camxsession: <color:red>**ProcessRequest**</color>\n after process result, go on process Request\notherwith run FlushRequests
  activate camxsession #red
    note over camxsession
      pSessionRequest = **m_pRequestQueue->Dequeue()**
      Dequeue from RequestQueue

      and have other process, ignore some of them
    end note
    camxsession->camxcsl: **CSLCreatePrivateFence**("InputBufferFence")
    activate camxcsl
    camxcsl->camxsession: return
    deactivate camxcsl

    loop requestIndex<pSessionRequest->numRequests
      camxsession->camxpipeline: **OpenRequest**
      activate camxpipeline
        camxpipeline->camxcsl: **CSLOpenRequest()**
        activate camxcsl
          note over camxcsl
            Creates a new process capture request
            with CSL for a CSL session
          end note
        camxcsl->camxpipeline: return
        deactivate camxcsl

      camxpipeline->camxsession: return
      deactivate camxpipeline
    end

    camxsession->camxsession: **DeterminActiveStreams()**
    activate camxsession
      note over camxsession
        set pTopologyPerframeInfo->sequenceId
        pTopologyPerFrameInfo->bufferInfo
        pTopologyPerFrameInfo->**activeStreamIdMask**
      end note
    camxsession->camxsession: return
    deactivate camxsession

    camxsession->camxcsl: **CSLFenceSignal()**
    activate camxcsl
      note over camxcsl
        Signal a fence from UMD
      end note
    camxcsl->camxsession: return
    deactivate camxcsl

    camxsession->camxpipeline: <color:red>**ProcessRequest**
    activate camxpipeline
        note over camxpipeline
          use **activeStreamIdMask** check
          if differentStreams=TRUE/FALSE
        end note
        alt IsExternalSensor()
          camxpipeline->camxpipeline: **PublishSensorModeInformation()**
          activate camxpipeline
          camxpipeline->camxpipeline: return
          deactivate camxpipeline
        end

        alt **FALSE == IsRealTime()**
          camxpipeline->camxpipeline: **SendOfflineShutterNotification()**
          activate camxpipeline
          camxpipeline->camxpipeline: return
          deactivate camxpipeline
        end

        loop m_nodeCount
          camxpipeline->camxnode: <color:red>**SetupRequest()**
          activate camxnode
            camxnode->camxnode: <color:red>**SetupRequestOutputPorts()**
            activate camxnode
              alt IsSinkPortWithBuffer==True ||\n((IsNonSinkHALBufferOutput==True)&&(IsTorchWidgetNode==False))
                camxnode->camxnode: ProcessSinkPortNewRequest
                activate camxnode
                  camxnode->camxnode: SetupRequestOutputPortFence()
                  activate camxnode
                    camxnode->camxnode: **ReleaseOutputPortCSLFences()**
                    activate camxnode
                    camxnode->camxnode: return
                    deactivate camxnode

                    camxnode->camxcsl: **CSLCreatePrivateFence()**
                    activate camxnode
                    camxcsl->camxnode: return
                    deactivate camxnode

                    camxnode->camxcsl: **CSLFenceAsycWait(hNewFence, **\n**Node::CSLFenceCallback)**
                    activate camxnode
                     note over camxcsl
                       Register a callback to CSL when a fence is signaled
                       and async wait
                       for every node, will have this process
                     end note
                    camxcsl->camxnode: return
                    deactivate camxnode

                    note over camxcsl
                        For every node, we can get fence and setup CSLFences
                        but for a HW node like jpeg, what happen?
                    end note

                  camxnode->camxnode: return
                  deactivate camxnode
                camxnode->camxnode: return
                deactivate camxnode
              end
            camxnode->camxnode: return
            deactivate camxnode

            camxnode->camxnode: <color:red>**SetupRequestInputPorts()**
            activate camxnode
              note over camxnode
              **Actually, will finally call **
              **pImageBuffer->Import()**
              <color:red>CSLMapNativeBuffer()</color>
              <color:red> what the useage of ImageBuffer??</color>
              <color:red> And Why we Map Buffer Here?</color>
              end note
            camxnode->camxnode: return
            deactivate camxnode


          camxnode->camxpipeline: return
          deactivate camxnode
        end
    camxpipeline->camxsession: return
    deactivate camxpipeline


  
  note over camxsession
    finally, will **m_pRequestQueue->Release(pSessionRequest)**
    then the requestQueue can enqueue a new one
  end note
  camxsession->camxchisession: return
  deactivate camxsession

deactivate camxchisession
end

  note left Kernel
    need to check:

    in camxchisession.cp CHISession::Initialize
      m_pThreadManager->RegisterJobFamily(ThreadJobCallback)

    in chxusecasemc.cpp  initialize
    will override the 
        callbacks.ChiNotify  =  SessionCbNotifyMessage
        callbacks.ChiProcessCaptureResult  =  SessionCbCaptureResult
  end note
end loop
== All Fence Callback will enter here ==
[o->camxnode: Node::**CSLFenceCallback**()
activate camxnode
  camxnode->ThreadManager: **PostJob()**
  activate ThreadManager
    note over ThreadManager
      This will call
      <color:red>**Session::NodeThreadJobFamilySessionCb**
    end note
  ThreadManager->camxnode: return
  deactivate ThreadManager
[o<-camxnode: return
deactivate camxnode
... ...
note left camxsession
  <color:red><size:16>**1. when the Job registered? **</size></color>
  <color:blue><size:15>**  It Rigistered in camxsession FinilizePipeline**</size></color>
  <color:blue><size:15>**  And the callback is NodeThreadJobFamilySessionCb**</size></color>
  <color:red><size:16>**2. How the handle passed to node?**</size></color>
  <color:blue><size:15>**  In camxnode, will got the m_hThreadJobFamilyHandle**</size></color>
  <color:blue><size:15>**  This is what creat in camxsession**</size></color>
  <color:red><size:16>**3. When it Called?(PostJob)**</size></color>
  <color:blue><size:15>**  In CSLFenceCallback**</size></color>
  
end note
ThreadManager->camxsession: **NodeThreadJobFamilySessionCb**
activate camxsession
  camxsession->camxnode: **NodeThreadJobFamilyCb()**
  activate camxnode
    camxnode->camxnode: **ProcessFenceCallback**
    activate camxnode
      note over camxnode
        1. fenceAction = **FenceDropActionReturnType::ACTION_NONE**
        2. run **ContingencyInducer::CheckFenceDropNeeded()**, if return ACTION_DROP
           will directly <color:red>return</color>
           if return ACTION_ERROR, **fenceResult** = **CSLFenceResultFailed**
      end note

      alt TRUE==CamxAutomicCompareExchangedU(isFenceSignaled, 0, 1)
        note over camxnode
          m_perRequestInfo[requestIdIndex].**numUnsignaledFences- -**;
        end note

        camxnode->camxpipeline: **RemoveRequestFence()**
        activate camxpipeline
          note over camxpipeline
            remove the Fence Node From the LightWeightDoublyLinkedList
          end note
        camxpipeline->camxnode: return
        deactivate camxpipeline

        camxnode->camxnode: **ProcessingNodeFenceCallback()**
        activate camxnode
          note over camxnode
            This Function is virtual, currently not used
          end note
        camxnode->camxnode: return
        deactivate camxnode

        camxnode->camxnode: **WatermarkImage()**
        activate camxnode
        camxnode->camxnode: return
        deactivate camxnode

        alt **numUnsignaledFences** == 0
          camxnode->camxnode: **ProcessRequestIdDone()**
          activate camxnode
            note over camxnode
              1. **RecycleRetiredCmdBuffers()**
              2. **NotifyOutputConsumed()**
              3. **CSLReleaseFence()**
            end note

            camxnode->camxpipeline: **NotifyNodeRequestIdDone()**
            activate camxpipeline
              camxpipeline->camxsession: **NotifyProcessingDone()**
              activate camxsession
                alt **IsDoneProcessing() == TRUE**
                  note over camxsession
                    **m_pWaitAllResultsAvailable->Signal();**
                  end note
                end
              camxsession->camxpipeline: return
              deactivate camxsession
            camxnode<-camxpipeline: return
            deactivate camxpipeline
          camxnode->camxnode: return
          deactivate camxnode
        end

        loop batchIndex < numBatchedFrames
          camxnode->camxnode: **ReleaseOutputPortImageBufferReference()**
          activate camxnode
          camxnode->camxnode: return
          deactivate camxnode
        end loop

        note over camxnode
          will run:
          1. **ReleaseBufferManagerCompositeImageReference()**
          2. **NonSinkPortFenceSignaled()** or **NonSinkPortFenceSignaled**
             2.1, in **NonSinkPortFenceSignaled** DRQ, dependency
                  m_pDeferredRequestQueue->FenceSignaledCallback(phFence, requestId);
                  <color:red>**Very Important **</color>
          3. **SinkPortFenceErrorSignaled()**  or **SinkPOrtFenceSignaled**
          4. if **numUnsignaledFences == 0** will run
             - **ProcessPartialMetadataDone()**
             - **ProcessMetadataDone()**
             - **ProcessRequestIdDone()**
        end note
      end

    camxnode->camxnode: **return**
    deactivate camxnode
  camxnode->camxsession: return
  deactivate camxnode

camxsession->ThreadManager: return
deactivate camxsession

... ...
== **How Lets do a Reset happen?** ==
[->camxsession: ProcessCaptureRequest
activate camxsession
  loop While(m_livePendingRequests >= m_maxLivePendingRequests)
  end loop
[<-camxsession: return
deactivate camxsession

... ...
== **Other Question** ==
@enduml

PlantUML version 1.2017.20(Mon Dec 11 16:57:05 GMT 2017)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_171-8u171-b11-0ubuntu0.16.04.1-b11
Operating System: Linux
OS Version: 4.4.0-43-Microsoft
Default Encoding: ANSI_X3.4-1968
Language: en
Country: US
--></g></svg>