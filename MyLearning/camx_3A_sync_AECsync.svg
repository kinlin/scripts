<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="2611px" preserveAspectRatio="none" style="width:1258px;height:2611px;" version="1.1" viewBox="0 0 1258 2611" width="1258px" zoomAndPan="magnify"><defs><filter height="300%" id="f1n691k3nf1trq" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#0000FF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="163" x="477.5" y="24.8516">AEC sync strategy</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="0" x="645.5" y="25.3232"/><a target="_top" xlink:actuate="onRequest" xlink:href="https://confluence.qualcomm.com/confluence/display/3AWIDETELE/3A+Sync+Design" xlink:show="new" xlink:title="https://confluence.qualcomm.com/confluence/display/3AWIDETELE/3A+Sync+Design" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="121" x="645.5" y="25.3232">ReferencePage</text><line style="stroke: #0000FF; stroke-width: 1.0;" x1="645.5" x2="766.5" y1="27.3232" y2="27.3232"/></a><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="0" x="771.5" y="25.3232"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="73" x="588" y="41.6201">Strategy:</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="162" x="548.5" y="57.917">1. MtrIndepExpIndep</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="169" x="545" y="74.2139">2. MtrIndepExpFollow</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="144" x="557.5" y="90.5107">3. MtrMixExpIndep</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="184" x="537.5" y="106.8076">4. MtrIndepExpDynamic</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="818" x="220.5" y="123.1045">AECAlgoExposureIndependent --Independent compute the exposure settings by using its metering info</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="678" x="290.5" y="139.4014">AECAlgoExposureFollow --Mapped other camera exposure settings to current camera</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="754" x="252.5" y="155.6982">AECAlgoExposureDynamic --Dynamic change of exposure behavior based on target differences</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="92" x="495" y="171.9951">Tuning File:</text><text fill="#FF0000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="172" x="592" y="171.9951">AECMultiCamSync.xml</text><rect fill="#ADFF2F" filter="url(#f1n691k3nf1trq)" height="426.7891" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="248" y="292.8906"/><rect fill="#FFFFFF" filter="url(#f1n691k3nf1trq)" height="1540.375" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="248" y="793.1094"/><rect fill="#FFFFFF" filter="url(#f1n691k3nf1trq)" height="712.1875" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="253" y="888.5078"/><rect fill="#FFFFFF" filter="url(#f1n691k3nf1trq)" height="225.9297" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="253" y="1689.125"/><rect fill="#FFFFFF" filter="url(#f1n691k3nf1trq)" height="293.8672" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="253" y="2003.4844"/><rect fill="#7FFF00" filter="url(#f1n691k3nf1trq)" height="368.5234" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="417" y="322.0234"/><rect fill="#FFFFFF" filter="url(#f1n691k3nf1trq)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="417" y="822.2422"/><rect fill="#98FB98" filter="url(#f1n691k3nf1trq)" height="229" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="609" y="946.7734"/><rect fill="#EEE8AA" filter="url(#f1n691k3nf1trq)" height="156.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="799" y="1723.2578"/><rect fill="#FFFFFF" filter="url(#f1n691k3nf1trq)" height="293.3906" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="988" y="1236.0391"/><rect fill="#FFFFFF" filter="url(#f1n691k3nf1trq)" height="40.2969" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="993" y="1328.4375"/><rect fill="#FFFFFF" filter="url(#f1n691k3nf1trq)" height="79.4297" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="993" y="1413.8672"/><rect fill="#FA8072" filter="url(#f1n691k3nf1trq)" height="149.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="988" y="2061.75"/><rect fill="#FFFFFF" filter="url(#f1n691k3nf1trq)" height="325.3906" style="stroke: #000000; stroke-width: 2.0;" width="562" x="52" y="337.1563"/><rect fill="#FFFFFF" filter="url(#f1n691k3nf1trq)" height="275.2656" style="stroke: #000000; stroke-width: 2.0;" width="675" x="129" y="908.6406"/><rect fill="#FFFFFF" filter="url(#f1n691k3nf1trq)" height="185.8672" style="stroke: #000000; stroke-width: 2.0;" width="655" x="139" y="961.9063"/><rect fill="#FFFFFF" height="99.3359" style="stroke: none; stroke-width: 1.0;" width="655" x="139" y="1048.4375"/><rect fill="#FFFFFF" filter="url(#f1n691k3nf1trq)" height="368.7891" style="stroke: #000000; stroke-width: 2.0;" width="1000" x="202" y="1197.9063"/><rect fill="#FFFFFF" filter="url(#f1n691k3nf1trq)" height="113.5313" style="stroke: #000000; stroke-width: 2.0;" width="345" x="648" y="1738.3906"/><rect fill="#FFFFFF" filter="url(#f1n691k3nf1trq)" height="239.7344" style="stroke: #000000; stroke-width: 2.0;" width="1034" x="202" y="2023.6172"/><rect fill="#FFFFFF" height="43.9375" style="stroke: none; stroke-width: 1.0;" width="1034" x="202" y="2219.4141"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="253" x2="253" y1="217.5938" y2="2351.6172"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="421.5" x2="421.5" y1="217.5938" y2="2351.6172"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="614" x2="614" y1="217.5938" y2="2351.6172"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="803.5" x2="803.5" y1="217.5938" y2="2351.6172"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="992.5" x2="992.5" y1="217.5938" y2="2351.6172"/><rect fill="#ADFF2F" filter="url(#f1n691k3nf1trq)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="78" x="212" y="182.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="64" x="219" y="202.292">caeccore</text><rect fill="#ADFF2F" filter="url(#f1n691k3nf1trq)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="78" x="212" y="2350.6172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="64" x="219" y="2370.6123">caeccore</text><rect fill="#7FFF00" filter="url(#f1n691k3nf1trq)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="169" x="335.5" y="182.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="155" x="342.5" y="202.292">caeccoredatamanager</text><rect fill="#7FFF00" filter="url(#f1n691k3nf1trq)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="169" x="335.5" y="2350.6172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="155" x="342.5" y="2370.6123">caeccoredatamanager</text><rect fill="#98FB98" filter="url(#f1n691k3nf1trq)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="140" x="542" y="182.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="126" x="549" y="202.292">caecmodmetering</text><rect fill="#98FB98" filter="url(#f1n691k3nf1trq)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="140" x="542" y="2350.6172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="126" x="549" y="2370.6123">caecmodmetering</text><rect fill="#EEE8AA" filter="url(#f1n691k3nf1trq)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="169" x="717.5" y="182.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="155" x="724.5" y="202.292">caecmodconvergence</text><rect fill="#EEE8AA" filter="url(#f1n691k3nf1trq)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="169" x="717.5" y="2350.6172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="155" x="724.5" y="2370.6123">caecmodconvergence</text><rect fill="#FA8072" filter="url(#f1n691k3nf1trq)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="147" x="917.5" y="182.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="133" x="924.5" y="202.292">caecmodarbitration</text><rect fill="#FA8072" filter="url(#f1n691k3nf1trq)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="147" x="917.5" y="2350.6172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="133" x="924.5" y="2370.6123">caecmodarbitration</text><rect fill="#ADFF2F" filter="url(#f1n691k3nf1trq)" height="426.7891" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="248" y="292.8906"/><rect fill="#FFFFFF" filter="url(#f1n691k3nf1trq)" height="1540.375" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="248" y="793.1094"/><rect fill="#FFFFFF" filter="url(#f1n691k3nf1trq)" height="712.1875" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="253" y="888.5078"/><rect fill="#FFFFFF" filter="url(#f1n691k3nf1trq)" height="225.9297" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="253" y="1689.125"/><rect fill="#FFFFFF" filter="url(#f1n691k3nf1trq)" height="293.8672" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="253" y="2003.4844"/><rect fill="#7FFF00" filter="url(#f1n691k3nf1trq)" height="368.5234" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="417" y="322.0234"/><rect fill="#FFFFFF" filter="url(#f1n691k3nf1trq)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="417" y="822.2422"/><rect fill="#98FB98" filter="url(#f1n691k3nf1trq)" height="229" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="609" y="946.7734"/><rect fill="#EEE8AA" filter="url(#f1n691k3nf1trq)" height="156.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="799" y="1723.2578"/><rect fill="#FFFFFF" filter="url(#f1n691k3nf1trq)" height="293.3906" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="988" y="1236.0391"/><rect fill="#FFFFFF" filter="url(#f1n691k3nf1trq)" height="40.2969" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="993" y="1328.4375"/><rect fill="#FFFFFF" filter="url(#f1n691k3nf1trq)" height="79.4297" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="993" y="1413.8672"/><rect fill="#FA8072" filter="url(#f1n691k3nf1trq)" height="149.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="988" y="2061.75"/><rect fill="#EEEEEE" filter="url(#f1n691k3nf1trq)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1243" x="3" y="248.7422"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1246" y1="248.7422" y2="248.7422"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1246" y1="251.7422" y2="251.7422"/><rect fill="#EEEEEE" filter="url(#f1n691k3nf1trq)" height="24.2969" style="stroke: #000000; stroke-width: 2.0;" width="217" x="516" y="237.5938"/><text fill="#FF0000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="188" x="527" y="254.5889">aec tuning and strategy</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="0" x="725" y="254.8247"/><polygon fill="#A80036" points="236,288.8906,246,292.8906,236,296.8906,240,292.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="3" x2="242" y1="292.8906" y2="292.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="226" x="10" y="287.9575">case AECAlgoSetParamCameraInfo</text><polygon fill="#A80036" points="405,318.0234,415,322.0234,405,326.0234,409,322.0234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="258" x2="411" y1="322.0234" y2="322.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="265" y="317.0903">setCameraInfo</text><rect fill="none" height="325.3906" style="stroke: #000000; stroke-width: 2.0;" width="562" x="52" y="337.1563"/><polygon fill="#EEEEEE" points="52,337.1563,116,337.1563,116,344.1563,106,354.1563,52,354.1563,52,337.1563" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="67" y="350.2231">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="148" x="131" y="349.3667">[if prevRole!=newRole]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="427" x2="469" y1="375.4219" y2="375.4219"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="469" x2="469" y1="375.4219" y2="388.4219"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="428" x2="469" y1="388.4219" y2="388.4219"/><polygon fill="#A80036" points="438,384.4219,428,388.4219,438,392.4219,434,388.4219" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="434" y="370.356">MapTuningToMtrExpConfig</text><polygon fill="#FBFB77" filter="url(#f1n691k3nf1trq)" points="62,401.4219,62,653.4219,408,653.4219,408,411.4219,398,401.4219,62,401.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="398" x2="398" y1="401.4219" y2="411.4219"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="408" x2="398" y1="411.4219" y2="411.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="68" y="418.4888">mtrAndExpMode =</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="136" x="193" y="418.4888">MtrIndepExpIndep</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="76" y="433.6216">meteringType:</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="222" x="168" y="433.6216">AECAlgoMeteringIndependent</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="93" x="76" y="448.7544">exposureType:</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="224" x="169" y="448.7544">AECAlgoExposureIndependent</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="72" y="463.8872"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="68" y="479.02">mtrAndExpMode =</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="141" x="193" y="479.02">MtrIndepExpFollow</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="76" y="494.1528">meteringType:</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="222" x="168" y="494.1528">AECAlgoMeteringIndependent</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="93" x="76" y="509.2856">exposureType:</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="177" x="169" y="509.2856">AECAlgoExposureFollow</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="72" y="524.4185"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="68" y="539.5513">mtrAndExpMode =</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="119" x="193" y="539.5513">MtrMixExpIndep</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="76" y="554.6841">meteringType:</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="153" x="168" y="554.6841">AECAlgoMeteringMix</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="93" x="76" y="569.8169">exposureType:</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="224" x="169" y="569.8169">AECAlgoExposureIndependent</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="72" y="584.9497"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="68" y="600.0825">mtrAndExpMode =</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="157" x="193" y="600.0825">MtrIndepExpDynamic</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="76" y="615.2153">meteringType:</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="222" x="168" y="615.2153">AECAlgoMeteringIndependent</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="93" x="76" y="630.3481">exposureType:</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="193" x="169" y="630.3481">AECAlgoExposureDynamic</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="72" y="645.481"/><polygon fill="#A80036" points="269,686.5469,259,690.5469,269,694.5469,265,690.5469" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="263" x2="421" y1="690.5469" y2="690.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="275" y="685.6138">return</text><polygon fill="#A80036" points="14,715.6797,4,719.6797,14,723.6797,10,719.6797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="8" x2="252" y1="719.6797" y2="719.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="20" y="714.7466">return</text><rect fill="#EEEEEE" filter="url(#f1n691k3nf1trq)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1243" x="3" y="748.9609"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1246" y1="748.9609" y2="748.9609"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1246" y1="751.9609" y2="751.9609"/><rect fill="#EEEEEE" filter="url(#f1n691k3nf1trq)" height="24.2969" style="stroke: #000000; stroke-width: 2.0;" width="132" x="558.5" y="737.8125"/><text fill="#FF0000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="103" x="569.5" y="754.8076">aec Metering</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="0" x="682.5" y="755.0435"/><polygon fill="#A80036" points="236,789.1094,246,793.1094,236,797.1094,240,793.1094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="3" x2="242" y1="793.1094" y2="793.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="123" x="10" y="788.1763">CAECCore::process</text><polygon fill="#A80036" points="405,818.2422,415,822.2422,405,826.2422,409,822.2422" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="258" x2="411" y1="822.2422" y2="822.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="140" x="265" y="817.3091">processROIsPerFrame</text><polygon fill="#A80036" points="269,847.375,259,851.375,269,855.375,265,851.375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="263" x2="421" y1="851.375" y2="851.375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="275" y="846.4419">return</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="258" x2="305" y1="875.6406" y2="875.6406"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="305" x2="305" y1="875.6406" y2="888.6406"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="264" x2="305" y1="888.6406" y2="888.6406"/><polygon fill="#A80036" points="274,884.6406,264,888.6406,274,892.6406,270,888.6406" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="90" x="270" y="870.5747">runMetering</text><rect fill="none" height="275.2656" style="stroke: #000000; stroke-width: 2.0;" width="675" x="129" y="908.6406"/><polygon fill="#EEEEEE" points="129,908.6406,193,908.6406,193,915.6406,183,925.6406,129,925.6406,129,908.6406" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="144" y="921.7075">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5" x="208" y="920.8511">[</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="180" x="213" y="920.8511">!=AECAlgoMeteringDisabled</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5" x="393" y="920.8511">]</text><polygon fill="#A80036" points="597,942.7734,607,946.7734,597,950.7734,601,946.7734" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="263" x2="603" y1="946.7734" y2="946.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="125" x="270" y="941.8403">ProcessFrameStats</text><rect fill="none" height="185.8672" style="stroke: #000000; stroke-width: 2.0;" width="655" x="139" y="961.9063"/><polygon fill="#EEEEEE" points="139,961.9063,203,961.9063,203,968.9063,193,978.9063,139,978.9063,139,961.9063" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="154" y="974.9731">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5" x="218" y="974.1167">[</text><text fill="#FF0000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="132" x="223" y="974.1167">AECAlgoMeteringMix</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="136" x="359" y="974.1167">== getMeteringType]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="619" x2="661" y1="1013.8047" y2="1013.8047"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="661" x2="661" y1="1013.8047" y2="1026.8047"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="620" x2="661" y1="1026.8047" y2="1026.8047"/><polygon fill="#A80036" points="630,1022.8047,620,1026.8047,630,1030.8047,626,1026.8047" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="626" y="1008.7388">MultiCamMtrMixCalc</text><polygon fill="#FBFB77" filter="url(#f1n691k3nf1trq)" points="299,984.0391,299,1039.0391,600,1039.0391,600,994.0391,590,984.0391,299,984.0391" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="590" x2="590" y1="984.0391" y2="994.0391"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="600" x2="590" y1="994.0391" y2="994.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="205" x="305" y="1001.106">for mix metering, will interpolate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="275" x="305" y="1016.2388">current luma with peer luma (avg and final)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="280" x="305" y="1031.3716">and interpolate short/safe/long lumaTargets</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="139" x2="794" y1="1049.4375" y2="1049.4375"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5" x="144" y="1059.6479">[</text><text fill="#FF0000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="166" x="149" y="1059.6479">AECAlgoExposureDynamic</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="138" x="319" y="1059.6479">== getExposureType]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="619" x2="661" y1="1105.5742" y2="1105.5742"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="661" x2="661" y1="1105.5742" y2="1118.5742"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="620" x2="661" y1="1118.5742" y2="1118.5742"/><polygon fill="#A80036" points="630,1114.5742,620,1118.5742,630,1122.5742,626,1118.5742" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="166" x="626" y="1100.5083">MultiCamExpDynamicCalc</text><polygon fill="#FBFB77" filter="url(#f1n691k3nf1trq)" points="149,1068.2422,149,1138.2422,600,1138.2422,600,1078.2422,590,1068.2422,149,1068.2422" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="590" x2="590" y1="1068.2422" y2="1078.2422"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="600" x2="590" y1="1078.2422" y2="1078.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="155" y="1085.3091">if DRCGain is TRUE</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="291" x="171" y="1100.4419">will interp the shortTarget and longTarget with</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="466" y="1100.4419">current</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="24" x="523" y="1100.4419">and</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="34" x="551" y="1100.4419">Peer</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="155" y="1115.5747">otherwise</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="178" x="171" y="1130.7075">will use the largest DRCGain</text><polygon fill="#A80036" points="274,1171.7734,264,1175.7734,274,1179.7734,270,1175.7734" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="268" x2="613" y1="1175.7734" y2="1175.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="280" y="1170.8403">return</text><rect fill="none" height="368.7891" style="stroke: #000000; stroke-width: 2.0;" width="1000" x="202" y="1197.9063"/><polygon fill="#EEEEEE" points="202,1197.9063,266,1197.9063,266,1204.9063,256,1214.9063,202,1214.9063,202,1197.9063" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="217" y="1210.9731">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="113" x="281" y="1210.1167">[exposureType==</text><text fill="#FF0000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="155" x="394" y="1210.1167">AECAlgoExposureFollow</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5" x="549" y="1210.1167">]</text><polygon fill="#A80036" points="976,1232.0391,986,1236.0391,976,1240.0391,980,1236.0391" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="263" x2="982" y1="1236.0391" y2="1236.0391"/><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="237" x="270" y="1231.106">ComputeTargetIndexInMultiCam</text><polygon fill="#FBFB77" filter="url(#f1n691k3nf1trq)" points="268,1249.1719,268,1289.1719,702,1289.1719,702,1259.1719,692,1249.1719,268,1249.1719" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="692" x2="692" y1="1249.1719" y2="1259.1719"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="702" x2="692" y1="1259.1719" y2="1259.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="38" x="274" y="1266.2388">will do</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="112" x="316" y="1266.2388">sensitivity map</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="255" x="432" y="1266.2388">between master and slave, Explain later</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="271" x="274" y="1281.3716">and then cul Exp index with new Sensitivity</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="998" x2="1045" y1="1315.7344" y2="1315.7344"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1045" x2="1045" y1="1315.7344" y2="1328.7344"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1004" x2="1045" y1="1328.7344" y2="1328.7344"/><polygon fill="#A80036" points="1014,1324.7344,1004,1328.7344,1014,1332.7344,1010,1328.7344" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#FF0000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="172" x="1010" y="1310.4326">MapSensitivityInMultiCam</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1003" x2="1045" y1="1367.8672" y2="1367.8672"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1045" x2="1045" y1="1367.8672" y2="1380.8672"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="998" x2="1045" y1="1380.8672" y2="1380.8672"/><polygon fill="#A80036" points="1008,1376.8672,998,1380.8672,1008,1384.8672,1004,1380.8672" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="1010" y="1362.8013">return</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="998" x2="1045" y1="1401.1641" y2="1401.1641"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1045" x2="1045" y1="1401.1641" y2="1414.1641"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1004" x2="1045" y1="1414.1641" y2="1414.1641"/><polygon fill="#A80036" points="1014,1410.1641,1004,1414.1641,1014,1418.1641,1010,1414.1641" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#FF0000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="180" x="1010" y="1395.8623">QuerySensitivity2ExpIndex</text><polygon fill="#FBFB77" filter="url(#f1n691k3nf1trq)" points="596,1432.1641,596,1457.1641,979,1457.1641,979,1442.1641,969,1432.1641,596,1432.1641" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="969" x2="969" y1="1432.1641" y2="1442.1641"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="979" x2="969" y1="1442.1641" y2="1442.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="99" x="602" y="1449.231">will use the new</text><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="705" y="1449.231">Sensitivity</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="190" x="774" y="1449.231">got cooresponding expIndices</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1003" x2="1045" y1="1492.4297" y2="1492.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1045" x2="1045" y1="1492.4297" y2="1505.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="998" x2="1045" y1="1505.4297" y2="1505.4297"/><polygon fill="#A80036" points="1008,1501.4297,998,1505.4297,1008,1509.4297,1004,1505.4297" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="1010" y="1487.3638">return</text><polygon fill="#A80036" points="274,1525.4297,264,1529.4297,274,1533.4297,270,1529.4297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="268" x2="992" y1="1529.4297" y2="1529.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="280" y="1524.4966">return</text><polygon fill="#A80036" points="602,1554.5625,612,1558.5625,602,1562.5625,606,1558.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="263" x2="608" y1="1558.5625" y2="1558.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="270" y="1553.6294">ExtimateLuxIndexForSlave</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="263" x2="305" y1="1599.8281" y2="1599.8281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="305" x2="305" y1="1599.8281" y2="1612.8281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="258" x2="305" y1="1612.8281" y2="1612.8281"/><polygon fill="#A80036" points="268,1608.8281,258,1612.8281,268,1616.8281,264,1612.8281" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="270" y="1594.7622">return</text><rect fill="#EEEEEE" filter="url(#f1n691k3nf1trq)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1243" x="3" y="1636.9766"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1246" y1="1636.9766" y2="1636.9766"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1246" y1="1639.9766" y2="1639.9766"/><rect fill="#EEEEEE" filter="url(#f1n691k3nf1trq)" height="24.2969" style="stroke: #000000; stroke-width: 2.0;" width="136" x="556.5" y="1625.8281"/><text fill="#FF0000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="107" x="567.5" y="1642.8232">aec Exposure</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="0" x="684.5" y="1643.0591"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="258" x2="305" y1="1676.2578" y2="1676.2578"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="305" x2="305" y1="1676.2578" y2="1689.2578"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="264" x2="305" y1="1689.2578" y2="1689.2578"/><polygon fill="#A80036" points="274,1685.2578,264,1689.2578,274,1693.2578,270,1689.2578" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#0000FF" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="120" x="270" y="1671.1919">runConvergence</text><polygon fill="#A80036" points="787,1719.2578,797,1723.2578,787,1727.2578,791,1723.2578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="263" x2="793" y1="1723.2578" y2="1723.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="270" y="1718.3247">ConvergeFrameExposure</text><rect fill="none" height="113.5313" style="stroke: #000000; stroke-width: 2.0;" width="345" x="648" y="1738.3906"/><polygon fill="#EEEEEE" points="648,1738.3906,712,1738.3906,712,1745.3906,702,1755.3906,648,1755.3906,648,1738.3906" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="663" y="1751.4575">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="147" x="727" y="1750.6011">[bFollowMode==TRUE]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="809" x2="851" y1="1776.6563" y2="1776.6563"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="851" x2="851" y1="1776.6563" y2="1789.6563"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="810" x2="851" y1="1789.6563" y2="1789.6563"/><polygon fill="#A80036" points="820,1785.6563,810,1789.6563,820,1793.6563,816,1789.6563" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="165" x="816" y="1771.5903">UpdateFixedTargetIndices</text><polygon fill="#FBFB77" filter="url(#f1n691k3nf1trq)" points="658,1802.6563,658,1842.6563,946,1842.6563,946,1812.6563,936,1802.6563,658,1802.6563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="936" x2="936" y1="1802.6563" y2="1812.6563"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="946" x2="936" y1="1812.6563" y2="1812.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="664" y="1819.7231">directly set aecSettled TRUE</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="267" x="664" y="1834.856">and set ExpIndexDelta to metering Target</text><polygon fill="#A80036" points="274,1875.9219,264,1879.9219,274,1883.9219,270,1879.9219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="268" x2="803" y1="1879.9219" y2="1879.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="280" y="1874.9888">return</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="263" x2="305" y1="1914.1875" y2="1914.1875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="305" x2="305" y1="1914.1875" y2="1927.1875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="258" x2="305" y1="1927.1875" y2="1927.1875"/><polygon fill="#A80036" points="268,1923.1875,258,1927.1875,268,1931.1875,264,1927.1875" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="270" y="1909.1216">return</text><rect fill="#EEEEEE" filter="url(#f1n691k3nf1trq)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1243" x="3" y="1951.3359"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1246" y1="1951.3359" y2="1951.3359"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1246" y1="1954.3359" y2="1954.3359"/><rect fill="#EEEEEE" filter="url(#f1n691k3nf1trq)" height="24.2969" style="stroke: #000000; stroke-width: 2.0;" width="146" x="551.5" y="1940.1875"/><text fill="#FF0000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="117" x="562.5" y="1957.1826">aec Arbitration</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="0" x="689.5" y="1957.4185"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="258" x2="305" y1="1990.6172" y2="1990.6172"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="305" x2="305" y1="1990.6172" y2="2003.6172"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="264" x2="305" y1="2003.6172" y2="2003.6172"/><polygon fill="#A80036" points="274,1999.6172,264,2003.6172,274,2007.6172,270,2003.6172" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="270" y="1985.5513">runArbitration</text><rect fill="none" height="239.7344" style="stroke: #000000; stroke-width: 2.0;" width="1034" x="202" y="2023.6172"/><polygon fill="#EEEEEE" points="202,2023.6172,266,2023.6172,266,2030.6172,256,2040.6172,202,2040.6172,202,2023.6172" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="217" y="2036.6841">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5" x="281" y="2035.8276">[</text><text fill="#FF0000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="98" x="286" y="2035.8276">streaming case</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5" x="384" y="2035.8276">]</text><polygon fill="#A80036" points="976,2057.75,986,2061.75,976,2065.75,980,2061.75" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="263" x2="982" y1="2061.75" y2="2061.75"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="270" y="2056.8169">ArbitrateExposure</text><polygon fill="#FBFB77" filter="url(#f1n691k3nf1trq)" points="674,2074.8828,674,2099.8828,979,2099.8828,979,2084.8828,969,2074.8828,674,2074.8828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="969" x2="969" y1="2074.8828" y2="2084.8828"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="979" x2="969" y1="2084.8828" y2="2084.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="680" y="2091.9497">ExposureType is</text><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="177" x="787" y="2091.9497">AECAlgoExposureFollow</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="998" x2="1040" y1="2130.1484" y2="2130.1484"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1040" x2="1040" y1="2130.1484" y2="2143.1484"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="999" x2="1040" y1="2143.1484" y2="2143.1484"/><polygon fill="#A80036" points="1009,2139.1484,999,2143.1484,1009,2147.1484,1005,2143.1484" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="219" x="1005" y="2125.0825">SyncUpExposureTimeForMultiCam</text><polygon fill="#FBFB77" filter="url(#f1n691k3nf1trq)" points="772,2156.1484,772,2181.1484,979,2181.1484,979,2166.1484,969,2156.1484,772,2156.1484" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="969" x2="969" y1="2156.1484" y2="2166.1484"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="979" x2="969" y1="2166.1484" y2="2166.1484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="186" x="778" y="2173.2153">sync Exposure time and Gain</text><polygon fill="#A80036" points="274,2207.2813,264,2211.2813,274,2215.2813,270,2211.2813" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="268" x2="992" y1="2211.2813" y2="2211.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="280" y="2206.3481">return</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="202" x2="1236" y1="2220.4141" y2="2220.4141"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5" x="207" y="2230.6245">[</text><text fill="#FF0000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="101" x="212" y="2230.6245">snapshot casae</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5" x="313" y="2230.6245">]</text><polygon fill="#A80036" points="981,2251.2188,991,2255.2188,981,2259.2188,985,2255.2188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="263" x2="987" y1="2255.2188" y2="2255.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="270" y="2250.2856">ArbitrateExposure</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="263" x2="305" y1="2296.4844" y2="2296.4844"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="305" x2="305" y1="2296.4844" y2="2309.4844"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="258" x2="305" y1="2309.4844" y2="2309.4844"/><polygon fill="#A80036" points="268,2305.4844,258,2309.4844,268,2313.4844,264,2309.4844" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="270" y="2291.4185">return</text><polygon fill="#A80036" points="14,2329.4844,4,2333.4844,14,2337.4844,10,2333.4844" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="8" x2="252" y1="2333.4844" y2="2333.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="20" y="2328.5513">return</text><rect fill="#DDDDDD" height="26.2969" rx="5" ry="5" style="stroke: #000000; stroke-width: 1.0;" width="50" x="1187" y="2574.2109"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="38" x="1193" y="2592.2061">Lin Jin</text><!--
@startuml
title
<size:16><color:blue>AEC sync strategy</color></size> [[https://confluence.qualcomm.com/confluence/display/3AWIDETELE/3A+Sync+Design ReferencePage]] 
Strategy:
  1. MtrIndepExpIndep
  2. MtrIndepExpFollow
  3. MtrMixExpIndep
  4. MtrIndepExpDynamic
  AECAlgoExposureIndependent - -Independent compute the exposure settings by using its metering info
  AECAlgoExposureFollow - -Mapped other camera exposure settings to current camera
  AECAlgoExposureDynamic - -Dynamic change of exposure behavior based on target differences
  Tuning File: <color:red><size:14>AECMultiCamSync.xml</size></color>
end title

participant caeccore #GreenYellow
participant caeccoredatamanager as caeccore_datam #Chartreuse
participant caecmodmetering  #PaleGreen
participant caecmodconvergence as caecmod_conv #PaleGoldenRod
participant caecmodarbitration as caecmod_arb #Salmon


== <color:red><size:14> aec tuning and strategy </size></color> ==
[->caeccore: case AECAlgoSetParamCameraInfo
activate caeccore #greenyellow
  caeccore->caeccore_datam: setCameraInfo
  activate caeccore_datam #Chartreuse

    alt if prevRole!=newRole
      caeccore_datam->caeccore_datam: MapTuningToMtrExpConfig
      note left caeccore_datam
        mtrAndExpMode = **MtrIndepExpIndep**
          meteringType:**AECAlgoMeteringIndependent**
          exposureType:**AECAlgoExposureIndependent**

        mtrAndExpMode = **MtrIndepExpFollow**
          meteringType:**AECAlgoMeteringIndependent**
          exposureType:**AECAlgoExposureFollow**

        mtrAndExpMode = **MtrMixExpIndep**
          meteringType:**AECAlgoMeteringMix**
          exposureType:**AECAlgoExposureIndependent**

        mtrAndExpMode = **MtrIndepExpDynamic**
          meteringType:**AECAlgoMeteringIndependent**
          exposureType:**AECAlgoExposureDynamic**

      end note
    end
  caeccore_datam->caeccore: return
  deactivate caeccore_datam
[<-caeccore: return
deactivate caeccore

== <color:red><size:14> aec Metering </size></color> ==
[->caeccore: CAECCore::process
activate caeccore
  caeccore->caeccore_datam: processROIsPerFrame
  activate caeccore_datam
  caeccore_datam->caeccore: return
  deactivate caeccore_datam

  caeccore->caeccore: <color:blue>**runMetering**
  activate caeccore
    alt **!=AECAlgoMeteringDisabled**
      caeccore->caecmodmetering: ProcessFrameStats
      activate caecmodmetering #PaleGreen
        alt <color:red>**AECAlgoMeteringMix**</color> == getMeteringType
          caecmodmetering->caecmodmetering: MultiCamMtrMixCalc
          note left
            for mix metering, will interpolate
            current luma with peer luma (avg and final)
            and interpolate short/safe/long lumaTargets
          end note
        else <color:red>**AECAlgoExposureDynamic**</color> == getExposureType
          caecmodmetering->caecmodmetering: MultiCamExpDynamicCalc
          note left
            if DRCGain is TRUE
                will interp the shortTarget and longTarget with **current** and **Peer**
            otherwise
                will use the largest DRCGain
          end note
        end
      caecmodmetering->caeccore: return
      deactivate caecmodmetering
    end

    alt exposureType==<color:red>**AECAlgoExposureFollow**</color>
      caeccore->caecmod_arb: <color:red>**ComputeTargetIndexInMultiCam**
      note right of caeccore
        will do <color:red>**sensitivity map**</color> between master and slave, Explain later
        and then cul Exp index with new Sensitivity
      end note
      activate caecmod_arb
        caecmod_arb->caecmod_arb: <color:red><size:14>MapSensitivityInMultiCam
        activate caecmod_arb
        caecmod_arb->caecmod_arb: return
        deactivate caecmod_arb

        caecmod_arb->caecmod_arb: <color:red><size:14>QuerySensitivity2ExpIndex
        activate caecmod_arb
        note left of caecmod_arb
          will use the new <color:red>Sensitivity</color> got cooresponding expIndices
        end note
        caecmod_arb->caecmod_arb: return
        deactivate caecmod_arb
      caecmod_arb->caeccore: return
      deactivate caecmod_arb
      caeccore->caecmodmetering: ExtimateLuxIndexForSlave
    end
  caeccore->caeccore: return
  deactivate caeccore

== <color:red><size:14> aec Exposure </size></color> ==
  caeccore->caeccore: <color:blue>**runConvergence**
  activate caeccore
    caeccore->caecmod_conv: ConvergeFrameExposure
    activate caecmod_conv #PaleGoldenRod
      alt bFollowMode==TRUE
        caecmod_conv->caecmod_conv: UpdateFixedTargetIndices
        note over caecmod_conv
          directly set aecSettled TRUE
          and set ExpIndexDelta to metering Target
        end note
      end
    caecmod_conv->caeccore: return
    deactivate caecmod_conv
  caeccore->caeccore: return
  deactivate caeccore

== <color:red><size:14> aec Arbitration </size></color> ==
  caeccore->caeccore: runArbitration
  activate caeccore
  alt <color:red>**streaming case**</color>
    caeccore->caecmod_arb: ArbitrateExposure
    activate caecmod_arb #Salmon
      note left caecmod_arb
        ExposureType is <color:red>**AECAlgoExposureFollow**</color>
      end note
      caecmod_arb->caecmod_arb: SyncUpExposureTimeForMultiCam
      note left caecmod_arb
        sync Exposure time and Gain
      end note
    caecmod_arb->caeccore: return
    deactivate caecmod_arb
  else <color:red>**snapshot casae**</color>
    caeccore->caecmod_arb: ArbitrateExposure
  end

  caeccore->caeccore: return
  deactivate caeccore

[<-caeccore: return
deactivate caeccore

legend right
    Lin Jin
end legend
@enduml

PlantUML version 1.2017.20(Mon Dec 11 16:57:05 GMT 2017)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_171-8u171-b11-0ubuntu0.16.04.1-b11
Operating System: Linux
OS Version: 4.4.0-43-Microsoft
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>