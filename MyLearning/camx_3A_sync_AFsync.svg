<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1602px" preserveAspectRatio="none" style="width:1262px;height:1602px;" version="1.1" viewBox="0 0 1262 1602" width="1262px" zoomAndPan="magnify"><defs><filter height="300%" id="f1x0bw9mqrsnke" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#0000FF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="128" x="497" y="22.9951">af sync strategy</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="0" x="630" y="22.9951"/><a target="_top" xlink:actuate="onRequest" xlink:href="https://confluence.qualcomm.com/confluence/display/3AWIDETELE/3A+Sync+Design" xlink:show="new" xlink:title="https://confluence.qualcomm.com/confluence/display/3AWIDETELE/3A+Sync+Design" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="121" x="630" y="22.9951">ReferencePage</text><line style="stroke: #0000FF; stroke-width: 1.0;" x1="630" x2="751" y1="24.9951" y2="24.9951"/></a><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="0" x="756" y="22.9951"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="73" x="590" y="39.292">Strategy:</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="275" x="494" y="55.5889">1. AF_FOLLOWER_COARSE_FOLLOW</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="295" x="484" y="71.8857">2. AF_FOLLOWER_COMPLETE_FOLLOW</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="486" x="388.5" y="88.1826">3. AF_FOLLOWER_SEQUENTIAL_FOLLOW tuning file not contain</text><rect fill="#FFB6C1" height="1491.6875" style="stroke: #A80036; stroke-width: 1.0;" width="126" x="866" y="99.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="898" y="111.5513">Follower</text><rect fill="#FFFFFF" filter="url(#f1x0bw9mqrsnke)" height="216.1953" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="208" y="229.2109"/><rect fill="#FFFFFF" filter="url(#f1x0bw9mqrsnke)" height="142.9297" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="533" y="273.3438"/><rect fill="#FFFFFF" filter="url(#f1x0bw9mqrsnke)" height="159.6016" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="924" y="518.8359"/><rect fill="#FFFF00" filter="url(#f1x0bw9mqrsnke)" height="511.7344" style="stroke: #FFFF00; stroke-width: 1.0;" width="10" x="924" y="751.8672"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="924" x2="924" y1="751.8672" y2="1263.6016"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="934" x2="934" y1="751.8672" y2="1263.6016"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="924" x2="934" y1="751.8672" y2="751.8672"/><rect fill="#FFFF00" filter="url(#f1x0bw9mqrsnke)" height="84.2656" style="stroke: #FFFF00; stroke-width: 1.0;" width="10" x="924" y="1304.4063"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="924" x2="924" y1="1304.4063" y2="1388.6719"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="934" x2="934" y1="1304.4063" y2="1388.6719"/><rect fill="#FFFF00" filter="url(#f1x0bw9mqrsnke)" height="105.2656" style="stroke: #FFFF00; stroke-width: 1.0;" width="10" x="924" y="1429.4766"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="924" x2="924" y1="1429.4766" y2="1534.7422"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="934" x2="934" y1="1429.4766" y2="1534.7422"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="924" x2="934" y1="1534.7422" y2="1534.7422"/><rect fill="#FFDEAD" filter="url(#f1x0bw9mqrsnke)" height="459.4688" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="929" y="789"/><rect fill="#FFDEAD" filter="url(#f1x0bw9mqrsnke)" height="40.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="929" y="1333.4063"/><rect fill="#FFDEAD" filter="url(#f1x0bw9mqrsnke)" height="40.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="929" y="1458.4766"/><rect fill="#FFFFFF" filter="url(#f1x0bw9mqrsnke)" height="31.9375" style="stroke: #000000; stroke-width: 2.0;" width="442" x="18" y="618.5"/><rect fill="#FFFFFF" height="14.8047" style="stroke: none; stroke-width: 1.0;" width="442" x="18" y="635.6328"/><rect fill="#FFFFFF" filter="url(#f1x0bw9mqrsnke)" height="366.2031" style="stroke: #000000; stroke-width: 2.0;" width="524" x="716" y="848.2656"/><rect fill="#FFFFFF" height="111.2031" style="stroke: none; stroke-width: 1.0;" width="524" x="716" y="992.0625"/><rect fill="#FFFFFF" height="111.2031" style="stroke: none; stroke-width: 1.0;" width="524" x="716" y="1103.2656"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="42" x2="42" y1="153.9141" y2="1263.6016"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="42" x2="42" y1="1263.6016" y2="1304.4063"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="42" x2="42" y1="1304.4063" y2="1388.6719"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="42" x2="42" y1="1388.6719" y2="1429.4766"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="42" x2="42" y1="1429.4766" y2="1552.875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="213" x2="213" y1="153.9141" y2="1263.6016"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="213" x2="213" y1="1263.6016" y2="1304.4063"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="213" x2="213" y1="1304.4063" y2="1388.6719"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="213" x2="213" y1="1388.6719" y2="1429.4766"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="213" x2="213" y1="1429.4766" y2="1552.875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="538" x2="538" y1="153.9141" y2="1263.6016"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="538" x2="538" y1="1263.6016" y2="1304.4063"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="538" x2="538" y1="1304.4063" y2="1388.6719"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="538" x2="538" y1="1388.6719" y2="1429.4766"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="538" x2="538" y1="1429.4766" y2="1552.875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="782" x2="782" y1="153.9141" y2="1263.6016"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="782" x2="782" y1="1263.6016" y2="1304.4063"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="782" x2="782" y1="1304.4063" y2="1388.6719"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="782" x2="782" y1="1388.6719" y2="1429.4766"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="782" x2="782" y1="1429.4766" y2="1552.875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="929" x2="929" y1="153.9141" y2="1263.6016"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="929" x2="929" y1="1263.6016" y2="1304.4063"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="929" x2="929" y1="1304.4063" y2="1388.6719"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="929" x2="929" y1="1388.6719" y2="1429.4766"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="929" x2="929" y1="1429.4766" y2="1552.875"/><rect fill="#ADFF2F" filter="url(#f1x0bw9mqrsnke)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="64" x="8" y="118.6172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="50" x="15" y="138.6123">af_core</text><rect fill="#ADFF2F" filter="url(#f1x0bw9mqrsnke)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="64" x="8" y="1551.875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="50" x="15" y="1571.8701">af_core</text><rect fill="#7FFF00" filter="url(#f1x0bw9mqrsnke)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="54" x="184" y="118.6172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="40" x="191" y="138.6123">af_haf</text><rect fill="#7FFF00" filter="url(#f1x0bw9mqrsnke)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="54" x="184" y="1551.875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="40" x="191" y="1571.8701">af_haf</text><rect fill="#98FB98" filter="url(#f1x0bw9mqrsnke)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="124" x="474" y="118.6172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="110" x="481" y="138.6123">camxhafadapter</text><rect fill="#98FB98" filter="url(#f1x0bw9mqrsnke)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="124" x="474" y="1551.875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="110" x="481" y="1571.8701">camxhafadapter</text><rect fill="#00FA9A" filter="url(#f1x0bw9mqrsnke)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="152" x="704" y="118.6172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="138" x="711" y="138.6123">af_haf_default_mixer</text><rect fill="#00FA9A" filter="url(#f1x0bw9mqrsnke)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="152" x="704" y="1551.875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="138" x="711" y="1571.8701">af_haf_default_mixer</text><rect fill="#FF0000" filter="url(#f1x0bw9mqrsnke)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="114" x="870" y="118.6172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="100" x="877" y="138.6123">af_haf_follower</text><rect fill="#FF0000" filter="url(#f1x0bw9mqrsnke)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="114" x="870" y="1551.875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="100" x="877" y="1571.8701">af_haf_follower</text><rect fill="#FFFFFF" filter="url(#f1x0bw9mqrsnke)" height="216.1953" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="208" y="229.2109"/><rect fill="#FFFFFF" filter="url(#f1x0bw9mqrsnke)" height="142.9297" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="533" y="273.3438"/><rect fill="#FFFFFF" filter="url(#f1x0bw9mqrsnke)" height="159.6016" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="924" y="518.8359"/><rect fill="#FFFF00" filter="url(#f1x0bw9mqrsnke)" height="511.7344" style="stroke: #FFFF00; stroke-width: 1.0;" width="10" x="924" y="751.8672"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="924" x2="924" y1="751.8672" y2="1263.6016"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="934" x2="934" y1="751.8672" y2="1263.6016"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="924" x2="934" y1="751.8672" y2="751.8672"/><rect fill="#FFFF00" filter="url(#f1x0bw9mqrsnke)" height="84.2656" style="stroke: #FFFF00; stroke-width: 1.0;" width="10" x="924" y="1304.4063"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="924" x2="924" y1="1304.4063" y2="1388.6719"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="934" x2="934" y1="1304.4063" y2="1388.6719"/><rect fill="#FFFF00" filter="url(#f1x0bw9mqrsnke)" height="105.2656" style="stroke: #FFFF00; stroke-width: 1.0;" width="10" x="924" y="1429.4766"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="924" x2="924" y1="1429.4766" y2="1534.7422"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="934" x2="934" y1="1429.4766" y2="1534.7422"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="924" x2="934" y1="1534.7422" y2="1534.7422"/><rect fill="#FFDEAD" filter="url(#f1x0bw9mqrsnke)" height="459.4688" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="929" y="789"/><rect fill="#FFDEAD" filter="url(#f1x0bw9mqrsnke)" height="40.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="929" y="1333.4063"/><rect fill="#FFDEAD" filter="url(#f1x0bw9mqrsnke)" height="40.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="929" y="1458.4766"/><rect fill="#EEEEEE" filter="url(#f1x0bw9mqrsnke)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1247" x="3" y="185.0625"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1250" y1="185.0625" y2="185.0625"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1250" y1="188.0625" y2="188.0625"/><rect fill="#EEEEEE" filter="url(#f1x0bw9mqrsnke)" height="24.2969" style="stroke: #000000; stroke-width: 2.0;" width="220" x="516.5" y="173.9141"/><text fill="#FF0000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="191" x="527.5" y="190.9092">how the follower create</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="0" x="728.5" y="191.145"/><polygon fill="#A80036" points="196,225.2109,206,229.2109,196,233.2109,200,229.2109" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="42" x2="202" y1="229.2109" y2="229.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="49" y="224.2778">af_haf_set_core_switch</text><polygon fill="#A80036" points="521,269.3438,531,273.3438,521,277.3438,525,273.3438" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="218" x2="527" y1="273.3438" y2="273.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="154" x="225" y="253.4106">pAlgo-&gt;set_parameters</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="296" x="225" y="268.5435">type: AF_HAF_SET_PARAM_PEER_FOCUS_INFO</text><polygon fill="#A80036" points="770,298.6094,780,302.6094,770,306.6094,774,302.6094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="543" x2="776" y1="302.6094" y2="302.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="215" x="550" y="297.6763">af_default_mixer_set_parameters</text><polygon fill="#FBFB77" filter="url(#f1x0bw9mqrsnke)" points="615,315.7422,615,385.7422,944,385.7422,944,325.7422,934,315.7422,615,315.7422" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="934" x2="934" y1="315.7422" y2="325.7422"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="944" x2="934" y1="325.7422" y2="325.7422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="621" y="332.8091">if !master:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="296" x="633" y="347.9419">pMixer-&gt;p_primary = pMixer-&gt;p_follower_algo</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="621" y="363.0747">else</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="286" x="633" y="378.2075">pMixer-&gt;p_primary = pMixer-&gt;p_active_algo</text><polygon fill="#A80036" points="229,412.2734,219,416.2734,229,420.2734,225,416.2734" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="223" x2="537" y1="416.2734" y2="416.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="235" y="411.3403">return</text><polygon fill="#A80036" points="53,441.4063,43,445.4063,53,449.4063,49,445.4063" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="47" x2="212" y1="445.4063" y2="445.4063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="59" y="440.4731">return</text><rect fill="#EEEEEE" filter="url(#f1x0bw9mqrsnke)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1247" x="3" y="474.6875"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1250" y1="474.6875" y2="474.6875"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1250" y1="477.6875" y2="477.6875"/><rect fill="#EEEEEE" filter="url(#f1x0bw9mqrsnke)" height="24.2969" style="stroke: #000000; stroke-width: 2.0;" width="179" x="537" y="463.5391"/><text fill="#FF0000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="150" x="548" y="480.5342">af process monitor</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="0" x="708" y="480.77"/><polygon fill="#A80036" points="912,514.8359,922,518.8359,912,522.8359,916,518.8359" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="3" x2="918" y1="518.8359" y2="518.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="181" x="10" y="513.9028">af_follower_process_monitor</text><polygon fill="#FBFB77" filter="url(#f1x0bw9mqrsnke)" points="673,531.9688,673,601.9688,1180,601.9688,1180,541.9688,1170,531.9688,673,531.9688" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1170" x2="1170" y1="531.9688" y2="541.9688"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1180" x2="1170" y1="541.9688" y2="541.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="679" y="549.0356">checked with Lester</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="234" x="679" y="564.1685">for follower_monitor, has no different</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="123" x="679" y="579.3013">for follower_search,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="486" x="679" y="594.4341">current we use LEGACY, and Direct mapping require module calibration data</text><rect fill="none" height="31.9375" style="stroke: #000000; stroke-width: 2.0;" width="442" x="18" y="618.5"/><polygon fill="#EEEEEE" points="18,618.5,82,618.5,82,625.5,72,635.5,18,635.5,18,618.5" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="33" y="631.5669">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="358" x="97" y="630.7104">[lens_mapping_method = FOLLOWER_LEGACY_MAPPING]</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="18" x2="460" y1="636.6328" y2="636.6328"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="355" x="23" y="646.8433">[lens_mapping_method = FOLLOWER_DIRECT_MAPPING]</text><polygon fill="#A80036" points="14,674.4375,4,678.4375,14,682.4375,10,678.4375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="8" x2="928" y1="678.4375" y2="678.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="20" y="673.5044">return</text><rect fill="#EEEEEE" filter="url(#f1x0bw9mqrsnke)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1247" x="3" y="707.7188"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1250" y1="707.7188" y2="707.7188"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1250" y1="710.7188" y2="710.7188"/><rect fill="#EEEEEE" filter="url(#f1x0bw9mqrsnke)" height="24.2969" style="stroke: #000000; stroke-width: 2.0;" width="172" x="540.5" y="696.5703"/><text fill="#FF0000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="143" x="551.5" y="713.5654">af process search</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="0" x="704.5" y="713.8013"/><polygon fill="#A80036" points="912,747.8672,922,751.8672,912,755.8672,916,751.8672" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="3" x2="918" y1="751.8672" y2="751.8672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="174" x="10" y="746.9341">af_follower_process_search</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="934" x2="981" y1="776.1328" y2="776.1328"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="981" x2="981" y1="776.1328" y2="789.1328"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="940" x2="981" y1="789.1328" y2="789.1328"/><polygon fill="#A80036" points="950,785.1328,940,789.1328,950,793.1328,946,789.1328" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="174" x="946" y="771.0669">af_follower_focus_converge</text><polygon fill="#FBFB77" filter="url(#f1x0bw9mqrsnke)" points="763,807.1328,763,832.1328,1090,832.1328,1090,817.1328,1080,807.1328,763,807.1328" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1080" x2="1080" y1="807.1328" y2="817.1328"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1090" x2="1080" y1="817.1328" y2="817.1328"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="306" x="769" y="824.1997">just talk about the FOLLOWER_DIRECT_MAPPING</text><rect fill="none" height="366.2031" style="stroke: #000000; stroke-width: 2.0;" width="524" x="716" y="848.2656"/><polygon fill="#EEEEEE" points="716,848.2656,780,848.2656,780,855.2656,770,865.2656,716,865.2656,716,848.2656" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="731" y="861.3325">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="35" x="795" y="860.4761">[case</text><text fill="#FF0000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="211" x="834" y="860.4761">AF_FOLLOWER_COARSE_FOLLOW</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5" x="1045" y="860.4761">]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="939" x2="981" y1="886.5313" y2="886.5313"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="981" x2="981" y1="886.5313" y2="899.5313"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="940" x2="981" y1="899.5313" y2="899.5313"/><polygon fill="#A80036" points="950,895.5313,940,899.5313,950,903.5313,946,899.5313" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="259" x="946" y="881.4653">af_follower_focus_coarse_follow_dir_map</text><polygon fill="#FBFB77" filter="url(#f1x0bw9mqrsnke)" points="740,912.5313,740,982.5313,1114,982.5313,1114,922.5313,1104,912.5313,740,912.5313" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1104" x2="1104" y1="912.5313" y2="922.5313"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1114" x2="1104" y1="922.5313" y2="922.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="353" x="746" y="929.5981">1. if Coarse search ongoing,  Fine search not in process</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="154" x="758" y="944.731">go to the target lenspos</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="253" x="746" y="959.8638">2. if enter fine search, setup fine search</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="310" x="758" y="974.9966">follower have seperate fine search Tuning Param</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="716" x2="1240" y1="993.0625" y2="993.0625"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="35" x="721" y="1003.2729">[case</text><text fill="#FF0000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="229" x="760" y="1003.2729">AF_FOLLOWER_COMPLETE_FOLLOW</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5" x="989" y="1003.2729">]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="939" x2="981" y1="1028" y2="1028"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="981" x2="981" y1="1028" y2="1041"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="940" x2="981" y1="1041" y2="1041"/><polygon fill="#A80036" points="950,1037,940,1041,950,1045,946,1041" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="276" x="946" y="1022.9341">af_follower_focus_complete_follow_dir_map</text><polygon fill="#FBFB77" filter="url(#f1x0bw9mqrsnke)" points="795,1054,795,1094,1058,1094,1058,1064,1048,1054,795,1054" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1048" x2="1048" y1="1054" y2="1064"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1058" x2="1048" y1="1064" y2="1064"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="242" x="801" y="1071.0669">once master focusStatus is FOCUSED</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="801" y="1086.1997">we directly set LensPos</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="716" x2="1240" y1="1104.2656" y2="1104.2656"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="35" x="721" y="1114.4761">[case</text><text fill="#FF0000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="239" x="760" y="1114.4761">AF_FOLLOWER_SEQUENTIAL_FOLLOW</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5" x="999" y="1114.4761">]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="939" x2="981" y1="1139.2031" y2="1139.2031"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="981" x2="981" y1="1139.2031" y2="1152.2031"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="940" x2="981" y1="1152.2031" y2="1152.2031"/><polygon fill="#A80036" points="950,1148.2031,940,1152.2031,950,1156.2031,946,1152.2031" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="282" x="946" y="1134.1372">af_follower_focus_sequential_follow_dir_map</text><polygon fill="#FBFB77" filter="url(#f1x0bw9mqrsnke)" points="726,1165.2031,726,1205.2031,1128,1205.2031,1128,1175.2031,1118,1165.2031,726,1165.2031" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1118" x2="1118" y1="1165.2031" y2="1175.2031"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1128" x2="1118" y1="1175.2031" y2="1175.2031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="381" x="732" y="1182.27">just like COMPLETE_FOLLOW, but even master is focus done</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="166" x="732" y="1197.4028">will do another fine search</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="939" x2="981" y1="1247.6016" y2="1247.6016"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="981" x2="981" y1="1247.6016" y2="1260.6016"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="934" x2="981" y1="1260.6016" y2="1260.6016"/><polygon fill="#A80036" points="944,1256.6016,934,1260.6016,944,1264.6016,940,1260.6016" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="946" y="1242.5356">return</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="487.5" y="1287.812"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="934" x2="981" y1="1320.5391" y2="1320.5391"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="981" x2="981" y1="1320.5391" y2="1333.5391"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="940" x2="981" y1="1333.5391" y2="1333.5391"/><polygon fill="#A80036" points="950,1329.5391,940,1333.5391,950,1337.5391,946,1333.5391" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="169" x="946" y="1315.4731">af_follower_get_fine_range</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="939" x2="981" y1="1372.6719" y2="1372.6719"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="981" x2="981" y1="1372.6719" y2="1385.6719"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="934" x2="981" y1="1385.6719" y2="1385.6719"/><polygon fill="#A80036" points="944,1381.6719,934,1385.6719,944,1389.6719,940,1385.6719" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="946" y="1367.606">return</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="487.5" y="1412.8823"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="934" x2="981" y1="1445.6094" y2="1445.6094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="981" x2="981" y1="1445.6094" y2="1458.6094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="940" x2="981" y1="1458.6094" y2="1458.6094"/><polygon fill="#A80036" points="950,1454.6094,940,1458.6094,950,1462.6094,946,1458.6094" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="286" x="946" y="1440.5435">af_follower_populate_process_search_output</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="939" x2="981" y1="1497.7422" y2="1497.7422"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="981" x2="981" y1="1497.7422" y2="1510.7422"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="934" x2="981" y1="1510.7422" y2="1510.7422"/><polygon fill="#A80036" points="944,1506.7422,934,1510.7422,944,1514.7422,940,1510.7422" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="946" y="1492.6763">return</text><polygon fill="#A80036" points="14,1530.7422,4,1534.7422,14,1538.7422,10,1534.7422" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="8" x2="928" y1="1534.7422" y2="1534.7422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="20" y="1529.8091">return</text><!--
@startuml
title
<size:14><color:blue>af sync strategy</color></size> [[https://confluence.qualcomm.com/confluence/display/3AWIDETELE/3A+Sync+Design ReferencePage]] 
Strategy:
  1. AF_FOLLOWER_COARSE_FOLLOW
  2. AF_FOLLOWER_COMPLETE_FOLLOW
  3. AF_FOLLOWER_SEQUENTIAL_FOLLOW tuning file not contain
end title

participant af_core #GreenYellow
participant af_haf #Chartreuse
participant camxhafadapter  #PaleGreen
participant af_haf_default_mixer  #MediumSpringGreen
box "Follower" #LightPink
participant af_haf_follower #red
end box


== <color:red><size:14> how the follower create </size></color> ==
af_core->af_haf: af_haf_set_core_switch
activate af_haf
  af_haf->camxhafadapter: pAlgo->set_parameters  \ntype: AF_HAF_SET_PARAM_PEER_FOCUS_INFO
  activate camxhafadapter
    camxhafadapter->af_haf_default_mixer: af_default_mixer_set_parameters
    note over af_haf_default_mixer
      if !master:
         pMixer->p_primary = pMixer->p_follower_algo
      else
         pMixer->p_primary = pMixer->p_active_algo
    end note
  camxhafadapter->af_haf: return
  deactivate camxhafadapter

af_haf->af_core: return
deactivate af_haf
== <color:red><size:14> af process monitor </size></color> ==
[->af_haf_follower: af_follower_process_monitor
activate af_haf_follower
  note over af_haf_follower
    checked with Lester
    for follower_monitor, has no different
    for follower_search,
    current we use LEGACY, and Direct mapping require module calibration data
  end note
  alt lens_mapping_method = FOLLOWER_LEGACY_MAPPING
  else lens_mapping_method = FOLLOWER_DIRECT_MAPPING
  end

[<-af_haf_follower: return
deactivate af_haf_follower


== <color:red><size:14> af process search </size></color> ==
[->af_haf_follower: af_follower_process_search
activate af_haf_follower #Yellow
  af_haf_follower->af_haf_follower: af_follower_focus_converge
  activate af_haf_follower #NavajoWhite
  note over af_haf_follower
    just talk about the FOLLOWER_DIRECT_MAPPING
  end note
  alt case <color:red>**AF_FOLLOWER_COARSE_FOLLOW**</color>
    af_haf_follower->af_haf_follower: af_follower_focus_coarse_follow_dir_map
    note over af_haf_follower
      1. if Coarse search ongoing,  Fine search not in process
         go to the target lenspos
      2. if enter fine search, setup fine search
         follower have seperate fine search Tuning Param
    end note
  else case <color:red>**AF_FOLLOWER_COMPLETE_FOLLOW**</color>
    af_haf_follower->af_haf_follower: af_follower_focus_complete_follow_dir_map
    note over af_haf_follower
      once master focusStatus is FOCUSED
      we directly set LensPos
    end note
  else case <color:red>**AF_FOLLOWER_SEQUENTIAL_FOLLOW**</color>
    af_haf_follower->af_haf_follower: af_follower_focus_sequential_follow_dir_map
    note over af_haf_follower
      just like COMPLETE_FOLLOW, but even master is focus done
      will do another fine search
    end note
  end

  af_haf_follower->af_haf_follower: return
  deactivate af_haf_follower

  ... ...
  af_haf_follower->af_haf_follower: af_follower_get_fine_range
  activate af_haf_follower #NavajoWhite

  af_haf_follower->af_haf_follower: return
  deactivate af_haf_follower

  ... ...
  af_haf_follower->af_haf_follower: af_follower_populate_process_search_output
  activate af_haf_follower #NavajoWhite

  af_haf_follower->af_haf_follower: return
  deactivate af_haf_follower

[<-af_haf_follower: return
deactivate af_haf_follower
@enduml

PlantUML version 1.2017.20(Mon Dec 11 16:57:05 GMT 2017)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_171-8u171-b11-0ubuntu0.16.04.1-b11
Operating System: Linux
OS Version: 4.4.0-43-Microsoft
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>