<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="3798px" preserveAspectRatio="none" style="width:1580px;height:3798px;" version="1.1" viewBox="0 0 1580 3798" width="1580px" zoomAndPan="magnify"><defs><filter height="300%" id="f1g9yd2qqbphmx" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="181" x="695.25" y="71.9355">pdaf learning of 8998</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="770.75" y="90.4238">Lin Jin</text><rect fill="#FFFFFF" filter="url(#f1g9yd2qqbphmx)" height="545.9766" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="188" y="213.4609"/><rect fill="#FFFFFF" filter="url(#f1g9yd2qqbphmx)" height="1910.0547" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="188" y="834.1406"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="188" x2="188" y1="834.1406" y2="2744.1953"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="198" x2="198" y1="834.1406" y2="2744.1953"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="188" x2="198" y1="834.1406" y2="834.1406"/><rect fill="#FFFFFF" filter="url(#f1g9yd2qqbphmx)" height="961.2969" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="188" y="2786.0313"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="188" x2="188" y1="2786.0313" y2="3747.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="198" x2="198" y1="2786.0313" y2="3747.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="188" x2="198" y1="3747.3281" y2="3747.3281"/><rect fill="#FFFFFF" filter="url(#f1g9yd2qqbphmx)" height="233.4609" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="506" y="525.9766"/><rect fill="#FFFFFF" filter="url(#f1g9yd2qqbphmx)" height="385.1875" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="506" y="2907.5703"/><rect fill="#FFAAAA" filter="url(#f1g9yd2qqbphmx)" height="408.8672" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="506" y="3323.1094"/><rect fill="#ADFF2F" filter="url(#f1g9yd2qqbphmx)" height="256.4609" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="511" y="3361.4609"/><rect fill="#FFFFFF" filter="url(#f1g9yd2qqbphmx)" height="488.0469" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="709" y="1850.9297"/><rect fill="#FFFFFF" filter="url(#f1g9yd2qqbphmx)" height="315.1641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1176.5" y="1084.1406"/><rect fill="#FFFFFF" filter="url(#f1g9yd2qqbphmx)" height="1299.1875" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1176.5" y="1429.6563"/><rect fill="#FFFFFF" filter="url(#f1g9yd2qqbphmx)" height="1204.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1181.5" y="1524.7109"/><rect fill="#FFFFFF" filter="url(#f1g9yd2qqbphmx)" height="781.9141" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1186.5" y="1709.8203"/><rect fill="#FFFFFF" filter="url(#f1g9yd2qqbphmx)" height="84.7031" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1186.5" y="2644.1406"/><rect fill="#7FFF00" filter="url(#f1g9yd2qqbphmx)" height="160.4063" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1424.5" y="3457.5156"/><rect fill="#FFFFFF" filter="url(#f1g9yd2qqbphmx)" height="91.4063" style="stroke: #000000; stroke-width: 2.0;" width="266" x="110" y="272.1641"/><rect fill="#FFFFFF" filter="url(#f1g9yd2qqbphmx)" height="79.0547" style="stroke: #000000; stroke-width: 2.0;" width="400" x="154.5" y="377.5703"/><rect fill="#FFFFFF" filter="url(#f1g9yd2qqbphmx)" height="180.2969" style="stroke: #000000; stroke-width: 2.0;" width="257" x="65" y="849.4922"/><rect fill="#FFFFFF" height="88.8906" style="stroke: none; stroke-width: 1.0;" width="257" x="65" y="940.8984"/><rect fill="#FFFFFF" filter="url(#f1g9yd2qqbphmx)" height="2696.5391" style="stroke: #000000; stroke-width: 2.0;" width="1404" x="154.5" y="1043.7891"/><rect fill="#FFFFFF" filter="url(#f1g9yd2qqbphmx)" height="270.8125" style="stroke: #000000; stroke-width: 2.0;" width="1006.5" x="433" y="1099.4922"/><rect fill="#FFFFFF" filter="url(#f1g9yd2qqbphmx)" height="58.7031" style="stroke: #000000; stroke-width: 2.0;" width="213" x="1083" y="1124.8438"/><rect fill="#FFFFFF" filter="url(#f1g9yd2qqbphmx)" height="92.0547" style="stroke: #000000; stroke-width: 2.0;" width="986.5" x="443" y="1197.5469"/><rect fill="#FFFFFF" filter="url(#f1g9yd2qqbphmx)" height="962.0234" style="stroke: #000000; stroke-width: 2.0;" width="898" x="469" y="1545.0625"/><rect fill="#FFFFFF" filter="url(#f1g9yd2qqbphmx)" height="227.5859" style="stroke: #000000; stroke-width: 2.0;" width="390" x="643" y="1866.2813"/><rect fill="#FFFFFF" height="15.8359" style="stroke: none; stroke-width: 1.0;" width="390" x="643" y="1927.9844"/><rect fill="#FFFFFF" height="59.1875" style="stroke: none; stroke-width: 1.0;" width="390" x="643" y="1943.8203"/><rect fill="#FFFFFF" height="15.8359" style="stroke: none; stroke-width: 1.0;" width="390" x="643" y="2003.0078"/><rect fill="#FFFFFF" height="15.8359" style="stroke: none; stroke-width: 1.0;" width="390" x="643" y="2018.8438"/><rect fill="#FFFFFF" height="59.1875" style="stroke: none; stroke-width: 1.0;" width="390" x="643" y="2034.6797"/><rect fill="#FFFFFF" filter="url(#f1g9yd2qqbphmx)" height="118.4063" style="stroke: #000000; stroke-width: 2.0;" width="470" x="479" y="2107.8672"/><rect fill="#FFFFFF" height="870.5938" style="stroke: none; stroke-width: 1.0;" width="1404" x="154.5" y="2869.7344"/><rect fill="#FFFFFF" filter="url(#f1g9yd2qqbphmx)" height="310.4844" style="stroke: #000000; stroke-width: 2.0;" width="1157" x="332" y="2953.2734"/><rect fill="#FFFFFF" filter="url(#f1g9yd2qqbphmx)" height="194.4297" style="stroke: #000000; stroke-width: 2.0;" width="1137" x="342" y="2978.625"/><rect fill="#FFFFFF" height="56.1875" style="stroke: none; stroke-width: 1.0;" width="1137" x="342" y="3027.3281"/><rect fill="#FFFFFF" height="89.5391" style="stroke: none; stroke-width: 1.0;" width="1137" x="342" y="3083.5156"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="192.5" x2="192.5" y1="137.1094" y2="2744.1953"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="192.5" x2="192.5" y1="2744.1953" y2="2786.0313"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="192.5" x2="192.5" y1="2786.0313" y2="3757.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="369" x2="369" y1="137.1094" y2="2744.1953"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="369" x2="369" y1="2744.1953" y2="2786.0313"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="369" x2="369" y1="2786.0313" y2="3757.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="511" x2="511" y1="137.1094" y2="2744.1953"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="511" x2="511" y1="2744.1953" y2="2786.0313"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="511" x2="511" y1="2786.0313" y2="3757.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="714" x2="714" y1="137.1094" y2="2744.1953"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="714" x2="714" y1="2744.1953" y2="2786.0313"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="714" x2="714" y1="2786.0313" y2="3757.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1033" x2="1033" y1="137.1094" y2="2744.1953"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1033" x2="1033" y1="2744.1953" y2="2786.0313"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1033" x2="1033" y1="2786.0313" y2="3757.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1181" x2="1181" y1="137.1094" y2="2744.1953"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1181" x2="1181" y1="2744.1953" y2="2786.0313"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1181" x2="1181" y1="2786.0313" y2="3757.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1429" x2="1429" y1="137.1094" y2="2744.1953"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1429" x2="1429" y1="2744.1953" y2="2786.0313"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1429" x2="1429" y1="2786.0313" y2="3757.3281"/><rect fill="#FEFECE" filter="url(#f1g9yd2qqbphmx)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="53" x="164.5" y="100.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="171.5" y="122.0332">pdaf.c</text><rect fill="#FEFECE" filter="url(#f1g9yd2qqbphmx)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="53" x="164.5" y="3756.3281"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="171.5" y="3777.8613">pdaf.c</text><rect fill="#FEFECE" filter="url(#f1g9yd2qqbphmx)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="144" x="295" y="100.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="130" x="302" y="122.0332">pdaf_dpd_wrapper.c</text><rect fill="#FEFECE" filter="url(#f1g9yd2qqbphmx)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="144" x="295" y="3756.3281"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="130" x="302" y="3777.8613">pdaf_dpd_wrapper.c</text><rect fill="#FEFECE" filter="url(#f1g9yd2qqbphmx)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="112" x="453" y="100.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="460" y="122.0332">pdaf_wrapper.c</text><rect fill="#FEFECE" filter="url(#f1g9yd2qqbphmx)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="112" x="453" y="3756.3281"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="460" y="3777.8613">pdaf_wrapper.c</text><rect fill="#FEFECE" filter="url(#f1g9yd2qqbphmx)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="118" x="653" y="100.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="104" x="660" y="122.0332">pdaf_dpd_utils.c</text><rect fill="#FEFECE" filter="url(#f1g9yd2qqbphmx)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="118" x="653" y="3756.3281"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="104" x="660" y="3777.8613">pdaf_dpd_utils.c</text><rect fill="#FEFECE" filter="url(#f1g9yd2qqbphmx)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="136" x="963" y="100.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="122" x="970" y="122.0332">pdaf_lib_common.c</text><rect fill="#FEFECE" filter="url(#f1g9yd2qqbphmx)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="136" x="963" y="3756.3281"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="122" x="970" y="3777.8613">pdaf_lib_common.c</text><rect fill="#FEFECE" filter="url(#f1g9yd2qqbphmx)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="133" x="1113" y="100.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="119" x="1120" y="122.0332">pdaf_dpd_wrapper</text><rect fill="#FEFECE" filter="url(#f1g9yd2qqbphmx)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="133" x="1113" y="3756.3281"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="119" x="1120" y="3777.8613">pdaf_dpd_wrapper</text><rect fill="#FEFECE" filter="url(#f1g9yd2qqbphmx)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="75" x="1390" y="100.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="61" x="1397" y="122.0332">pdaf_utils</text><rect fill="#FEFECE" filter="url(#f1g9yd2qqbphmx)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="75" x="1390" y="3756.3281"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="61" x="1397" y="3777.8613">pdaf_utils</text><rect fill="#FFFFFF" filter="url(#f1g9yd2qqbphmx)" height="545.9766" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="188" y="213.4609"/><rect fill="#FFFFFF" filter="url(#f1g9yd2qqbphmx)" height="1910.0547" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="188" y="834.1406"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="188" x2="188" y1="834.1406" y2="2744.1953"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="198" x2="198" y1="834.1406" y2="2744.1953"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="188" x2="198" y1="834.1406" y2="834.1406"/><rect fill="#FFFFFF" filter="url(#f1g9yd2qqbphmx)" height="961.2969" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="188" y="2786.0313"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="188" x2="188" y1="2786.0313" y2="3747.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="198" x2="198" y1="2786.0313" y2="3747.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="188" x2="198" y1="3747.3281" y2="3747.3281"/><rect fill="#FFFFFF" filter="url(#f1g9yd2qqbphmx)" height="233.4609" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="506" y="525.9766"/><rect fill="#FFFFFF" filter="url(#f1g9yd2qqbphmx)" height="385.1875" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="506" y="2907.5703"/><rect fill="#FFAAAA" filter="url(#f1g9yd2qqbphmx)" height="408.8672" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="506" y="3323.1094"/><rect fill="#ADFF2F" filter="url(#f1g9yd2qqbphmx)" height="256.4609" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="511" y="3361.4609"/><rect fill="#FFFFFF" filter="url(#f1g9yd2qqbphmx)" height="488.0469" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="709" y="1850.9297"/><rect fill="#FFFFFF" filter="url(#f1g9yd2qqbphmx)" height="315.1641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1176.5" y="1084.1406"/><rect fill="#FFFFFF" filter="url(#f1g9yd2qqbphmx)" height="1299.1875" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1176.5" y="1429.6563"/><rect fill="#FFFFFF" filter="url(#f1g9yd2qqbphmx)" height="1204.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1181.5" y="1524.7109"/><rect fill="#FFFFFF" filter="url(#f1g9yd2qqbphmx)" height="781.9141" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1186.5" y="1709.8203"/><rect fill="#FFFFFF" filter="url(#f1g9yd2qqbphmx)" height="84.7031" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1186.5" y="2644.1406"/><rect fill="#7FFF00" filter="url(#f1g9yd2qqbphmx)" height="160.4063" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1424.5" y="3457.5156"/><rect fill="#EEEEEE" filter="url(#f1g9yd2qqbphmx)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1565.5" x="3" y="168.2852"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1568.5" y1="168.2852" y2="168.2852"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1568.5" y1="171.2852" y2="171.2852"/><rect fill="#EEEEEE" filter="url(#f1g9yd2qqbphmx)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="70" x="750.75" y="157.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="52" x="756.75" y="174.6045">pdaf init</text><ellipse cx="10.5" cy="212.7109" fill="none" rx="4" ry="4" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#A80036" points="176,209.4609,186,213.4609,176,217.4609,180,213.4609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="15" x2="182" y1="213.4609" y2="213.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="18" y="208.9561">PDAF_PhaseDetection_init</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="198" x2="240" y1="244.1641" y2="244.1641"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="240" x2="240" y1="244.1641" y2="257.1641"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="199" x2="240" y1="257.1641" y2="257.1641"/><polygon fill="#A80036" points="209,253.1641,199,257.1641,209,261.1641,205,257.1641" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="127" x="205" y="239.3076">PDAF_get_lib_version</text><rect fill="none" height="91.4063" style="stroke: #000000; stroke-width: 2.0;" width="266" x="110" y="272.1641"/><polygon fill="#EEEEEE" points="110,272.1641,171,272.1641,171,280.1641,161,290.1641,110,290.1641,110,272.1641" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="16" x="125" y="286.6592">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="185" x="186" y="285.583">["persist.camera.pdaf_dump==1"]</text><polygon fill="#FBFB77" filter="url(#f1g9yd2qqbphmx)" points="120,295.5156,120,354.5156,261,354.5156,261,305.5156,251,295.5156,120,295.5156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="251" x2="251" y1="295.5156" y2="305.5156"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="261" x2="251" y1="305.5156" y2="305.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="37" x="126" y="314.0107">"dump</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="130" y="330.3623">pdaf_init_param.bin</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="130" y="346.7139">pdaf_version.bin"</text><rect fill="none" height="79.0547" style="stroke: #000000; stroke-width: 2.0;" width="400" x="154.5" y="377.5703"/><polygon fill="#EEEEEE" points="154.5,377.5703,215.5,377.5703,215.5,385.5703,205.5,395.5703,154.5,395.5703,154.5,377.5703" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="16" x="169.5" y="392.0654">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="319" x="230.5" y="390.9893">[buffer_type==PDAF_BUFFER_FLAG_INTERLEAVE_CHANNEL]</text><polygon fill="#A80036" points="357,413.9219,367,417.9219,357,421.9219,361,417.9219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="198" x2="363" y1="417.9219" y2="417.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="205" y="413.417">set_dpd_context_init_info</text><polygon fill="#A80036" points="209,444.2734,199,448.2734,209,452.2734,205,448.2734" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="203" x2="368" y1="448.2734" y2="448.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="215" y="443.7686">return (PD_HANDLE)p</text><polygon fill="#FBFB77" filter="url(#f1g9yd2qqbphmx)" points="436,468.625,436,494.625,582,494.625,582,478.625,572,468.625,436,468.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="572" x2="572" y1="468.625" y2="478.625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="582" x2="572" y1="478.625" y2="478.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="125" x="442" y="487.1201">process T2/T3 sensor</text><polygon fill="#A80036" points="494,521.9766,504,525.9766,494,529.9766,498,525.9766" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="198" x2="500" y1="525.9766" y2="525.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="140" x="205" y="521.4717">set_pd_context_init_info</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="516" x2="558" y1="556.6797" y2="556.6797"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="558" x2="558" y1="556.6797" y2="569.6797"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="517" x2="558" y1="569.6797" y2="569.6797"/><polygon fill="#A80036" points="527,565.6797,517,569.6797,527,573.6797,523,569.6797" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="90" x="523" y="551.8232">init_sensor_info</text><polygon fill="#FBFB77" filter="url(#f1g9yd2qqbphmx)" points="398,582.6797,398,641.6797,620,641.6797,620,592.6797,610,582.6797,398,582.6797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="610" x2="610" y1="582.6797" y2="592.6797"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="620" x2="610" y1="592.6797" y2="592.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="201" x="404" y="601.1748">will read info like sensor image h/w</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="133" x="404" y="617.5264">block_count_horizontal</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="141" x="404" y="633.8779">pd_offset_horizontal etc.</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="516" x2="558" y1="673.0859" y2="673.0859"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="558" x2="558" y1="673.0859" y2="686.0859"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="517" x2="558" y1="686.0859" y2="686.0859"/><polygon fill="#A80036" points="527,682.0859,517,686.0859,527,690.0859,523,686.0859" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="133" x="523" y="668.2295">pdaf_param_init_tuning</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="516" x2="558" y1="716.4375" y2="716.4375"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="558" x2="558" y1="716.4375" y2="729.4375"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="517" x2="558" y1="729.4375" y2="729.4375"/><polygon fill="#A80036" points="527,725.4375,517,729.4375,527,733.4375,523,729.4375" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="523" y="711.5811">calculate_pd_pixel_offset</text><polygon fill="#A80036" points="204,755.4375,194,759.4375,204,763.4375,200,759.4375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="198" x2="510" y1="759.4375" y2="759.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="33" x="210" y="754.9326">return</text><rect fill="#EEEEEE" filter="url(#f1g9yd2qqbphmx)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1565.5" x="3" y="788.9648"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1568.5" y1="788.9648" y2="788.9648"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1568.5" y1="791.9648" y2="791.9648"/><rect fill="#EEEEEE" filter="url(#f1g9yd2qqbphmx)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="76" x="747.75" y="777.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="58" x="753.75" y="795.2842">pdaf calc</text><ellipse cx="10.5" cy="833.3906" fill="none" rx="4" ry="4" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#A80036" points="176,830.1406,186,834.1406,176,838.1406,180,834.1406" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="15" x2="182" y1="834.1406" y2="834.1406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="18" y="829.6357">PDAF_PhaseDetection</text><rect fill="none" height="180.2969" style="stroke: #000000; stroke-width: 2.0;" width="257" x="65" y="849.4922"/><polygon fill="#EEEEEE" points="65,849.4922,126,849.4922,126,857.4922,116,867.4922,65,867.4922,65,849.4922" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="16" x="80" y="863.9873">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="176" x="141" y="862.9111">["persist.camera.pdaf_dump 1"]</text><polygon fill="#FBFB77" filter="url(#f1g9yd2qqbphmx)" points="95,872.8438,95,931.8438,287,931.8438,287,882.8438,277,872.8438,95,872.8438" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="277" x2="277" y1="872.8438" y2="882.8438"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="287" x2="277" y1="882.8438" y2="882.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="171" x="101" y="891.3389">dump pdaf_input_%s_%d.raw</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="101" y="907.6904">pdaf_param.bin</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="101" y="924.042">pdaf_valid_lines.bin</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="65" x2="322" y1="941.8984" y2="941.8984"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="176" x="70" y="953.3174">["persist.camera.pdaf_dump 2"]</text><polygon fill="#FBFB77" filter="url(#f1g9yd2qqbphmx)" points="75,961.7344,75,1020.7344,307,1020.7344,307,971.7344,297,961.7344,75,961.7344" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="297" x2="297" y1="961.7344" y2="971.7344"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="307" x2="297" y1="971.7344" y2="971.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="211" x="81" y="980.2295">dump pdaf_input_lens_pos_%4d.raw</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="81" y="996.5811">pdaf_param.bin</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="81" y="1012.9326">pdaf_valid_lines.bin</text><rect fill="none" height="2696.5391" style="stroke: #000000; stroke-width: 2.0;" width="1404" x="154.5" y="1043.7891"/><polygon fill="#EEEEEE" points="154.5,1043.7891,215.5,1043.7891,215.5,1051.7891,205.5,1061.7891,154.5,1061.7891,154.5,1043.7891" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="16" x="169.5" y="1058.2842">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="92" x="230.5" y="1057.208">[dual-pd sensor]</text><polygon fill="#A80036" points="1164.5,1080.1406,1174.5,1084.1406,1164.5,1088.1406,1168.5,1084.1406" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="198" x2="1170.5" y1="1084.1406" y2="1084.1406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="166" x="205" y="1079.6357">set_dpd_context_param_info</text><rect fill="none" height="270.8125" style="stroke: #000000; stroke-width: 2.0;" width="1006.5" x="433" y="1099.4922"/><polygon fill="#EEEEEE" points="433,1099.4922,494,1099.4922,494,1107.4922,484,1117.4922,433,1117.4922,433,1099.4922" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="16" x="448" y="1113.9873">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="266" x="509" y="1112.9111">[pdaf_sw_window_mode==FIXED_GRID_WINDOW]</text><rect fill="none" height="58.7031" style="stroke: #000000; stroke-width: 2.0;" width="213" x="1083" y="1124.8438"/><polygon fill="#EEEEEE" points="1083,1124.8438,1144,1124.8438,1144,1132.8438,1134,1142.8438,1083,1142.8438,1083,1124.8438" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="16" x="1098" y="1139.3389">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="132" x="1159" y="1138.2627">[p-&gt;status==PD_ACTIVE]</text><polygon fill="#FBFB77" filter="url(#f1g9yd2qqbphmx)" points="1093,1148.1953,1093,1174.1953,1265,1174.1953,1265,1158.1953,1255,1148.1953,1093,1148.1953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1255" x2="1255" y1="1148.1953" y2="1158.1953"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1265" x2="1255" y1="1158.1953" y2="1158.1953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="151" x="1099" y="1166.6904">set new_width/new_height</text><rect fill="none" height="92.0547" style="stroke: #000000; stroke-width: 2.0;" width="986.5" x="443" y="1197.5469"/><polygon fill="#EEEEEE" points="443,1197.5469,504,1197.5469,504,1205.5469,494,1215.5469,443,1215.5469,443,1197.5469" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="16" x="458" y="1212.042">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="173" x="519" y="1210.9658">[p-&gt;status==PD_UNCONFIGURED]</text><polygon fill="#A80036" points="522,1233.8984,512,1237.8984,522,1241.8984,518,1237.8984" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="516" x2="1175.5" y1="1237.8984" y2="1237.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="528" y="1233.3936">set_pd_context_param_info</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1186.5" x2="1228.5" y1="1268.6016" y2="1268.6016"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1228.5" x2="1228.5" y1="1268.6016" y2="1281.6016"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1187.5" x2="1228.5" y1="1281.6016" y2="1281.6016"/><polygon fill="#A80036" points="1197.5,1277.6016,1187.5,1281.6016,1197.5,1285.6016,1193.5,1281.6016" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="224" x="1193.5" y="1263.7451">allocate_dpd_grid_memory_and_config</text><polygon fill="#A80036" points="522,1314.6016,512,1318.6016,522,1322.6016,518,1318.6016" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="516" x2="1175.5" y1="1318.6016" y2="1318.6016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="528" y="1314.0967">set_pd_context_param_info</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1186.5" x2="1228.5" y1="1349.3047" y2="1349.3047"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1228.5" x2="1228.5" y1="1349.3047" y2="1362.3047"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1187.5" x2="1228.5" y1="1362.3047" y2="1362.3047"/><polygon fill="#A80036" points="1197.5,1358.3047,1187.5,1362.3047,1197.5,1366.3047,1193.5,1362.3047" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="177" x="1193.5" y="1344.4482">dpd_grid_set_realtime_params</text><polygon fill="#A80036" points="209,1395.3047,199,1399.3047,209,1403.3047,205,1399.3047" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="203" x2="1180.5" y1="1399.3047" y2="1399.3047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="33" x="215" y="1394.7998">return</text><polygon fill="#A80036" points="1164.5,1425.6563,1174.5,1429.6563,1164.5,1433.6563,1168.5,1429.6563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="198" x2="1170.5" y1="1429.6563" y2="1429.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="165" x="205" y="1425.1514">dpd_incremental_processing</text><polygon fill="#FBFB77" filter="url(#f1g9yd2qqbphmx)" points="1081,1443.0078,1081,1485.0078,1278,1485.0078,1278,1453.0078,1268,1443.0078,1081,1443.0078" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1268" x2="1268" y1="1443.0078" y2="1453.0078"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1278" x2="1268" y1="1453.0078" y2="1453.0078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="1087" y="1461.5029">num_of_lines is come from isp</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="127" x="1091" y="1477.8545">what does this mean?</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1186.5" x2="1233.5" y1="1512.0625" y2="1512.0625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1233.5" x2="1233.5" y1="1512.0625" y2="1525.0625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1192.5" x2="1233.5" y1="1525.0625" y2="1525.0625"/><polygon fill="#A80036" points="1202.5,1521.0625,1192.5,1525.0625,1202.5,1529.0625,1198.5,1525.0625" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="1198.5" y="1507.2061">dpd_get_pd_center_window</text><rect fill="none" height="962.0234" style="stroke: #000000; stroke-width: 2.0;" width="898" x="469" y="1545.0625"/><polygon fill="#EEEEEE" points="469,1545.0625,542,1545.0625,542,1553.0625,532,1563.0625,469,1563.0625,469,1545.0625" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="484" y="1559.5576">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="195" x="557" y="1558.4814">[grid_y_ind &lt; window_number_ver]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1191.5" x2="1233.5" y1="1585.7656" y2="1585.7656"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1233.5" x2="1233.5" y1="1585.7656" y2="1598.7656"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1192.5" x2="1233.5" y1="1598.7656" y2="1598.7656"/><polygon fill="#A80036" points="1202.5,1594.7656,1192.5,1598.7656,1202.5,1602.7656,1198.5,1598.7656" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="140" x="1198.5" y="1580.9092">dpd_prepare_line_arg</text><polygon fill="#FBFB77" filter="url(#f1g9yd2qqbphmx)" points="1006,1611.7656,1006,1670.7656,1353,1670.7656,1353,1621.7656,1343,1611.7656,1006,1611.7656" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1343" x2="1343" y1="1611.7656" y2="1621.7656"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1353" x2="1343" y1="1621.7656" y2="1621.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="326" x="1012" y="1630.2607">1)Prepare thie line_arg by filling all the necessary details</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="220" x="1012" y="1646.6123">in order to perform the core operations</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="1020" y="1662.9639"/><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="98" x="1020" y="1662.9639">Why need this?</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1191.5" x2="1238.5" y1="1697.1719" y2="1697.1719"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1238.5" x2="1238.5" y1="1697.1719" y2="1710.1719"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1197.5" x2="1238.5" y1="1710.1719" y2="1710.1719"/><polygon fill="#A80036" points="1207.5,1706.1719,1197.5,1710.1719,1207.5,1714.1719,1203.5,1710.1719" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="142" x="1203.5" y="1692.3154">dpd_process_grid_line</text><polygon fill="#FBFB77" filter="url(#f1g9yd2qqbphmx)" points="1043,1728.1719,1043,1819.1719,1315,1819.1719,1315,1738.1719,1305,1728.1719,1043,1728.1719" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1305" x2="1305" y1="1728.1719" y2="1738.1719"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1315" x2="1305" y1="1738.1719" y2="1738.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="251" x="1049" y="1746.667">2) This performs the core operation such as</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="1053" y="1763.0186">Parsing of PD pixels</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="125" x="1053" y="1779.3701">Performing Gain_map</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="60" x="1053" y="1795.7217">IIR filtering</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="102" x="1053" y="1812.0732">SAD computation</text><polygon fill="#A80036" points="730,1846.9297,720,1850.9297,730,1854.9297,726,1850.9297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="724" x2="1185.5" y1="1850.9297" y2="1850.9297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="258" x="736" y="1846.4248">dpd_core_parse_and_preprocess(p_line_arg)</text><rect fill="none" height="227.5859" style="stroke: #000000; stroke-width: 2.0;" width="390" x="643" y="1866.2813"/><polygon fill="#EEEEEE" points="643,1866.2813,704,1866.2813,704,1874.2813,694,1884.2813,643,1884.2813,643,1866.2813" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="16" x="658" y="1880.7764">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="242" x="719" y="1879.7002">[bit_width_type DPD_RAW_8_BIT_UNPACKED]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="719" x2="761" y1="1906.9844" y2="1906.9844"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="761" x2="761" y1="1906.9844" y2="1919.9844"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="720" x2="761" y1="1919.9844" y2="1919.9844"/><polygon fill="#A80036" points="730,1915.9844,720,1919.9844,730,1923.9844,726,1919.9844" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="288" x="726" y="1902.1279">dpd_line_fill_buffer_with_gain_bin_8bpp_unpacked</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="643" x2="1033" y1="1928.9844" y2="1928.9844"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="248" x="648" y="1940.4033">[bit_width_type DPD_RAW_10_BIT_UNPACKED]</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="643" x2="1033" y1="1944.8203" y2="1944.8203"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="234" x="648" y="1956.2393">[bit_width_type DPD_RAW_10_BIT_PACKED]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="719" x2="761" y1="1982.0078" y2="1982.0078"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="761" x2="761" y1="1982.0078" y2="1995.0078"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="720" x2="761" y1="1995.0078" y2="1995.0078"/><polygon fill="#A80036" points="730,1991.0078,720,1995.0078,730,1999.0078,726,1995.0078" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="281" x="726" y="1977.1514">dpd_line_fill_buffer_with_gain_bin_10bpp_packed</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="643" x2="1033" y1="2004.0078" y2="2004.0078"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="234" x="648" y="2015.4268">[bit_width_type DPD_RAW_12_BIT_PACKED]</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="643" x2="1033" y1="2019.8438" y2="2019.8438"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="248" x="648" y="2031.2627">[bit_width_type DPD_RAW_12_BIT_UNPACKED]</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="643" x2="1033" y1="2035.6797" y2="2035.6797"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="248" x="648" y="2047.0986">[bit_width_type DPD_RAW_16_BIT_UNPACKED]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="719" x2="761" y1="2072.8672" y2="2072.8672"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="761" x2="761" y1="2072.8672" y2="2085.8672"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="720" x2="761" y1="2085.8672" y2="2085.8672"/><polygon fill="#A80036" points="730,2081.8672,720,2085.8672,730,2089.8672,726,2085.8672" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="295" x="726" y="2068.0107">dpd_line_fill_buffer_with_gain_bin_10bpp_unpacked</text><rect fill="none" height="118.4063" style="stroke: #000000; stroke-width: 2.0;" width="470" x="479" y="2107.8672"/><polygon fill="#EEEEEE" points="479,2107.8672,540,2107.8672,540,2115.8672,530,2125.8672,479,2125.8672,479,2107.8672" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="16" x="494" y="2122.3623">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="203" x="555" y="2121.2861">[line_request.mode==PD_HDR_MODE]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="719" x2="761" y1="2148.5703" y2="2148.5703"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="761" x2="761" y1="2148.5703" y2="2161.5703"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="720" x2="761" y1="2161.5703" y2="2161.5703"/><polygon fill="#A80036" points="730,2157.5703,720,2161.5703,730,2165.5703,726,2161.5703" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="130" x="726" y="2143.7139">dpd_line_fill_buffer_hdr</text><polygon fill="#FBFB77" filter="url(#f1g9yd2qqbphmx)" points="489,2174.5703,489,2216.5703,935,2216.5703,935,2184.5703,925,2174.5703,489,2174.5703" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="925" x2="925" y1="2174.5703" y2="2184.5703"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="935" x2="925" y1="2184.5703" y2="2184.5703"/><rect fill="#000000" height="3.5" style="stroke: #000000; stroke-width: 0.0;" width="3.5" x="516" y="2187.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="399" x="521" y="2193.0654">From code, seems will separate left and right pixel of every pair pixel.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="220" x="503" y="2209.417">output p_gm_leftOut/p_gm_rightOut **</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="719" x2="761" y1="2255.625" y2="2255.625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="761" x2="761" y1="2255.625" y2="2268.625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="720" x2="761" y1="2268.625" y2="2268.625"/><polygon fill="#A80036" points="730,2264.625,720,2268.625,730,2272.625,726,2268.625" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="133" x="726" y="2250.7686">dpd_line_IIR_optimized</text><polygon fill="#FBFB77" filter="url(#f1g9yd2qqbphmx)" points="605,2281.625,605,2307.625,818,2307.625,818,2291.625,808,2281.625,605,2281.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="808" x2="808" y1="2281.625" y2="2291.625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="818" x2="808" y1="2291.625" y2="2291.625"/><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="192" x="611" y="2300.1201">Why use IIR here for each line</text><polygon fill="#A80036" points="1174.5,2334.9766,1184.5,2338.9766,1174.5,2342.9766,1178.5,2338.9766" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="714" x2="1180.5" y1="2338.9766" y2="2338.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="33" x="721" y="2334.4717">return</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1196.5" x2="1238.5" y1="2369.6797" y2="2369.6797"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1238.5" x2="1238.5" y1="2369.6797" y2="2382.6797"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1197.5" x2="1238.5" y1="2382.6797" y2="2382.6797"/><polygon fill="#A80036" points="1207.5,2378.6797,1197.5,2382.6797,1207.5,2386.6797,1203.5,2382.6797" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="1203.5" y="2364.8232">dpd_core_line_sad</text><polygon fill="#FBFB77" filter="url(#f1g9yd2qqbphmx)" points="1042,2395.6797,1042,2454.6797,1316,2454.6797,1316,2405.6797,1306,2395.6797,1042,2395.6797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1306" x2="1306" y1="2395.6797" y2="2405.6797"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1316" x2="1306" y1="2405.6797" y2="2405.6797"/><rect fill="#000000" height="3.5" style="stroke: #000000; stroke-width: 0.0;" width="3.5" x="1069" y="2409.0313"/><text fill="#FF0000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="87" x="1078" y="2414.1748">why need this?</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="186" x="1052" y="2430.5264">Do we compare sad or pd pixel?</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="245" x="1056" y="2446.8779">this should move and compare?&lt;/color&gt; **</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1196.5" x2="1238.5" y1="2491.0859" y2="2491.0859"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1238.5" x2="1238.5" y1="2491.0859" y2="2504.0859"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1191.5" x2="1238.5" y1="2504.0859" y2="2504.0859"/><polygon fill="#A80036" points="1201.5,2500.0859,1191.5,2504.0859,1201.5,2508.0859,1197.5,2504.0859" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="33" x="1203.5" y="2486.2295">return</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1191.5" x2="1233.5" y1="2536.4375" y2="2536.4375"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1233.5" x2="1233.5" y1="2536.4375" y2="2549.4375"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1192.5" x2="1233.5" y1="2549.4375" y2="2549.4375"/><polygon fill="#A80036" points="1202.5,2545.4375,1192.5,2549.4375,1202.5,2553.4375,1198.5,2549.4375" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="1198.5" y="2531.5811">compute_pd_and_confidence</text><polygon fill="#FBFB77" filter="url(#f1g9yd2qqbphmx)" points="1006,2562.4375,1006,2604.4375,1352,2604.4375,1352,2572.4375,1342,2562.4375,1006,2562.4375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1342" x2="1342" y1="2562.4375" y2="2572.4375"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1352" x2="1342" y1="2572.4375" y2="2572.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="325" x="1012" y="2580.9326">4) After doing core operation, we finally need to compute</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="1012" y="2597.2842">PD and confidence</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1191.5" x2="1238.5" y1="2631.4922" y2="2631.4922"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1238.5" x2="1238.5" y1="2631.4922" y2="2644.4922"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1197.5" x2="1238.5" y1="2644.4922" y2="2644.4922"/><polygon fill="#A80036" points="1207.5,2640.4922,1197.5,2644.4922,1207.5,2648.4922,1203.5,2644.4922" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="1203.5" y="2626.6357">compute_sad_single_window</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1196.5" x2="1238.5" y1="2679.8438" y2="2679.8438"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1238.5" x2="1238.5" y1="2679.8438" y2="2692.8438"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1197.5" x2="1238.5" y1="2692.8438" y2="2692.8438"/><polygon fill="#A80036" points="1207.5,2688.8438,1197.5,2692.8438,1207.5,2696.8438,1203.5,2692.8438" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="1203.5" y="2674.9873">compute_pd_and_confidence</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1196.5" x2="1238.5" y1="2728.1953" y2="2728.1953"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1238.5" x2="1238.5" y1="2728.1953" y2="2741.1953"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1191.5" x2="1238.5" y1="2741.1953" y2="2741.1953"/><polygon fill="#A80036" points="1201.5,2737.1953,1191.5,2741.1953,1201.5,2745.1953,1197.5,2741.1953" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="33" x="1203.5" y="2723.3389">return</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="812.75" y="2769.6143"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1181.5" x2="1223.5" y1="2808.3828" y2="2808.3828"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1223.5" x2="1223.5" y1="2808.3828" y2="2821.3828"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1182.5" x2="1223.5" y1="2821.3828" y2="2821.3828"/><polygon fill="#A80036" points="1192.5,2817.3828,1182.5,2821.3828,1192.5,2825.3828,1188.5,2821.3828" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="179" x="1188.5" y="2803.5264">dpd_get_pd_peripheral_window</text><polygon fill="#FBFB77" filter="url(#f1g9yd2qqbphmx)" points="1027,2834.3828,1027,2860.3828,1332,2860.3828,1332,2844.3828,1322,2834.3828,1027,2834.3828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1322" x2="1322" y1="2834.3828" y2="2844.3828"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1332" x2="1322" y1="2844.3828" y2="2844.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="284" x="1033" y="2852.8779">almost the same as center window, so skip here.</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="154.5" x2="1558.5" y1="2870.7344" y2="2870.7344"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="107" x="159.5" y="2882.1533">[Sparse pd sensor]</text><polygon fill="#A80036" points="494,2903.5703,504,2907.5703,494,2911.5703,498,2907.5703" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="198" x2="500" y1="2907.5703" y2="2907.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="150" x="205" y="2903.0654">configure_pd_context_info</text><polygon fill="#A80036" points="1021,2933.9219,1031,2937.9219,1021,2941.9219,1025,2937.9219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="516" x2="1027" y1="2937.9219" y2="2937.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="523" y="2933.417">get_global_offset_info</text><rect fill="none" height="310.4844" style="stroke: #000000; stroke-width: 2.0;" width="1157" x="332" y="2953.2734"/><polygon fill="#EEEEEE" points="332,2953.2734,393,2953.2734,393,2961.2734,383,2971.2734,332,2971.2734,332,2953.2734" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="16" x="347" y="2967.7686">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="266" x="408" y="2966.6924">[pdaf_sw_window_mode==FIXED_GRID_WINDOW]</text><rect fill="none" height="194.4297" style="stroke: #000000; stroke-width: 2.0;" width="1137" x="342" y="2978.625"/><polygon fill="#EEEEEE" points="342,2978.625,403,2978.625,403,2986.625,393,2996.625,342,2996.625,342,2978.625" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="16" x="357" y="2993.1201">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="141" x="418" y="2992.0439">[p-&gt;status==PD_CREATED]</text><polygon fill="#A80036" points="1417.5,3014.9766,1427.5,3018.9766,1417.5,3022.9766,1421.5,3018.9766" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="516" x2="1423.5" y1="3018.9766" y2="3018.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="130" x="523" y="3014.4717">pdaf_calibration_init</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="342" x2="1479" y1="3028.3281" y2="3028.3281"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="132" x="347" y="3039.7471">[p-&gt;status==PD_ACTIVE]</text><polygon fill="#FBFB77" filter="url(#f1g9yd2qqbphmx)" points="352,3048.1641,352,3074.1641,666,3074.1641,666,3058.1641,656,3048.1641,352,3048.1641" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="656" x2="656" y1="3048.1641" y2="3058.1641"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="666" x2="656" y1="3058.1641" y2="3058.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="293" x="358" y="3066.6592">just check config width/height equal fix window w/h</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="342" x2="1479" y1="3084.5156" y2="3084.5156"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="173" x="347" y="3095.9346">[p-&gt;status==PD_UNCONFIGURED]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="516" x2="558" y1="3121.7031" y2="3121.7031"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="558" x2="558" y1="3121.7031" y2="3134.7031"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="517" x2="558" y1="3134.7031" y2="3134.7031"/><polygon fill="#A80036" points="527,3130.7031,517,3134.7031,527,3138.7031,523,3134.7031" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="523" y="3116.8467">set_pd_context_param_info</text><polygon fill="#A80036" points="1417.5,3160.7031,1427.5,3164.7031,1417.5,3168.7031,1421.5,3164.7031" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="516" x2="1423.5" y1="3164.7031" y2="3164.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="227" x="523" y="3160.1982">allocate_pdaf_grid_memory_and_config</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="516" x2="558" y1="3202.4063" y2="3202.4063"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="558" x2="558" y1="3202.4063" y2="3215.4063"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="517" x2="558" y1="3215.4063" y2="3215.4063"/><polygon fill="#A80036" points="527,3211.4063,517,3215.4063,527,3219.4063,523,3215.4063" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="523" y="3197.5498">set_pd_context_param_info</text><polygon fill="#FBFB77" filter="url(#f1g9yd2qqbphmx)" points="415,3228.4063,415,3254.4063,603,3254.4063,603,3238.4063,593,3228.4063,415,3228.4063" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="593" x2="593" y1="3228.4063" y2="3238.4063"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="603" x2="593" y1="3238.4063" y2="3238.4063"/><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="167" x="421" y="3246.9014">why set pd context again?</text><polygon fill="#A80036" points="209,3288.7578,199,3292.7578,209,3296.7578,205,3292.7578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="203" x2="510" y1="3292.7578" y2="3292.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="33" x="215" y="3288.2529">return</text><polygon fill="#A80036" points="494,3319.1094,504,3323.1094,494,3327.1094,498,3323.1094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="198" x2="500" y1="3323.1094" y2="3323.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="205" y="3318.6045">pd_incremental_processing</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="516" x2="563" y1="3348.8125" y2="3348.8125"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="563" x2="563" y1="3348.8125" y2="3361.8125"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="522" x2="563" y1="3361.8125" y2="3361.8125"/><polygon fill="#A80036" points="532,3357.8125,522,3361.8125,532,3365.8125,528,3361.8125" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="528" y="3343.9561">pd_process_center_window</text><polygon fill="#A80036" points="1417.5,3392.8125,1427.5,3396.8125,1417.5,3400.8125,1421.5,3396.8125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="521" x2="1423.5" y1="3396.8125" y2="3396.8125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="189" x="528" y="3392.3076">pdaf_window_process_optimized</text><polygon fill="#A80036" points="1417.5,3423.1641,1427.5,3427.1641,1417.5,3431.1641,1421.5,3427.1641" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="521" x2="1423.5" y1="3427.1641" y2="3427.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="528" y="3422.6592">calculate_sad_vector</text><polygon fill="#A80036" points="1412.5,3453.5156,1422.5,3457.5156,1412.5,3461.5156,1416.5,3457.5156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="521" x2="1418.5" y1="3457.5156" y2="3457.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="528" y="3453.0107">calculate_pd_and_conf</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1434.5" x2="1476.5" y1="3488.2188" y2="3488.2188"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1476.5" x2="1476.5" y1="3488.2188" y2="3501.2188"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1435.5" x2="1476.5" y1="3501.2188" y2="3501.2188"/><polygon fill="#A80036" points="1445.5,3497.2188,1435.5,3501.2188,1445.5,3505.2188,1441.5,3501.2188" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="105" x="1441.5" y="3483.3623">pd_core_sad_bias</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1434.5" x2="1476.5" y1="3531.5703" y2="3531.5703"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1476.5" x2="1476.5" y1="3531.5703" y2="3544.5703"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1435.5" x2="1476.5" y1="3544.5703" y2="3544.5703"/><polygon fill="#A80036" points="1445.5,3540.5703,1435.5,3544.5703,1445.5,3548.5703,1441.5,3544.5703" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="67" x="1441.5" y="3526.7139">pd_core_pd</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1434.5" x2="1476.5" y1="3574.9219" y2="3574.9219"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1476.5" x2="1476.5" y1="3574.9219" y2="3587.9219"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1435.5" x2="1476.5" y1="3587.9219" y2="3587.9219"/><polygon fill="#A80036" points="1445.5,3583.9219,1435.5,3587.9219,1445.5,3591.9219,1441.5,3587.9219" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="1441.5" y="3570.0654">pd_core_conf</text><polygon fill="#A80036" points="527,3613.9219,517,3617.9219,527,3621.9219,523,3617.9219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="521" x2="1428.5" y1="3617.9219" y2="3617.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="33" x="533" y="3613.417">return</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="516" x2="558" y1="3648.625" y2="3648.625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="558" x2="558" y1="3648.625" y2="3661.625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="517" x2="558" y1="3661.625" y2="3661.625"/><polygon fill="#A80036" points="527,3657.625,517,3661.625,527,3665.625,523,3661.625" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="179" x="523" y="3643.7686">pd_process_peripheral_window</text><polygon fill="#FBFB77" filter="url(#f1g9yd2qqbphmx)" points="382,3674.625,382,3700.625,636,3700.625,636,3684.625,626,3674.625,382,3674.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="626" x2="626" y1="3674.625" y2="3684.625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="636" x2="626" y1="3684.625" y2="3684.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="233" x="388" y="3693.1201">almost the same as center window, skip</text><polygon fill="#A80036" points="209,3727.9766,199,3731.9766,209,3735.9766,205,3731.9766" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="203" x2="510" y1="3731.9766" y2="3731.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="33" x="215" y="3727.4717">return</text><text fill="#888888" font-family="sans-serif" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="215" x="7" y="19.6094">use imx258 for config example.</text><text fill="#888888" font-family="sans-serif" font-size="16" lengthAdjust="spacingAndGlyphs" textLength="751" x="3" y="39.7344">for example, for Res0 4208x3120, config 96x130 blocks and every block contains 8 pd pixel(4 left and 4 right)</text><!--
@startuml
title <size:18>pdaf learning of 8998</size>\n    Lin Jin
left header 
<font size="16"> use imx258 for config example. </font>
<font size="16">for example, for Res0 4208x3120, config 96x130 blocks and every block contains 8 pd pixel(4 left and 4 right) </font>
endheader

participant pdaf.c as pdaf
participant pdaf_dpd_wrapper.c as pdaf_dpd
participant pdaf_wrapper.c as pdaf_wrapper
participant pdaf_dpd_utils.c as pdaf_dpd_utils
participant pdaf_lib_common.c as pdaf_lib_common


== pdaf init ==
[o->pdaf: PDAF_PhaseDetection_init
activate pdaf
  pdaf->pdaf: PDAF_get_lib_version

  alt "persist.camera.pdaf_dump==1"
    note over pdaf: "dump \n pdaf_init_param.bin \n pdaf_version.bin"
  end

  alt  buffer_type==PDAF_BUFFER_FLAG_INTERLEAVE_CHANNEL
    pdaf->pdaf_dpd: set_dpd_context_init_info
    pdaf_dpd->pdaf: return (PD_HANDLE)p
  end

  note over pdaf_wrapper: process T2/T3 sensor
  pdaf->pdaf_wrapper: set_pd_context_init_info
  activate pdaf_wrapper
    pdaf_wrapper->pdaf_wrapper: init_sensor_info
    note over pdaf_wrapper: will read info like sensor image h/w\nblock_count_horizontal\npd_offset_horizontal etc.

    pdaf_wrapper->pdaf_wrapper: pdaf_param_init_tuning

    pdaf_wrapper->pdaf_wrapper: calculate_pd_pixel_offset
    pdaf_wrapper->pdaf: return
  deactivate pdaf_wrapper

deactivate pdaf

== pdaf calc ==
[o->pdaf: PDAF_PhaseDetection
activate pdaf
  alt "persist.camera.pdaf_dump 1"
    note over pdaf: dump pdaf_input_%s_%d.raw\npdaf_param.bin\npdaf_valid_lines.bin
  else "persist.camera.pdaf_dump 2"
    note over pdaf: dump pdaf_input_lens_pos_%4d.raw\npdaf_param.bin\npdaf_valid_lines.bin
  end

  alt dual-pd sensor
    pdaf->pdaf_dpd_wrapper: set_dpd_context_param_info
    activate pdaf_dpd_wrapper
      alt pdaf_sw_window_mode==FIXED_GRID_WINDOW
        alt p->status==PD_ACTIVE
          note over pdaf_dpd_wrapper: set new_width/new_height
        end
        alt p->status==PD_UNCONFIGURED
          pdaf_dpd_wrapper->pdaf_wrapper: set_pd_context_param_info
          pdaf_dpd_wrapper->pdaf_dpd_wrapper: allocate_dpd_grid_memory_and_config
        end
        pdaf_dpd_wrapper->pdaf_wrapper: set_pd_context_param_info
        pdaf_dpd_wrapper->pdaf_dpd_wrapper: dpd_grid_set_realtime_params
      end
        pdaf_dpd_wrapper->pdaf:return
    deactivate pdaf_dpd_wrapper

    pdaf->pdaf_dpd_wrapper: dpd_incremental_processing
    note over pdaf_dpd_wrapper: num_of_lines is come from isp\n what does this mean?
    activate pdaf_dpd_wrapper
      pdaf_dpd_wrapper->pdaf_dpd_wrapper: dpd_get_pd_center_window
      activate pdaf_dpd_wrapper
      loop grid_y_ind < window_number_ver
        pdaf_dpd_wrapper->pdaf_dpd_wrapper: **dpd_prepare_line_arg**
        note over pdaf_dpd_wrapper: 1)Prepare thie line_arg by filling all the necessary details\nin order to perform the core operations \n  **<color:red>Why need this?</color>**
        pdaf_dpd_wrapper->pdaf_dpd_wrapper: **dpd_process_grid_line**
        note over pdaf_dpd_wrapper: 2) This performs the core operation such as\n Parsing of PD pixels\n Performing Gain_map\n IIR filtering\n SAD computation
        activate pdaf_dpd_wrapper
          pdaf_dpd_wrapper->pdaf_dpd_utils: dpd_core_parse_and_preprocess(p_line_arg)
          activate pdaf_dpd_utils
            alt bit_width_type DPD_RAW_8_BIT_UNPACKED
              pdaf_dpd_utils->pdaf_dpd_utils: dpd_line_fill_buffer_with_gain_bin_8bpp_unpacked
            else bit_width_type DPD_RAW_10_BIT_UNPACKED
            else bit_width_type DPD_RAW_10_BIT_PACKED
              pdaf_dpd_utils->pdaf_dpd_utils: dpd_line_fill_buffer_with_gain_bin_10bpp_packed
            else bit_width_type DPD_RAW_12_BIT_PACKED
            else bit_width_type DPD_RAW_12_BIT_UNPACKED
            else bit_width_type DPD_RAW_16_BIT_UNPACKED
              pdaf_dpd_utils->pdaf_dpd_utils: dpd_line_fill_buffer_with_gain_bin_10bpp_unpacked
            end

            alt line_request.mode==PD_HDR_MODE
              pdaf_dpd_utils->pdaf_dpd_utils: dpd_line_fill_buffer_hdr
              note over pdaf_dpd_utils: ** From code, seems will separate left and right pixel of every pair pixel.\n  output p_gm_leftOut/p_gm_rightOut **
            end

            pdaf_dpd_utils->pdaf_dpd_utils: dpd_line_IIR_optimized
            note over pdaf_dpd_utils: **<color:red>Why use IIR here for each line</color>**
            pdaf_dpd_utils->pdaf_dpd_wrapper: return
          deactivate pdaf_dpd_utils


          pdaf_dpd_wrapper->pdaf_dpd_wrapper: dpd_core_line_sad
          note over pdaf_dpd_wrapper: ** <color:red> why need this? \n Do we compare sad or pd pixel?\n  this should move and compare?</color> **
          pdaf_dpd_wrapper->pdaf_dpd_wrapper: return
        deactivate pdaf_dpd_wrapper
      end


      pdaf_dpd_wrapper->pdaf_dpd_wrapper: compute_pd_and_confidence
      note over pdaf_dpd_wrapper: 4) After doing core operation, we finally need to compute\nPD and confidence
      pdaf_dpd_wrapper->pdaf_dpd_wrapper: compute_sad_single_window
      activate pdaf_dpd_wrapper
        pdaf_dpd_wrapper->pdaf_dpd_wrapper: compute_pd_and_confidence
        pdaf_dpd_wrapper->pdaf_dpd_wrapper: return
      deactivate pdaf_dpd_wrapper

    deactivate pdaf_dpd_wrapper
    deactivate pdaf_dpd_wrapper
    ... ...
    pdaf_dpd_wrapper->pdaf_dpd_wrapper: dpd_get_pd_peripheral_window
    note over pdaf_dpd_wrapper: almost the same as center window, so skip here.


  else Sparse pd sensor
    pdaf->pdaf_wrapper: configure_pd_context_info
    activate pdaf_wrapper
      pdaf_wrapper->pdaf_lib_common: get_global_offset_info
      alt pdaf_sw_window_mode==FIXED_GRID_WINDOW
        alt p->status==PD_CREATED
          pdaf_wrapper->pdaf_utils: **pdaf_calibration_init**
        else p->status==PD_ACTIVE
          note over pdaf_wrapper: just check config width/height equal fix window w/h
        else p->status==PD_UNCONFIGURED
          pdaf_wrapper->pdaf_wrapper: set_pd_context_param_info
          pdaf_wrapper->pdaf_utils: allocate_pdaf_grid_memory_and_config

        end
        pdaf_wrapper->pdaf_wrapper: set_pd_context_param_info
        note over pdaf_wrapper: **<color:red>why set pd context again?</color>**
      end
    pdaf_wrapper->pdaf: return
    deactivate pdaf_wrapper

    pdaf->pdaf_wrapper: pd_incremental_processing
    activate pdaf_wrapper #FFAAAA
      pdaf_wrapper->pdaf_wrapper: pd_process_center_window
      activate pdaf_wrapper #GreenYellow
      pdaf_wrapper->pdaf_utils: pdaf_window_process_optimized
      pdaf_wrapper->pdaf_utils: calculate_sad_vector
      pdaf_wrapper->pdaf_utils: calculate_pd_and_conf
        activate pdaf_utils #Chartreuse
          pdaf_utils->pdaf_utils: pd_core_sad_bias
          pdaf_utils->pdaf_utils: pd_core_pd
          pdaf_utils->pdaf_utils: pd_core_conf
          pdaf_utils->pdaf_wrapper: return
        deactivate pdaf_utils

      deactivate pdaf_wrapper
      pdaf_wrapper->pdaf_wrapper: pd_process_peripheral_window
      note over pdaf_wrapper: almost the same as center window, skip
    pdaf_wrapper->pdaf: return
    deactivate pdaf_wrapper
  end



deactivate pdaf


@enduml

PlantUML version 1.2017.20(Tue Dec 12 00:57:05 CST 2017)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) Client VM
Java Version: 1.8.0_161-b12
Operating System: Windows 10
OS Version: 10.0
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>