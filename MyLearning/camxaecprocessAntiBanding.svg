<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="347px" preserveAspectRatio="none" style="width:501px;height:347px;" version="1.1" viewBox="0 0 501 347" width="501px" zoomAndPan="magnify"><defs><filter height="300%" id="f1sh56swg4i5x2" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1sh56swg4i5x2)" height="219.5938" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="445" y="69.4297"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="450" x2="450" y1="38.2969" y2="307.0234"/><rect fill="#FEFECE" filter="url(#f1sh56swg4i5x2)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="84" x="406" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="70" x="413" y="22.9951">carbitrator</text><rect fill="#FEFECE" filter="url(#f1sh56swg4i5x2)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="84" x="406" y="306.0234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="70" x="413" y="326.0186">carbitrator</text><rect fill="#FFFFFF" filter="url(#f1sh56swg4i5x2)" height="219.5938" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="445" y="69.4297"/><ellipse cx="10.5" cy="68.6797" fill="none" rx="4" ry="4" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#A80036" points="433,65.4297,443,69.4297,433,73.4297,437,69.4297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="15" x2="439" y1="69.4297" y2="69.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="195" x="18" y="64.3638">processAntibandingAdjust</text><path d="M8,82.4297 L8,258.4297 L436,258.4297 L436,92.4297 L426,82.4297 L8,82.4297 " fill="#FBFB77" filter="url(#f1sh56swg4i5x2)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M426,82.4297 L426,92.4297 L436,92.4297 L426,82.4297 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="14" y="99.4966">Not Process Condition:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="364" x="30" y="114.6294">1. if (m_session.flickerMode == StatisticsAntibandingOff)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="347" x="30" y="129.7622">2. if (limit.expTime.max &lt; m_session.flickerHalfPeriod)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="264" x="30" y="144.895">这里表示表内最大的曝光时间都比半周期小，不可能找到半周期的整数倍了</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="30" y="160.0278">3. if (inExp.expTime</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="261" x="62" y="175.1606">&lt;= (FLOAT)m_session.flickerHalfPeriod *</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="327" x="94" y="190.2935">m_expTable.GetThresAntiBandingMinExpTimePct())</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149" x="14" y="205.4263">Basic Process Principal:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="30" y="220.5591">numOfHalfPeriod     =</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="342" x="46" y="235.6919">(INT32) (inExp.expTime / m_session.flickerHalfPeriod);</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="227" x="46" y="250.8247">取整数倍，如果不可用. 取numOfHalfPeriod+1.</text><polygon fill="#A80036" points="22,285.0234,12,289.0234,22,293.0234,18,289.0234" style="stroke: #A80036; stroke-width: 1.0;"/><ellipse cx="449.5" cy="288.2734" fill="none" rx="4" ry="4" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="16" x2="445" y1="289.0234" y2="289.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="28" y="283.9575">return</text><!--
@startuml
participant carbitrator

[o->carbitrator: **processAntibandingAdjust**
activate carbitrator
    note left carbitrator
        Not Process Condition:
            1. if (m_session.flickerMode == StatisticsAntibandingOff)
            2. if (limit.expTime.max < m_session.flickerHalfPeriod)   
            这里表示表内最大的曝光时间都比半周期小，不可能找到半周期的整数倍了
            3. if (inExp.expTime 
                    <= (FLOAT)m_session.flickerHalfPeriod * 
                            m_expTable.GetThresAntiBandingMinExpTimePct())
        Basic Process Principal:
            numOfHalfPeriod     = 
                (INT32) (inExp.expTime / m_session.flickerHalfPeriod);
                取整数倍，如果不可用. 取numOfHalfPeriod+1.
    end note
[o<-carbitrator: return
deactivate carbitrator


@enduml

PlantUML version 1.2019.04(Fri Mar 29 15:44:36 GMT 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_171-8u171-b11-0ubuntu0.16.04.1-b11
Operating System: Linux
OS Version: 4.4.0-43-Microsoft
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>